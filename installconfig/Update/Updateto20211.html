
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Update Alation to 2021.1 &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Update Alation" href="index.html"/>
        <link rel="next" title="Update Alation to 2020.4" href="Updateto20204.html"/>
        <link rel="prev" title="Update Alation to 2021.2" href="Updateto20212.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Update Alation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Updateto20233.html">Update Alation to 2023.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20231.html">Update Alation to 2023.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20224.html">Update Alation to 2022.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReencryptData.html">Re-Encrypt Existing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20223.html">Update Alation to 2022.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeduplicateMixedCaseUsernames.html">De-duplicate Mixed Case Usernames</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateSourceForDataflows.html">Update Source Field for Dataflow Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20222.html">Update Alation to 2022.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20221.html">Update Alation to 2022.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ResettingCheckpointForUserData.html">Resetting ETL Checkpoint for User Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20214.html">Update Alation to 2021.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateFrom20214To20214Patch.html">Update Alation from 2021.4.x to 2021.4.4 or Later Patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="ValidatingValueOfelasticsearch_env.html">Validating the Value of Parameter elasticsearch.env.es_java_opts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20213.html">Update Alation to 2021.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20212.html">Update Alation to 2021.2</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Update Alation to 2021.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20204.html">Update Alation to 2020.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="20204UpgradeScript.html">Pre-Update Reindexing Script for 2020.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20203.html">Update Alation to 2020.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR7.html">Updating Alation to V R7 (5.12.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeElasticsearchVR7.html">Elasticsearch Upgrade to 7.4 FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR6.html">Update Alation to V R6 (5.10.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeInternalPostgreSQLInstances.html">Upgrade Internal PostgreSQL Instances from 9.3 to 9.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR5.html">Update Alation to V R5 (5.9.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateSafetyBestPractice.html">Update Safety Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReleaseUpdatePrechecks.html">Release-specific Update Pre-checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="ManualSWUpdate.html">Manual Software Update for Standalone Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="updateHAPair.html">Update HA Pair Configuration (4.7 and above)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateHAPairwithClusterSplitting.html">Update HA Pair with Cluster Splitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="OCFUpdateAlationConnectorManager.html">Update Alation Connector Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Update Alation</a>
    <span class="separator">&gt;</span>
    <span>Update Alation to 2021.1</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="update-alation-to-2021-1">
<h1>Update Alation to 2021.1<a class="headerlink" href="#update-alation-to-2021-1" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<section id="update-version-dependencies">
<h2>2021.1 Update Version Dependencies<a class="headerlink" href="#update-version-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Alation supports the update to version 2021.1 from the following previous versions:</p>
<blockquote>
<div><ul class="simple">
<li><p>2020.4.x</p></li>
<li><p>2020.3.x</p></li>
<li><p>V R7 (5.12.x)</p></li>
</ul>
</div></blockquote>
<p>Use the instructions appropriate for your current version.</p>
<section id="releases-older-than-v-r7-5-12-x">
<h3>Releases older than V R7 (5.12.x)<a class="headerlink" href="#releases-older-than-v-r7-5-12-x" title="Permalink to this headline">¶</a></h3>
<p>Direct update to 2021.1 is not supported. First, update Alation to a version that supports the update to 2021.1 and then perform a second update to 2021.1.</p>
</section>
<section id="update-from-2021-1-la-to-2021-1-ga">
<h3>Update from 2021.1 LA to 2021.1 GA<a class="headerlink" href="#update-from-2021-1-la-to-2021-1-ga" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This information is only relevant if you are updating a <strong>test instance</strong> with 2021.1 LA to 2021.1 GA.</p>
</div>
<p>If you have Tableau sources configured to use SSL connections, after the update from 2021.1 LA to 2021.1 GA, reload the SSL certificates on the Tableau source Settings page and test the connection.</p>
</section>
</section>
<section id="release-specific-information">
<span id="id1"></span><h2>2021.1 Release-Specific Information<a class="headerlink" href="#release-specific-information" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Elasticsearch 1.4 removal from the Alation server</p></li>
<li><p>Internal codebase upgrade to Python 3</p></li>
<li><p>A new version of Alation Analytics V2</p></li>
<li><p>A new version of Alation Connector Manager</p></li>
<li><p>The Snowflake data source built-in driver updated to version 3.12.14</p></li>
<li><p>The <strong>Labs</strong> tab in Admin Settings renamed to <strong>Feature Configuration</strong></p></li>
<li><p>The <strong>Domains</strong> feature with a dedicated feature switch in Admin Settings &gt; Server Admin &gt; Feature Configuration &gt; Data Domains</p></li>
<li><p>The <strong>Group Role assignment</strong> feature with a dedicated feature switch in Admin Settings &gt; Catalog Admin &gt; Groups &gt; Use Custom Groups to assign user roles</p></li>
</ul>
<p>For more details on new features, improvements, and bug fixes, see <a class="reference internal" href="../../releases/releasenotes/ReleaseNotes20211.html"><span class="doc">Release Notes 2021.1 (General Availability)</span></a>.</p>
<section id="update-known-issue">
<h3>2021.1 Update Known Issue<a class="headerlink" href="#update-known-issue" title="Permalink to this headline">¶</a></h3>
<p>This information only applies if in your instance of Alation, the internal Alation database is protected by a password:</p>
<blockquote>
<div><ul class="simple">
<li><p>Update to 2021.1.x requires that the Postgres password should be cleared before the update to 2021.1.x and set back after the update is completed. Please <strong>contact Alation Support</strong> to guide you through the update process if you have a password set for the internal Alation database.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="backup-check">
<h2>Backup Check<a class="headerlink" href="#backup-check" title="Permalink to this headline">¶</a></h2>
<p>Before performing any update actions, ensure that you have the latest valid Alation backup and take and store a backup or a system image, if necessary.</p>
</section>
<section id="update-2020-4-to-2021-1">
<h2>Update 2020.4 To 2021.1<a class="headerlink" href="#update-2020-4-to-2021-1" title="Permalink to this headline">¶</a></h2>
<section id="step-1-perform-encryption-key-rotation">
<h3>STEP 1: Perform Encryption Key Rotation<a class="headerlink" href="#step-1-perform-encryption-key-rotation" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Update to 2021.1 cannot be done if key rotation has never been performed on the instance. The 2021.1 update command will stop with a “key rotation required” warning.</p>
<p>Please plan your Alation upgrade to 2021.1 so that the schedule accommodates for this preparatory step.</p>
</div>
<p>If you have not recently done so, perform the encryption key rotation on the Alation Server. On large installations, if key rotation has never been performed before, the initial key rotation may take some time to complete.</p>
<section id="key-rotation-on-ha-pair">
<h4>Key Rotation on HA Pair<a class="headerlink" href="#key-rotation-on-ha-pair" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>Key rotation should be done on the <strong>Primary</strong> server.</p></li>
<li><p>If you plan to update the HA Pair with splitting the cluster, <strong>perform key rotation on Primary before splitting the Pair</strong>.</p></li>
<li><p>After key rotation on the Primary is completed, allow some time for replication to happen between Primary and Secondary. The cluster should be in sync before you update or split and update.</p></li>
</ul>
</div></blockquote>
<p>On how to perform key rotation: <a class="reference internal" href="../../admins/AdminSettings/EncryptionKeyRotation.html"><span class="doc">Encryption Key Rotation</span></a></p>
</section>
</section>
<section id="step-2-take-an-additional-backup">
<h3>STEP 2: Take an Additional Backup<a class="headerlink" href="#step-2-take-an-additional-backup" title="Permalink to this headline">¶</a></h3>
<p>It is highly recommended to take an additional Alation backup after successfully performing key rotation. This backup is required if you have to restore using a 2021.1 build. You cannot restore data that did not have at least one key rotation.</p>
</section>
<section id="step-3-run-a-postgres-scan">
<h3>STEP 3: Run a Postgres Scan<a class="headerlink" href="#step-3-run-a-postgres-scan" title="Permalink to this headline">¶</a></h3>
<p>This step is optional but recommended.</p>
<p>After the encryption key rotation and before updating Alation, scan the internal Postgres database for corrupted indexes. If the scan finds corrupted indexes in Postgres, contact Alation Support to resolve the Postgres problems before updating Alation.</p>
<p>On how to scan Postgres: <a class="reference internal" href="../../admins/How-tos/HowToScanPostgresForCorruptedIndexes.html"><span class="doc">How to Scan Postgres For Corrupted Indexes</span></a></p>
</section>
<section id="step-4-update-alation-to-2021-1">
<h3>STEP 4: Update Alation To 2021.1<a class="headerlink" href="#step-4-update-alation-to-2021-1" title="Permalink to this headline">¶</a></h3>
<p>Proceed to update the Alation application using the appropriate update instructions:</p>
<blockquote>
<div><ul>
<li><p><a class="reference internal" href="ManualSWUpdate.html"><span class="doc">Manual Software Update for Standalone Systems</span></a></p></li>
<li><p>Update on the HA Pair:</p>
<blockquote>
<div><ul class="simple">
<li><p>with splitting the HA cluster: <a class="reference internal" href="UpdateHAPairwithClusterSplitting.html"><span class="doc">Update HA Pair with Cluster Splitting</span></a></p></li>
<li><p>without splitting the cluster: <a class="reference internal" href="updateHAPair.html"><span class="doc">Update HA Pair Configuration (4.7 and above)</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="step-5-perform-post-update-steps">
<h3>STEP 5: Perform Post-Update Steps<a class="headerlink" href="#step-5-perform-post-update-steps" title="Permalink to this headline">¶</a></h3>
<p>If relevant to your Alation instance:</p>
<ul class="simple">
<li><p><em>Perform this step only if using Alation Analytics V2</em>: <a class="reference internal" href="../AlationAnalyticsV2/UpdateAlationAnalyticsV2.html"><span class="doc">Update Alation Analytics V2</span></a></p></li>
<li><p><em>Perform this step only if using OCF Framework</em>: <a class="reference internal" href="OCFUpdateAlationConnectorManager.html"><span class="doc">Update Alation Connector Manager</span></a></p></li>
<li><p><strong>On instances using the HA Pair configuration</strong>: if before the update you had the Backup V2 feature enabled, check the corresponding feature flag after the update. The flag value is reset to the default when the HA cluster is rebuilt. If you use the update scenario with splitting and rebuilding the cluster, you need to re-enable the Backup V2 feature on the Primary instance after updating and rebuilding the HA. On how to enable Backup V2: <a class="reference internal" href="../BackupandRestore/BackupV1AndV2/EnableOrDisableBackupV2.html"><span class="doc">Enable or Disable Backup V2</span></a>.</p></li>
</ul>
</section>
</section>
<section id="update-v-r7-5-12-x-or-2020-3-to-2021-1">
<span id="update-20211-vr7-20211"></span><h2>Update V R7 (5.12.x) or 2020.3 To 2021.1<a class="headerlink" href="#update-v-r7-5-12-x-or-2020-3-to-2021-1" title="Permalink to this headline">¶</a></h2>
<p>This update scenario skips release 2020.4.x which includes a number of major changes to the Alation application. The changes in 2020.4 cause a number of additional checks and steps in the process of updating Alation.</p>
<p>If you have chosen to skip the 2020.4.x release and update to 2021.1 from V R7 or 2020.3, do the following before the upgrade:</p>
<ol class="arabic">
<li><p>Inform yourself on the changes in 2020.3 and 2020.4:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../../releases/releasenotes/ReleaseNotes20203%28GeneralAvailability%29.html"><span class="doc">Release Notes 2020.3 (General Availability)</span></a></p></li>
<li><p><a class="reference internal" href="Updateto20203.html#release-specific-information"><span class="std std-ref">2020.3 Release Specific Information</span></a></p></li>
<li><p><a class="reference internal" href="../../releases/releasenotes/ReleaseNotes20204.html"><span class="doc">Release Notes 2020.4 (General Availability)</span></a></p></li>
<li><p><a class="reference internal" href="Updateto20204.html#release-specific-information"><span class="std std-ref">2020.4 Release-Specific information</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Make a list of post-upgrade steps that may be relevant to your instance in the releases you skip (2020.3 and 2020.4). You will need to address those after the update as well:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="Updateto20204.html#update-20204-post-upgrade"><span class="std std-ref">Post-Upgrade Steps 2020.4</span></a></p></li>
<li><p>For 2020.3, refer to <a class="reference internal" href="Updateto20203.html#release-specific-information"><span class="std std-ref">2020.3 Release Specific Information</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Create an update schedule that accommodates for the required pre-update steps, such as Postgres re-indexing and encryption key rotation (see below) and the post-update steps relevant to your instance.</p></li>
<li><p>Make sure you have the latest valid Alation backup.</p></li>
</ol>
<p>To update Alation from V R7 or 2020.3 to 2021.1, follow these steps:</p>
<section id="step-1-required-checks">
<h3>STEP 1: Required Checks<a class="headerlink" href="#step-1-required-checks" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Internal PostgreSQL upgrade to 9.6 is required</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>To check your current Postgres version, from the Alation shell, run:</p>
</div></blockquote>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_psql
</pre></div>
</div>
</div></blockquote>
<p>If not 9.6, you need to first <a class="reference internal" href="UpgradeInternalPostgreSQLInstances.html"><span class="doc">Upgrade Internal PostgreSQL Instances from 9.3 to 9.6</span></a>.</p>
</div></blockquote>
</li>
<li><p>Elasticsearch migration from 1.4 to 7.4 should be complete</p>
<blockquote>
<div><p>To check the Elasticsearch version that is currently in use on your instance, from the Alation shell, run:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>elasticsearch.backend_mode
</pre></div>
</div>
</div></blockquote>
<p>It should be set to <strong>2</strong>. If you see a different value, you will not be able to update as Elasticsearch migration may not have happened. In this case, contact Alation Support to assist with the update.</p>
</div></blockquote>
</li>
</ol>
</section>
<section id="step-2-perform-encryption-key-rotation">
<h3>STEP 2: Perform Encryption Key Rotation<a class="headerlink" href="#step-2-perform-encryption-key-rotation" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Update to 2021.1 cannot be done if key rotation has never been performed on the instance.</p>
</div>
<p>If you have not recently done so, perform the encryption key rotation on the Alation Server. On large instances, if key rotation has never been performed before, the initial key rotation may take up to a week to complete. Please plan your Alation upgrade to 2021.1 so that the schedule accommodates for this preparatory step.</p>
<p>In case of HA Pair configuration, key rotation should be done on the Primary server.</p>
<p>It is recommended to take an Alation backup after performing key rotation.</p>
<p>On how to perform key rotation: <a class="reference internal" href="../../admins/AdminSettings/EncryptionKeyRotation.html"><span class="doc">Encryption Key Rotation</span></a></p>
</section>
<section id="step-3-take-an-additional-backup">
<h3>STEP 3: Take an Additional Backup<a class="headerlink" href="#step-3-take-an-additional-backup" title="Permalink to this headline">¶</a></h3>
<p>It is highly recommended to take an additional Alation backup after successfully performing key rotation. This backup is required if you have to restore using a 2021.1 build. You cannot restore data that did not have at least one key rotation.</p>
</section>
<section id="step-4-run-pre-upgrade-reindexing-script">
<h3>STEP 4: Run Pre-Upgrade Reindexing Script<a class="headerlink" href="#step-4-run-pre-upgrade-reindexing-script" title="Permalink to this headline">¶</a></h3>
<p>Running of the re-indexing script is required because of the changes in release 2020.4.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On HA Pair, the reindexing script should be run on the Primary instance.</p>
</div>
<ol class="arabic">
<li><p>Copy and save the following script as <code class="docutils literal notranslate"><span class="pre">preupgrade_reindexing.py</span></code> to <strong>/opt/alation/alation/opt/alation/</strong> on the Alation host (path outside the Alation shell): <a class="reference internal" href="20204UpgradeScript.html"><span class="doc">Pre-Update Reindexing Script for 2020.4</span></a></p></li>
<li><p>Is it recommended to run the script in a Screen session. To start a Screen session:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>screen<span class="w"> </span>-S<span class="w"> </span>reindex_db
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>From the Alation shell, change user to Alation:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
sudo<span class="w"> </span>su<span class="w"> </span>alation
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Update the permissions on the <code class="docutils literal notranslate"><span class="pre">preupgrade_reindexing.py</span></code> script so that it can be executed by user <code class="docutils literal notranslate"><span class="pre">alation</span></code>:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation/
sudo<span class="w"> </span>chown<span class="w"> </span>alation:alation<span class="w"> </span>preupgrade_reindexing.py
chmod<span class="w"> </span><span class="m">755</span><span class="w"> </span>preupgrade_reindexing.py
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run the script from <strong>/opt/alation/</strong> (inside the Alation shell) with the command given below. This script stops all Alation services except Postgres. Do not start any of the services while the script is running as this can result in an inconsistent state of the data.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>preupgrade_reindexing.py
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>The script prints its output to the console and to <strong>/opt/alation/site/site_data/pre_upgrade_reindex_rosemeta_db.log</strong> (path inside the shell).</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In case the script execution fails, do not proceed with the update. Contact Alation Support to troubleshoot and assist with the next steps.</p>
</div>
</div></blockquote>
<p>The time required for reindexing to complete depends on the size of the internal database. During the update, Alation will run a second re-indexing. The update time will be increased by approximately this amount of time when the second reindexing runs automatically during the update.</p>
<p>After the reindexing script completes, proceed to step 5.</p>
</section>
<section id="step-5-update-alation-to-2021-1">
<h3>STEP 5: Update Alation To 2021.1<a class="headerlink" href="#step-5-update-alation-to-2021-1" title="Permalink to this headline">¶</a></h3>
<p>Proceed to update the Alation application using the appropriate update instructions:</p>
<ul>
<li><p><a class="reference internal" href="ManualSWUpdate.html"><span class="doc">Manual Software Update for Standalone Systems</span></a></p></li>
<li><p>Update on the HA Pair:</p>
<blockquote>
<div><ul class="simple">
<li><p>with splitting the HA cluster: <a class="reference internal" href="UpdateHAPairwithClusterSplitting.html"><span class="doc">Update HA Pair with Cluster Splitting</span></a></p></li>
<li><p>without splitting the cluster: <a class="reference internal" href="updateHAPair.html"><span class="doc">Update HA Pair Configuration (4.7 and above)</span></a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="step-6-perform-post-update-steps">
<h3>STEP 6: Perform Post-Update Steps<a class="headerlink" href="#step-6-perform-post-update-steps" title="Permalink to this headline">¶</a></h3>
<p>If relevant to your Alation instance:</p>
<ul class="simple">
<li><p>Do the post-update steps for the releases you skipped (2020.3 and 2020.4)</p></li>
<li><p><em>Perform this step only if using Alation Analytics V2</em>: <a class="reference internal" href="../AlationAnalyticsV2/UpdateAlationAnalyticsV2.html"><span class="doc">Update Alation Analytics V2</span></a></p></li>
<li><p><em>Perform this step only if using OCF Framework</em>: <a class="reference internal" href="OCFUpdateAlationConnectorManager.html"><span class="doc">Update Alation Connector Manager</span></a></p></li>
<li><p><strong>On instances using the HA Pair configuration</strong>: if before upgrade you had the Backup V2 feature enabled, check the corresponding feature flag after the upgrade. The flag value is reset to the default when the HA Cluster is rebuilt. If you use the update scenario with splitting and rebuilding the cluster, you need to re-enable the Backup V2 feature on the Primary instance after upgrading and rebuilding the HA. On how to enable Backup V2: <a class="reference internal" href="../BackupandRestore/BackupV1AndV2/EnableOrDisableBackupV2.html"><span class="doc">Enable or Disable Backup V2</span></a>.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="Updateto20212.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Update Alation to 2021.2
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="Updateto20204.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Update Alation to 2020.4
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/Update/Updateto20211&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Update Alation to 2021.1</a><ul>
<li><a class="reference internal" href="#update-version-dependencies">2021.1 Update Version Dependencies</a><ul>
<li><a class="reference internal" href="#releases-older-than-v-r7-5-12-x">Releases older than V R7 (5.12.x)</a></li>
<li><a class="reference internal" href="#update-from-2021-1-la-to-2021-1-ga">Update from 2021.1 LA to 2021.1 GA</a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-specific-information">2021.1 Release-Specific Information</a><ul>
<li><a class="reference internal" href="#update-known-issue">2021.1 Update Known Issue</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backup-check">Backup Check</a></li>
<li><a class="reference internal" href="#update-2020-4-to-2021-1">Update 2020.4 To 2021.1</a><ul>
<li><a class="reference internal" href="#step-1-perform-encryption-key-rotation">STEP 1: Perform Encryption Key Rotation</a><ul>
<li><a class="reference internal" href="#key-rotation-on-ha-pair">Key Rotation on HA Pair</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-take-an-additional-backup">STEP 2: Take an Additional Backup</a></li>
<li><a class="reference internal" href="#step-3-run-a-postgres-scan">STEP 3: Run a Postgres Scan</a></li>
<li><a class="reference internal" href="#step-4-update-alation-to-2021-1">STEP 4: Update Alation To 2021.1</a></li>
<li><a class="reference internal" href="#step-5-perform-post-update-steps">STEP 5: Perform Post-Update Steps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#update-v-r7-5-12-x-or-2020-3-to-2021-1">Update V R7 (5.12.x) or 2020.3 To 2021.1</a><ul>
<li><a class="reference internal" href="#step-1-required-checks">STEP 1: Required Checks</a></li>
<li><a class="reference internal" href="#step-2-perform-encryption-key-rotation">STEP 2: Perform Encryption Key Rotation</a></li>
<li><a class="reference internal" href="#step-3-take-an-additional-backup">STEP 3: Take an Additional Backup</a></li>
<li><a class="reference internal" href="#step-4-run-pre-upgrade-reindexing-script">STEP 4: Run Pre-Upgrade Reindexing Script</a></li>
<li><a class="reference internal" href="#step-5-update-alation-to-2021-1">STEP 5: Update Alation To 2021.1</a></li>
<li><a class="reference internal" href="#step-6-perform-post-update-steps">STEP 6: Perform Post-Update Steps</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->