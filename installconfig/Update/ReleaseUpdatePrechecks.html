
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Release-specific Update Pre-checks &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Update Alation" href="index.html"/>
        <link rel="next" title="Manual Software Update for Standalone Systems" href="ManualSWUpdate.html"/>
        <link rel="prev" title="Update Safety Best Practices" href="UpdateSafetyBestPractice.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Update Alation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Updateto20233.html">Update Alation to 2023.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20231.html">Update Alation to 2023.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20224.html">Update Alation to 2022.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReencryptData.html">Re-Encrypt Existing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20223.html">Update Alation to 2022.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeduplicateMixedCaseUsernames.html">De-duplicate Mixed Case Usernames</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateSourceForDataflows.html">Update Source Field for Dataflow Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20222.html">Update Alation to 2022.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20221.html">Update Alation to 2022.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ResettingCheckpointForUserData.html">Resetting ETL Checkpoint for User Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20214.html">Update Alation to 2021.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateFrom20214To20214Patch.html">Update Alation from 2021.4.x to 2021.4.4 or Later Patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="ValidatingValueOfelasticsearch_env.html">Validating the Value of Parameter elasticsearch.env.es_java_opts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20213.html">Update Alation to 2021.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20212.html">Update Alation to 2021.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20211.html">Update Alation to 2021.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20204.html">Update Alation to 2020.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="20204UpgradeScript.html">Pre-Update Reindexing Script for 2020.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="Updateto20203.html">Update Alation to 2020.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR7.html">Updating Alation to V R7 (5.12.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeElasticsearchVR7.html">Elasticsearch Upgrade to 7.4 FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR6.html">Update Alation to V R6 (5.10.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradeInternalPostgreSQLInstances.html">Upgrade Internal PostgreSQL Instances from 9.3 to 9.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdatetoVR5.html">Update Alation to V R5 (5.9.x)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateSafetyBestPractice.html">Update Safety Best Practices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Release-specific Update Pre-checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="ManualSWUpdate.html">Manual Software Update for Standalone Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="updateHAPair.html">Update HA Pair Configuration (4.7 and above)</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateHAPairwithClusterSplitting.html">Update HA Pair with Cluster Splitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="OCFUpdateAlationConnectorManager.html">Update Alation Connector Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Update Alation</a>
    <span class="separator">&gt;</span>
    <span>Release-specific Update Pre-checks</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="release-specific-update-pre-checks">
<h1>Release-specific Update Pre-checks<a class="headerlink" href="#release-specific-update-pre-checks" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p>Updating Alation from versions between</p>
<ul class="simple">
<li><p><em>4.8.x</em> and <em>V R1 (5.0.x)</em></p></li>
</ul>
<p>to higher versions through V R4 (5.8.x)</p>
<p>Use this instruction to check for update readiness if you are going to
update from a version between 4.8.x or V R1 (5.0.x) to V R2 (5.6.x) or
higher. Do the following pre-checks:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#step-1-licensing">Step 1. Licensing</a></p></li>
<li><p><a class="reference internal" href="#step-2-mongodb-size-check">Step 2. MongoDB Size Check</a></p></li>
<li><p><a class="reference internal" href="#step-3-custom-drivers-check">Step 3. Custom Drivers Check</a></p></li>
<li><p><a class="reference internal" href="#step-4-kerberos-configuration-check">Step 4. Kerberos Configuration Check</a></p></li>
<li><p><a class="reference internal" href="#step-5-hive-with-kerberos-over-ssl-check">Step 5. Hive with Kerberos over SSL Check</a></p></li>
<li><p><a class="reference internal" href="#step-6-non-default-hive-driver-1-1-1-or-2-1-0-check">Step 6. Non-Default Hive Driver (1.1.1 or 2.1.0) Check</a></p></li>
</ol>
<section id="step-1-licensing">
<h2>Step 1. Licensing<a class="headerlink" href="#step-1-licensing" title="Permalink to this headline">¶</a></h2>
<p>Versions 4.10.x and above require a valid license to be placed on
the filesystem to update.</p>
<ol class="arabic simple">
<li><p>Obtain your license file from <a class="reference external" href="https://customerportal.alationdata.com/">Customer Portal</a>.</p></li>
<li><p>Put the license file <code class="docutils literal notranslate"><span class="pre">alation_license.lic</span></code> on your Alation server at <code class="docutils literal notranslate"><span class="pre">/opt/alation/alation_license.lic</span></code>. Note that this location is outside of Alation chroot.</p></li>
<li><p>Follow the appropriate update instructions.</p></li>
</ol>
</section>
<section id="step-2-mongodb-size-check">
<h2>Step 2. MongoDB Size Check<a class="headerlink" href="#step-2-mongodb-size-check" title="Permalink to this headline">¶</a></h2>
<p>Before updating, you must provide sufficient free disk space. We
recommend providing at least twice the current size of MongoDB on the
disk. In product versions before V R2 (5.4.x), “MongoDB” is the internal part of
Alation for collecting backend server data.</p>
<p>The updater will automatically exit early with a warning if you do not
have the required free disk space available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This disk space requirement exists because in VR2 the Alation server is migrating off MongoDB. Starting from V R2, the data stored in MongoDB will be gradually copied over to a PostgreSQL database. In a future release, MongoDB will be completely removed. Until this removal is complete, extra space is required for both copies of the data.</p>
</div>
<section id="how-to-validate-you-have-enough-disk-space">
<h3>How to validate you have enough disk space<a class="headerlink" href="#how-to-validate-you-have-enough-disk-space" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Go to your data drive (usually at <code class="docutils literal notranslate"><span class="pre">/data</span></code> ) and run the following command to see how much disk space is used by MongoDB:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>du<span class="w"> </span>-k<span class="w"> </span>--max-depth<span class="o">=</span><span class="m">0</span><span class="w"> </span>-h<span class="w"> </span>./mongo
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="2">
<li><p>Double this number: it is the free space needed for
updating.</p></li>
<li><p>Check how much free space exists. On the host, outside the Alation
chroot, run:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>df<span class="w"> </span>-h
</pre></div>
</div>
</li>
</ol>
<p>The output will show the used and available disk space for the
disks. Find the main data disk. It is usually called <code class="docutils literal notranslate"><span class="pre">/data</span></code> .
Find the number in the <strong>Avail</strong> column: this should be more than
the space needed that you have calculated in Step 2.</p>
</section>
<section id="updater-quits-with-install-aborted">
<h3>Updater quits with Install Aborted<a class="headerlink" href="#updater-quits-with-install-aborted" title="Permalink to this headline">¶</a></h3>
<p>If updater quits with the <strong>Install Aborted</strong> error, you can either:</p>
<ul class="simple">
<li><p>Free the required disk space and try the update again.</p></li>
<li><p>Follow the instructions in the update warning to ignore the disk
space check. The updater checks for at least two times the size of
MongoDB of free disk space, which is conservative. You can
proceed with less, but we recommend you monitor the disk space for a
few weeks after the update.</p></li>
</ul>
</section>
</section>
<section id="step-3-custom-drivers-check">
<h2>Step 3. Custom Drivers Check<a class="headerlink" href="#step-3-custom-drivers-check" title="Permalink to this headline">¶</a></h2>
<p>After updating your staging server, you will need to verify that
your custom drivers work in VR2 (or higher version).</p>
<p>How to know if you used a custom driver? Before updating, check if you have used any custom drivers.</p>
<p>In versions below V R2, it was possible to use custom drivers by placing
them in the Alation backend server to connect to some
databases. You can check if you have ever placed a driver into the
backend by running the following command from inside the Alation
chroot :</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>ls<span class="w"> </span>/opt/alation/site/site_data/pre_added_jars/
</pre></div>
</div>
<p>If this directory is empty you can skip this section.</p>
<p>If not, and you find files there, it is possible that you are using
custom drivers in your instance. In Alation, find the Data Sources which
use these custom drivers and use the steps below to continue using them
after the update. The custom drivers will have to be relocated to a
different directory after the update.</p>
<p>To continue using custom drivers after updating Alation,</p>
<ol class="arabic">
<li><p>Update your staging server.</p></li>
<li><p>Copy the custom drivers you located in   <code class="docutils literal notranslate"><span class="pre">/pre_added_jars</span></code> to a new location inside the chroot: <code class="docutils literal notranslate"><span class="pre">/opt/alation/site/site_data/custom_drivers/​</span></code>.</p></li>
<li><p>Restart the Taskserver and Connector:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_supervisor<span class="w"> </span>restart<span class="w"> </span>java:taskserver
alation_supervisor<span class="w"> </span>restart<span class="w"> </span>java:connector
</pre></div>
</div>
</li>
</ol>
<ol class="arabic" start="4">
<li><p>In Alation, for the Data Sources which should use these custom
drivers, select the correct driver on the**Network Connection** &gt; <strong>Data Source Settings</strong> &gt;
<strong>General Settings</strong> tab. Confirm that
the network connection works and run metadata extraction, a Compose
query and a table profile (if you use them).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To open General Settings of a Data Source,</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>In Alation, on the main toolbar, click <strong>Sources</strong> . The Sources page will open.</p></li>
<li><p>Click <strong>Manage Settings</strong>, then click the name of your Data Source. The corresponding Data Source page will open.</p></li>
<li><p>Alternatively, you can use left-hand navigation to find the Data Source you need.</p></li>
<li><p>In the upper-right corner, click <strong>More</strong> then click <strong>Settings</strong> to open the Data Source settings page.</p></li>
<li><p>Click <strong>General Settings</strong> tab to open it.</p></li>
</ol>
</div></blockquote>
</div>
</li>
</ol>
<p><em>Data Source Settings &gt; General Settings &gt; Network Connection: selecting a driver</em></p>
<a class="reference internal image-reference" href="../../_images/Screen_Shot_2019-01-03_at_10.50.32_AM.png"><img alt="../../_images/Screen_Shot_2019-01-03_at_10.50.32_AM.png" class="align-center" src="../../_images/Screen_Shot_2019-01-03_at_10.50.32_AM.png" style="width: 5.5in;" /></a>
<p>If the driver does not appear in UI after you relocated it, confirm you
have placed it in the correct folder as described above and restarted
the required processes.</p>
</section>
<section id="step-4-kerberos-configuration-check">
<h2>Step 4. Kerberos Configuration Check<a class="headerlink" href="#step-4-kerberos-configuration-check" title="Permalink to this headline">¶</a></h2>
<p>If you do not use any Data Sources with Kerberos authentication, you can
skip this section. Even if you do use Kerberos there is a good chance
everything will work, and you can skip this section. If you experience a
problem connecting to your Kerberos authenticated data source after the
update, refer to this section for details on how you may fix it.</p>
<p>Alation V R2 (and higher) uses a newer version of Java (Java 9) which
introduced a bug ​fix​ that causes the <code class="docutils literal notranslate"><span class="pre">renew_lifetime</span></code> parameter in
Kerberos configuration file <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> to be respected. This
means that if this parameter had been previously improperly configured,
it would not have mattered because it was ignored. Now, after the update
to VR2 (or higher), the authentication using Kerberos may fail. This will
result in a “Message Stream Modified” error in Taskserver and Connector.</p>
<p>If you experience this problem after updating, we recommend you remove
the <code class="docutils literal notranslate"><span class="pre">renew_lifetime</span></code> parameter from the <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> files.</p>
<p>To remove the parameter,</p>
<ol class="arabic">
<li><p>Enter the Alation Shell:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>alation<span class="w"> </span>shell
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<ol class="arabic" start="2">
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">renew_lifetime</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">/etc/krb5.conf</span></code> .</p></li>
<li><p>Run the following commands to apply the changes:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_action<span class="w"> </span>copy_krb5_conf
alation_supervisor<span class="w"> </span>restart<span class="w"> </span>java:*
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Connect to your Kerberos-authenticated databases from Alation to
verify the connection works.</p></li>
</ol>
</section>
<section id="step-5-hive-with-kerberos-over-ssl-check">
<h2>Step 5. Hive with Kerberos over SSL Check<a class="headerlink" href="#step-5-hive-with-kerberos-over-ssl-check" title="Permalink to this headline">¶</a></h2>
<p>If you do not use a Data Source with this configuration you can skip this section.</p>
<p>You will need to perform a few steps to continue using your Hive Data
Source that authenticates with Kerberos over SSL. Follow these
steps after upgrading.</p>
<ol class="arabic simple">
<li><p>Go to the <strong>General Settings</strong> page for your Data Source.</p></li>
<li><p>Under <strong>Network Connection</strong>, find the <strong>Driver</strong> dropdown menu.</p></li>
<li><p>Click <strong>Driver</strong>, and find and select a drive named <code class="docutils literal notranslate"><span class="pre">com.alation.drivers.hive.Hive2Driver.com.alation.drivers.hive.one.1.1.1-1.1.1-kerberos-ssl-patched</span></code> .</p></li>
<li><p>Test the <strong>Service Account</strong> section.</p></li>
<li><p>Test running a Compose query.</p></li>
<li><p>Test metadata extraction.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To open General Settings of a Data Source,</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>In Alation, on the main toolbar, click <strong>Sources</strong> . The Sources
page will open.</p></li>
<li><p>Click <strong>Manage Settings</strong>, then click the name of your Data
Source. The corresponding Data Source page will open.</p></li>
<li><p>Alternatively, you can use left-hand navigation to find the Data
Source you need.</p></li>
<li><p>In the upper-right corner, click <strong>More</strong> then
click <strong>Settings</strong> to open the Data Source settings page.</p></li>
<li><p>Click <strong>General Settings</strong> tab to open it.</p></li>
</ol>
</div></blockquote>
</div>
<p><em>Data Source Settings &gt; General Settings &gt; Network Connection: selecting
the Kerberos over SSL driver</em></p>
<a class="reference internal image-reference" href="../../_images/Screen_Shot_2019-01-03_at_10.55.07_AM.png"><img alt="../../_images/Screen_Shot_2019-01-03_at_10.55.07_AM.png" class="align-center" src="../../_images/Screen_Shot_2019-01-03_at_10.55.07_AM.png" style="width: 5.5in;" /></a>
</section>
<section id="step-6-non-default-hive-driver-1-1-1-or-2-1-0-check">
<h2>Step 6. Non-Default Hive Driver (1.1.1 or 2.1.0) Check<a class="headerlink" href="#step-6-non-default-hive-driver-1-1-1-or-2-1-0-check" title="Permalink to this headline">¶</a></h2>
<p>Read this section if you are using Hive Data Sources with custom drivers (not
provided by Alation). If you do not use any Hive Data Sources or
you are confident you have not changed the Hive driver version that
Alation uses by default, you can skip this section.</p>
<p>In your instance, you may have changed the default Hive driver version
by changing the parameter <code class="docutils literal notranslate"><span class="pre">supervisor.shims.hive_version</span></code> in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code> file.</p>
<p>Before updating, check the value of <code class="docutils literal notranslate"><span class="pre">supervisor.shims.hive_version</span></code> in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code> . If its
value is not <code class="docutils literal notranslate"><span class="pre">0.14.0</span></code> (default), but is <code class="docutils literal notranslate"><span class="pre">1.1.1</span></code>, <code class="docutils literal notranslate"><span class="pre">2.1.0</span></code>, or
other, you will need to take the following action after
updating:</p>
<ol class="arabic simple">
<li><p>In Alation, navigate to the <strong>General Settings</strong> tab of your Hive Data Source Settings page.</p></li>
<li><p>Under <strong>Network Connections</strong>, in the <strong>Driver</strong> list, find and select the appropriate driver that matches your current setting of <code class="docutils literal notranslate"><span class="pre">supervisor.shims.hive_version</span></code> .</p></li>
</ol>
</section>
<section id="backup-reminder">
<h2>Backup Reminder<a class="headerlink" href="#backup-reminder" title="Permalink to this headline">¶</a></h2>
<p>Alation runs backups automatically on a nightly basis; we strongly
recommend verifying that your backups are running correctly before
updating your system. The best way to validate a backup is to perform a
full restore on a separate system.</p>
<p>To follow an even safer update best practice, if your infrastructure
allows for the creation of a complete system snapshot/image, create one before installing the update. Make sure that the image
restore process is tested at least once on a test server. After a
successful update, you can delete this image.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="UpdateSafetyBestPractice.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Update Safety Best Practices
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="ManualSWUpdate.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Manual Software Update for Standalone Systems
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/Update/ReleaseUpdatePrechecks&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Release-specific Update Pre-checks</a><ul>
<li><a class="reference internal" href="#step-1-licensing">Step 1. Licensing</a></li>
<li><a class="reference internal" href="#step-2-mongodb-size-check">Step 2. MongoDB Size Check</a><ul>
<li><a class="reference internal" href="#how-to-validate-you-have-enough-disk-space">How to validate you have enough disk space</a></li>
<li><a class="reference internal" href="#updater-quits-with-install-aborted">Updater quits with Install Aborted</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-3-custom-drivers-check">Step 3. Custom Drivers Check</a></li>
<li><a class="reference internal" href="#step-4-kerberos-configuration-check">Step 4. Kerberos Configuration Check</a></li>
<li><a class="reference internal" href="#step-5-hive-with-kerberos-over-ssl-check">Step 5. Hive with Kerberos over SSL Check</a></li>
<li><a class="reference internal" href="#step-6-non-default-hive-driver-1-1-1-or-2-1-0-check">Step 6. Non-Default Hive Driver (1.1.1 or 2.1.0) Check</a></li>
<li><a class="reference internal" href="#backup-reminder">Backup Reminder</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->