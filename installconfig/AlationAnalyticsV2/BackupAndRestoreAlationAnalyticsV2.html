
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Alation Analytics V2 Backup and Restore &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Alation Analytics V2" href="index.html"/>
        <link rel="next" title="Remove Alation Analytics V2 Data Source From the Catalog" href="RemoveAlationAnalyticsV2Source.html"/>
        <link rel="prev" title="Clear the Data from the Alation Analytics V2 Database" href="ClearDataFromAlationAnalyticsV2.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Alation Analytics V2</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="TransitionV1ToV2.html">Transition from Alation Analytics V1 to Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableAlationAnalyticsV2.html">Enable and Install Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AccessToAlationAnalyticsV2.html">User Access to Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Connect3rdPartyBIToolsToAAV2.html">Connect Third-Party BI Tools to Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2ServerArchitecture.html">Alation Analytics V2 Server Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateAlationAnalyticsV2.html">Update Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2ETL.html">Alation Analytics V2 ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="MaintainAlationAnalyticsV2.html">Maintain Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearDataFromAlationAnalyticsV2.html">Clear the Data from the Alation Analytics V2 Database</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Alation Analytics V2 Backup and Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="RemoveAlationAnalyticsV2Source.html">Remove Alation Analytics V2 Data Source From the Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="UninstallAlationAnalyticsV2.html">Uninstall Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="RemoveAlationAnalyticsV1Source.html">Remove Alation Analytics V1 Data Source From the Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2DatabaseModel.html">Alation Analytics V2 Database Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="EmbedExternalVisualizations.html">Embed External Visualizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2Dashboard.html">Alation Analytics V2 Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2TopContributors.html">Alation Analytics Top Contributors Report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Alation Analytics V2</a>
    <span class="separator">&gt;</span>
    <span>Alation Analytics V2 Backup and Restore</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="alation-analytics-v2-backup-and-restore">
<h1>Alation Analytics V2 Backup and Restore<a class="headerlink" href="#alation-analytics-v2-backup-and-restore" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p><em>Applies only to customer-managed (on-premise) instances of Alation</em></p>
<p>At times you may need to restore the Alation Analytics V2 database, for example if it gets corrupted or if Alation Analytics is installed on the same host as Alation and you restore Alation to a new host. Alation Analytics V2 is not backed up by the main Alation application backup process, so its backup process needs to be managed separately. The backup and restore process for Alation Analytics depends on which version of Alation you have:</p>
<ul class="simple">
<li><p>Starting in release 2023.1.6, Alation Analytics V2 has its own backup and restore functionality. You can create full backups of the Alation Analytics database at any time and restore any of your backups.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is not available for rootless Docker installations of Alation Analytics.</p>
</div>
<ul class="simple">
<li><p>From 2020.3 to 2023.1.5, to restore Alation Analytics V2 data you must first either clear all data from the database or reinstall Alation Analytics, then rerun ETL to repopulate the database. This process can also be used on newer versions if there is no viable backup. See Clear and Repopulate below for details.</p></li>
</ul>
<section id="back-up">
<h2>Back Up<a class="headerlink" href="#back-up" title="Permalink to this headline">¶</a></h2>
<p><em>Applies from release 2023.1.6</em></p>
<p>Backups are created manually on the Alation Analytics host machine. There is currently no option for scheduled or incremental backups.</p>
<p>Backup files can take up a lot of space. Monitor your disk usage and delete backup files manually as needed to free up space.</p>
<p>To back up the Alation Analytics V2 database:</p>
<ol class="arabic">
<li><p>Log into the host where Alation Analytics is installed.</p></li>
<li><p>Stop the RabbitMQ container to ensure ETL is not running when the backup begins:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker-compose<span class="w"> </span>stop<span class="w"> </span>rabbitmq
</pre></div>
</div>
<p>If the backup is started while ETL is running, the backup will contain whatever data is present at that moment. This could result in inconsistent data.</p>
</li>
<li><p>Go into the Alation Analytics directory where the installer file is located. For example, assuming the default Alation Analytics directory:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation-analytics/
</pre></div>
</div>
</li>
<li><p>Start the backup by providing the <code class="docutils literal notranslate"><span class="pre">--backup</span></code> option to the Alation Analytics installer. For example, to start a backup using version 1.0.25 of the installer, run:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./alation-analytics-installer-v-1.0.25<span class="w"> </span>--backup
</pre></div>
</div>
<p>As the backup progresses, you’ll see the following output on the screen:</p>
<img alt="../../_images/AAV2_Backup_Output.png" src="../../_images/AAV2_Backup_Output.png" />
</li>
<li><p><em>(Optional)</em> You can monitor the backup while it’s still in progress:</p>
<ol class="loweralpha">
<li><p>Open a new tab or window in your console.</p></li>
<li><p>Go into the backup directory, which is inside the Alation Analytics directory at <strong>/postgres/13/backup</strong>. For example, assuming the default Alation Analytics directory:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation-analytics/postgres/13/backup
</pre></div>
</div>
</li>
<li><p>View <strong>alation-analytics-backup.log</strong>, for example by tailing it:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>tail<span class="w"> </span>-f<span class="w"> </span>alation-analytics-backup.log
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>When the backup is complete, restart the RabbitMQ container:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker-compose<span class="w"> </span>start<span class="w"> </span>rabbitmq
</pre></div>
</div>
</li>
<li><p>You can find the completed backup file in the backup directory, which is inside the Alation Analytics directory at <strong>/postgres/13/backup</strong>. Backup files are compressed into a tar file and named using the date and time of the backup, for example <strong>20230623-143519F.tar.gz</strong>.</p></li>
</ol>
</section>
<section id="restore-a-backup">
<span id="aav2-restore-a-backup"></span><h2>Restore a Backup<a class="headerlink" href="#restore-a-backup" title="Permalink to this headline">¶</a></h2>
<p><em>Applies from release 2023.1.6</em></p>
<p>You can restore the Alation Analytics database to a prior state using an existing backup file. The database will be reset to the exact state it was in when the backup was taken.</p>
<p>You can also restore a backup file into a new installation of Alation Analytics. In this case, you do not need to click the Initiate Analytics Database button during the installation process. Instead, you can restore a backup file as described below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The backup file you’re restoring must be from the same version of Alation as it’s being restored to.</p>
</div>
<p>To restore the Alation Analytics V2 database from a backup:</p>
<ol class="arabic">
<li><p>Log into the host where Alation Analytics is installed.</p></li>
<li><p>Choose the backup file you’re going to restore from, keeping in mind the following:</p>
<ul class="simple">
<li><p>The backup file you’re restoring from must be from the same version of Alation Analytics as it’s being restored to.</p></li>
<li><p>If you’ve moved your backup files, or if you’re restoring to a new installation of Alation Analytics, you’ll need to move the backup file to the <strong>/postgres/13/backup</strong> directory of the Alation Analytics instance you’re restoring to. It needs to be directly under the <strong>/postgres/13/backup</strong> directory, not in a subdirectory.</p></li>
<li><p>If you’re restoring a specific older backup rather than the latest backup, take note of the backup file’s name. Backup files are named using the date and time of the backup, for example <strong>20230623-143519F.tar.gz</strong>.</p></li>
</ul>
</li>
<li><p>Stop the RabbitMQ container to ensure ETL is not running when the restoration begins:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker-compose<span class="w"> </span>stop<span class="w"> </span>rabbitmq
</pre></div>
</div>
<p>If ETL is running when you restore, the restoration will be delayed until the ETL process is complete.</p>
</li>
<li><p>Go into the Alation Analytics directory where the installer file is located. For example, assuming the default Alation Analytics directory:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation-analytics/
</pre></div>
</div>
</li>
<li><p>Start the restoration by providing the <code class="docutils literal notranslate"><span class="pre">--restore</span></code> option to the Alation Analytics installer with an appropriate value:</p>
<ul>
<li><p>To restore the latest backup in the <strong>/postgres/13/backup</strong> directory, set the <code class="docutils literal notranslate"><span class="pre">--restore</span></code> option equal to <code class="docutils literal notranslate"><span class="pre">latest</span></code>. For example, using version 1.0.25 of the installer:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./alation-analytics-installer-v-1.0.25<span class="w"> </span>--restore<span class="o">=</span>latest
</pre></div>
</div>
</li>
<li><p>To restore a specific backup in the <strong>/postgres/13/backup</strong> directory, set the <code class="docutils literal notranslate"><span class="pre">--restore</span></code> option equal to the backup file’s name without the file extension. For example, using version 1.0.25 of the installer:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./alation-analytics-installer-v-1.0.25<span class="w"> </span>--restore<span class="o">=</span><span class="m">20230623</span>-143519F
</pre></div>
</div>
</li>
</ul>
<p>As the restoration progresses, you’ll see the following output on the screen:</p>
<blockquote>
<div><img alt="../../_images/AAV2_Restore_Output.png" src="../../_images/AAV2_Restore_Output.png" />
</div></blockquote>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you’re restoring a backup into a new installation of Alation Analytics, do NOT click the <strong>Initiate Analytics Database</strong> button in Alation.</p>
</div>
</li>
<li><p><em>(Optional)</em> You can monitor the restoration while it’s still in progress:</p>
<ol class="loweralpha">
<li><p>Open a new tab or window in your console.</p></li>
<li><p>Go into the backup directory, which is inside the Alation Analytics directory at <strong>/postgres/13/backup</strong>. For example, assuming the default Alation Analytics directory:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation-analytics/postgres/13/backup
</pre></div>
</div>
</li>
<li><p>View <strong>alation-analytics-restore.log</strong>, for example by tailing it:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>tail<span class="w"> </span>-f<span class="w"> </span>alation-analytics-restore.log
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>When the restoration is complete, restart the RabbitMQ container:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker-compose<span class="w"> </span>start<span class="w"> </span>rabbitmq
</pre></div>
</div>
</li>
</ol>
<p>The <a class="reference internal" href="AlationAnalyticsV2ETL.html"><span class="doc">ETL process</span></a> will run automatically on its <a class="reference internal" href="AlationAnalyticsV2ETL.html#aav2-etl-schedule"><span class="std std-ref">regular schedule</span></a> to populate the restored database with any data that’s newer than the backup. You can also <a class="reference internal" href="AlationAnalyticsV2ETL.html#aav2-run-etl-manually"><span class="std std-ref">run ETL manually on demand</span></a>.</p>
</section>
<section id="clear-and-repopulate">
<h2>Clear and Repopulate<a class="headerlink" href="#clear-and-repopulate" title="Permalink to this headline">¶</a></h2>
<p><em>Applies from release 2020.3</em></p>
<p>If you have no viable backup of the Alation Analytics V2 database, or if you’re on a version from 2020.3 to 2023.1.5, you have the option of clearing and repopulating the database. Compared to the newer backup and restore feature described above, this option has some disadvantages:</p>
<ul class="simple">
<li><p>Change history data is limited to one year.</p></li>
<li><p>Data for search clicks, search queries, and parts of curation history is limited to 30 days.</p></li>
<li><p>The process is time consuming as it requires you to rerun ETL.</p></li>
</ul>
<p>The steps for clearing and repopulating the database depend on whether Alation Analytics V2 was installed on the same host as Alation or a different host.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#restore-a-same-host-installation">Restore a Same-Host Installation</a></p></li>
<li><p><a class="reference internal" href="#restore-a-remote-host-installation">Restore a Remote-Host Installation</a></p></li>
</ul>
<section id="restore-a-same-host-installation">
<h3>Restore a Same-Host Installation<a class="headerlink" href="#restore-a-same-host-installation" title="Permalink to this headline">¶</a></h3>
<p><em>Restoring an instance that had Alation Analytics V2 installed on the same host with the Alation catalog</em></p>
<p>When you restore an Alation backup on a new host, the restored Alation Analytics V2 data source will be orphaned and disconnected after the restore as the underlying Alation Analytics application and the database are not restored. You will need to reinstall the Alation Analytics V2 components on the host where you restored and reconnect the data source and the database.</p>
<a class="reference internal image-reference" href="../../_images/AAV2_14.png"><img alt="../../_images/AAV2_14.png" src="../../_images/AAV2_14.png" style="width: 400px;" /></a>
<p>To restore Alation Analytics V2 after you have restored Alation from a backup:</p>
<ol class="arabic">
<li><p>Log in to the restored Alation instance and go to <strong>Admin Settings</strong> &gt; <strong>Server Admin</strong> &gt; <strong>Alation Analytics</strong>.</p></li>
<li><p>Download the Alation Analytics package, install it on the new Alation host, and perform the required configuration. For the installation steps, refer to <a class="reference internal" href="EnableAlationAnalyticsV2.html"><span class="doc">Enable and Install Alation Analytics V2</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You do not need to enable the Alation Analytics V2 feature as it has already been enabled on the instance that was backed up and restored.</p>
</div>
</li>
<li><p>As part of the installation, you will be asked to initiate the Alation Analytics database on the Alation Analytics settings page by clicking the <strong>Initiate Analytics Database</strong> button. This will return the Alation Analytics data source to the working state and begin the ETL process that will repopulate it on the restored instance.</p></li>
</ol>
</section>
<section id="restore-a-remote-host-installation">
<h3>Restore a Remote-Host Installation<a class="headerlink" href="#restore-a-remote-host-installation" title="Permalink to this headline">¶</a></h3>
<p><em>Restoring an instance that had Alation Analytics V2 installed on a separate host</em></p>
<p>With Alation Analytics installed on a remote host, the Alation Analytics V2 components will remain available on the remote host even if the main instance becomes unavailable. After you restore the main instance, you will need to reconnect the Alation Analytics data source on the restored instance and the Alation Analytics database on the remote host and repopulate the data in the database. You do not need to reinstall the Alation Analytics components from scratch.</p>
<a class="reference internal image-reference" href="../../_images/AAV2_15.png"><img alt="../../_images/AAV2_15.png" src="../../_images/AAV2_15.png" style="width: 400px;" /></a>
<p>To reconnect the Alation Analytics V2 data source after you have restored Alation from a backup:</p>
<ol class="arabic simple">
<li><p>SSH to the Alation Analytics V2 host and go to the Alation Analytics V2 installation directory.</p></li>
<li><p>Whitelist the IP of the new Alation host on the Alation Analytics V2 host by running the installer with the <code class="docutils literal notranslate"><span class="pre">-i</span></code> flag. Detailed instructions about whitelisting are available in the Alation Analytics V2 README file that can be found in the Alation Analytics V2 installation directory.</p></li>
<li><p>Log in to the restored instance of the Alation catalog.</p></li>
<li><p>Go to <strong>Admin Settings</strong> &gt; <strong>Alation Analytics</strong> and locate the section <strong>Clear Data</strong>. We recommend reloading the Alation Analytics database after restoring the catalog from a backup to avoid any mismatch that may exist between the backup data and the actual data found in the remote Alation Analytics database.</p></li>
<li><p>Click the <strong>Clear Data</strong> button. This action reconnects the restored Alation catalog and the remote Alation Analytics application and clears all data from the Alation Analytics database. After this action, the Alation Analytics V2 ETL process will reload the database from scratch. The ETL does not start immediately after this action and will be performed based on the current ETL schedule.</p></li>
<li><p>To additionally validate the connection between the Alation Analytics data source after the restore and the remote Alation Analytics V2 database, open the settings page of the Alation Analytics V2 data source. Then under <strong>Test Connection</strong>, click <strong>Test</strong> to confirm connectivity to the database.</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="ClearDataFromAlationAnalyticsV2.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Clear the Data from the Alation Analytics V2 Database
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="RemoveAlationAnalyticsV2Source.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Remove Alation Analytics V2 Data Source From the Catalog
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/AlationAnalyticsV2/BackupAndRestoreAlationAnalyticsV2&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Alation Analytics V2 Backup and Restore</a><ul>
<li><a class="reference internal" href="#back-up">Back Up</a></li>
<li><a class="reference internal" href="#restore-a-backup">Restore a Backup</a></li>
<li><a class="reference internal" href="#clear-and-repopulate">Clear and Repopulate</a><ul>
<li><a class="reference internal" href="#restore-a-same-host-installation">Restore a Same-Host Installation</a></li>
<li><a class="reference internal" href="#restore-a-remote-host-installation">Restore a Remote-Host Installation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->