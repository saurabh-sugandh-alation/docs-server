
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Enable and Install Alation Analytics V2 &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Alation Analytics V2" href="index.html"/>
        <link rel="next" title="User Access to Alation Analytics V2" href="AccessToAlationAnalyticsV2.html"/>
        <link rel="prev" title="Transition from Alation Analytics V1 to Alation Analytics V2" href="TransitionV1ToV2.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Alation Analytics V2</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="TransitionV1ToV2.html">Transition from Alation Analytics V1 to Alation Analytics V2</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Enable and Install Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AccessToAlationAnalyticsV2.html">User Access to Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Connect3rdPartyBIToolsToAAV2.html">Connect Third-Party BI Tools to Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2ServerArchitecture.html">Alation Analytics V2 Server Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateAlationAnalyticsV2.html">Update Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2ETL.html">Alation Analytics V2 ETL</a></li>
<li class="toctree-l2"><a class="reference internal" href="MaintainAlationAnalyticsV2.html">Maintain Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="ClearDataFromAlationAnalyticsV2.html">Clear the Data from the Alation Analytics V2 Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="BackupAndRestoreAlationAnalyticsV2.html">Alation Analytics V2 Backup and Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="RemoveAlationAnalyticsV2Source.html">Remove Alation Analytics V2 Data Source From the Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="UninstallAlationAnalyticsV2.html">Uninstall Alation Analytics V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="RemoveAlationAnalyticsV1Source.html">Remove Alation Analytics V1 Data Source From the Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2DatabaseModel.html">Alation Analytics V2 Database Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="EmbedExternalVisualizations.html">Embed External Visualizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2Dashboard.html">Alation Analytics V2 Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAnalyticsV2TopContributors.html">Alation Analytics Top Contributors Report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Alation Analytics V2</a>
    <span class="separator">&gt;</span>
    <span>Enable and Install Alation Analytics V2</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="enable-and-install-alation-analytics-v2">
<h1>Enable and Install Alation Analytics V2<a class="headerlink" href="#enable-and-install-alation-analytics-v2" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p><em>Available from version 2020.3</em></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Enabling Alation Analytics V2 on the Alation instances where Alation Analytics V1 has never been used before differs from enabling it on the Alation instances where Alation Analytics V1 is in use.</p>
<p>If Alation Analytics V1 has been previously enabled on your instance, the Alation Analytics V2 functionality is not available by default. To transition from V1 to V2, refer to the guidelines in <a class="reference internal" href="TransitionV1ToV2.html"><span class="doc">Transition from Alation Analytics V1 to Alation Analytics V2</span></a> on how to enable V2 and/or maintain both versions.</p>
<p>On the Alation instances where Alation Analytics has never been used before, you can enable V2 from the Alation user interface. In <strong>Admin Settings &gt; Labs</strong> (<em>versions 2021.4 or earlier</em>) or <strong>Admin Settings &gt; Feature Configuration</strong> (<em>versions 2021.1 and newer</em>), locate the feature switch <strong>Alation Analytics V2 - Understand the Alation usage patterns at your organization</strong>. Use the switch to enable the Alation Analytics application and proceed to installation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We recommend that Alation Analytics V2 be installed on a Friday so that the initial ETL process can run over the weekend. The time of the ETL process depends on the amount of data in the internal application database. The initial ETL extracts the first six months of the catalog usage data and takes longer than subsequent ETL jobs.</p>
</div>
<p>There are 2 installation options for Alation Analytics V2:</p>
<ul>
<li><p><strong>Installation on a separate server</strong> — Recommended by Alation for both standalone instances and instances that use the HA pair.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>For instances using HA pair configuration, it is strongly recommended to install Alation Analytics V2 on a separate server. We recommend this option for HA to ensure that the Alation Analytics V2 components remain operational and the ETL continues to work if the primary server fails over to the secondary server. You won’t need to reinstall the Alation Analytics components after the failover.</p>
</div>
</div></blockquote>
</li>
<li><p><strong>Installation on the same server with the Alation catalog</strong> — You can choose this option if your host server is large enough to accommodate both the Alation application and Alation Analytics V2 and the server resources and performance are not a concern. Please note that both the internal server database and the Alation Analytics database grow over time. The host server should be able to support this growth.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installation on the same server is not recommended for the HA pair. Alation Analytics is installed in addition to the Alation application and does not get replicated from the primary to the secondary server. In case of a failover, Alation Analytics will not be available on the secondary server and will need to be installed.</p>
</div>
</div></blockquote>
</li>
</ul>
<p>Follow the steps below to install Alation Analytics V2.</p>
</section>
<section id="step-1-prepare-the-host">
<span id="prepare-the-host"></span><h2>Step 1: Prepare the Host<a class="headerlink" href="#step-1-prepare-the-host" title="Permalink to this headline">¶</a></h2>
<p>Use these requirements to either prepare a separate machine or evaluate and prepare an existing Alation catalog host.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Requirement</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OS</p></td>
<td><ul class="simple">
<li><p>Linux with kernel version 3.10 or higher</p></li>
<li><p>OS distributions supported by Alation:
<a class="reference internal" href="../ServerInstallation/SystemRequirements.html#system-requirments-os-requirements"><span class="std std-ref">OS Requirements</span></a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>CPU</p></td>
<td><p>4 cores</p></td>
</tr>
<tr class="row-even"><td><p>Memory</p></td>
<td><ul class="simple">
<li><p>16 Gb RAM minimum if installing on a separate server</p></li>
<li><p>32 Gb minimum if installing AA on the same host with the
Alation catalog</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Space for
<strong>/var/lib/docker</strong></p></td>
<td><p>Allocate a minimum of 32 GB disk space to the directory
<strong>/var/lib/docker</strong></p></td>
</tr>
<tr class="row-even"><td><p>Space for
the installation
directory</p></td>
<td><p>Allocate enough disk space for the installation
directory. Recommended is 1.5-2 times the size of Rosemeta
(Alation’s internal Postgres database)
as this is almost its replica. The minimum is 32 GB.
See <a class="reference internal" href="#check-the-alation-application-database-size">Check the Alation Application Database Size</a>
about how to find out the size of Rosemeta.</p>
<p>Location of installation directory:</p>
<ul class="simple">
<li><p><strong>Release 2020.4 and later</strong>—Alation Analytics V2 can be
installed into a custom directory
specified during installation.</p></li>
<li><p><strong>Release 2020.3</strong>—Installation directory
<strong>/opt/alation-analytics</strong> has to be
created for the Alation Analytics V2 installer.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<section id="check-the-alation-application-database-size">
<h3>Check the Alation Application Database Size<a class="headerlink" href="#check-the-alation-application-database-size" title="Permalink to this headline">¶</a></h3>
<p>To calculate disk usage for your Rosemeta database, use the following command on the Alation host server <strong>from inside the Alation shell</strong> (requires SUDO permissions). Depending on your PostgreSQL version:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>du<span class="w"> </span>-sh<span class="w"> </span>/var/lib/pgsql/9.3/
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>du<span class="w"> </span>-sh<span class="w"> </span>/var/lib/pgsql/9.6/
</pre></div>
</div>
<p>Make sure you have <strong>1.5-2</strong> times more free disk space (in GB) before you enable Alation Analytics V2.</p>
</section>
</section>
<section id="step-2-install-docker-engine">
<h2>Step 2: Install Docker Engine<a class="headerlink" href="#step-2-install-docker-engine" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Other containerization software, such as Kubernetes, Openshift, or Podman, is not currently supported. Alation Analytics V2 can only be installed on Docker (v. 18 or later).</p>
</div>
<p>The way you install Docker Engine depends on your Alation version.</p>
<section id="releases-2022-4-and-newer">
<h3>Releases 2022.4 and Newer<a class="headerlink" href="#releases-2022-4-and-newer" title="Permalink to this headline">¶</a></h3>
<p>In these releases, there are two ways to install Docker Engine:</p>
<ul>
<li><p>Use Alation Container Service to install Docker with the root user. See <a class="reference internal" href="../AlationContainerService/InstallDockerUsingAlationContainerService.html"><span class="doc">Install Docker Using Alation Container Service</span></a>.</p></li>
<li><p>If you have additional security requirements, you can install Docker in rootless mode. This is supported on the following operating systems:</p>
<ul class="simple">
<li><p>Debian 10</p></li>
<li><p>Fedora 33, 34</p></li>
<li><p>Oracle Linux on Red Hat-compatible Kernel 8, 8.5</p></li>
<li><p>Redhat 8</p></li>
<li><p>Ubuntu 18</p></li>
</ul>
<p>Follow <a class="reference external" href="https://docs.docker.com/engine/security/rootless/">Docker’s official instructions</a> for installing in rootless mode. To complete the use of rootless mode, you will need to follow additional steps that are provided below. Installing rootless Docker will also require a system reboot.</p>
</li>
</ul>
</section>
<section id="releases-2021-2-to-2022-3">
<h3>Releases 2021.2 to 2022.3<a class="headerlink" href="#releases-2021-2-to-2022-3" title="Permalink to this headline">¶</a></h3>
<p>Use Alation Container Service to install Docker: <a class="reference internal" href="../AlationContainerService/InstallDockerUsingAlationContainerService.html"><span class="doc">Install Docker Using Alation Container Service</span></a>.</p>
</section>
<section id="releases-2020-3-x-2021-1-x">
<h3>Releases 2020.3.x - 2021.1.x<a class="headerlink" href="#releases-2020-3-x-2021-1-x" title="Permalink to this headline">¶</a></h3>
<p>Docker Engine is available for a variety of Linux platforms. Install Docker in your preferred way.</p>
<p>General recommendations: <a class="reference internal" href="../../sources/OpenConnectorFramework/InstallDocker2020_3_To_2021_1.html"><span class="doc">Install Docker for Alation Versions 2020.3.x - 2021.1.x</span></a></p>
<p>Examples of instructions per OS:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/centos/">CentOS</a></p></li>
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">Ubuntu</a></p></li>
<li><p><a class="reference external" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html-single/getting_started_with_containers/index#getting_docker_in_rhel_7">RHEL</a></p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="step-3-install-docker-compose">
<h2>Step 3: Install Docker Compose<a class="headerlink" href="#step-3-install-docker-compose" title="Permalink to this headline">¶</a></h2>
<p>Docker Compose relies on Docker Engine to work. Install it after you have installed Docker Engine.</p>
<p>Use either of the following methods to install Docker Compose. The second method requires pip to be installed on the server.</p>
<section id="method-1">
<h3>Method 1<a class="headerlink" href="#method-1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>curl<span class="w"> </span>-SL<span class="w"> </span><span class="s2">&quot;https://github.com/docker/compose/releases/download/1.27.0/docker-compose-</span><span class="k">$(</span>uname<span class="w"> </span>-s<span class="k">)</span><span class="s2">-</span><span class="k">$(</span>uname<span class="w"> </span>-m<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span>/usr/local/bin/docker-compose
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>/usr/local/bin/docker-compose
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ln<span class="w"> </span>-sf<span class="w"> </span>/usr/local/bin/docker-compose<span class="w"> </span>/usr/bin/docker-compose
</pre></div>
</div>
</section>
<section id="method-2">
<h3>Method 2<a class="headerlink" href="#method-2" title="Permalink to this headline">¶</a></h3>
<p>To install the latest version of Docker Compose (requires <strong>pip</strong> to be installed):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>docker-compose
</pre></div>
</div>
</section>
</section>
<section id="step-4-check-the-docker-daemon">
<h2>Step 4: Check the Docker Daemon<a class="headerlink" href="#step-4-check-the-docker-daemon" title="Permalink to this headline">¶</a></h2>
<p>After Docker Engine has been installed, the Docker daemon should start automatically. Check to make sure it has started.</p>
<p>For regular root installations of Docker:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>version
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>docker
</pre></div>
</div>
<p>For rootless Docker installations:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>version
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span>status<span class="w"> </span>docker
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">q</span></code> to exit from the <code class="docutils literal notranslate"><span class="pre">systemctl</span></code> command.</p>
</div>
<section id="start-docker-daemon-in-rootless-mode">
<h3>Start Docker Daemon in Rootless Mode<a class="headerlink" href="#start-docker-daemon-in-rootless-mode" title="Permalink to this headline">¶</a></h3>
<p>If you have installed Docker in rootless mode and the daemon is not running, run the following command to start it a single time:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span>start<span class="w"> </span>docker
</pre></div>
</div>
<p>Run the following commands to automatically start the rootless Docker daemon whenever the system reboots. This is recommended since you will need to reboot the system as part of the setup later on.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>loginctl<span class="w"> </span>enable-linger<span class="w"> </span><span class="k">$(</span>whoami<span class="k">)</span>
</pre></div>
</div>
</section>
</section>
<section id="step-5-set-up-rootless-docker">
<h2>Step 5: Set Up Rootless Docker<a class="headerlink" href="#step-5-set-up-rootless-docker" title="Permalink to this headline">¶</a></h2>
<p>If you installed Docker in rootless mode, you must follow the steps below before installing Alation Analytics. If you installed Docker as root, you can skip to <a class="reference internal" href="#open-ports"><span class="std std-ref">Step 6: Open Ports</span></a>.</p>
<section id="enable-source-ip-propagation">
<h3>Enable Source IP Propagation<a class="headerlink" href="#enable-source-ip-propagation" title="Permalink to this headline">¶</a></h3>
<p>By default, Docker in rootless mode doesn’t propagate source IP addresses from requests to containers. Preserving the source IP address is necessary to make the IP whitelisting feature work in Alation Analytics. As the non-root user that installed rootless Docker, run the following commands to update the port driver for rootless mode and enable source IP propagation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~/bin
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-o<span class="w"> </span>slirp4netns<span class="w"> </span>--fail<span class="w"> </span>-L<span class="w"> </span>https://github.com/rootless-containers/slirp4netns/releases/download/v1.2.0/slirp4netns-<span class="k">$(</span>uname<span class="w"> </span>-m<span class="k">)</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span>+x<span class="w"> </span>slirp4netns
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>~/.config/systemd/user/docker.service.d/
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>&gt;<span class="w"> </span>~/.config/systemd/user/docker.service.d/override.conf<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">[Service]</span>
<span class="s">Environment=&quot;DOCKERD_ROOTLESS_ROOTLESSKIT_PORT_DRIVER=slirp4netns&quot;</span>
<span class="s">EOF</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span>daemon-reload
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span>restart<span class="w"> </span>docker
</pre></div>
</div>
</section>
<section id="enable-cgroup-v2">
<h3>Enable cgroup v2<a class="headerlink" href="#enable-cgroup-v2" title="Permalink to this headline">¶</a></h3>
<p>Alation Analytics will require all controllers such as <strong>cpu</strong>, <strong>memory</strong>, and <strong>pid</strong> to be delegated to the non-root user you used to install Docker. To do this, the machine must have <strong>cgroup v2</strong> enabled.</p>
<ol class="arabic">
<li><p>First check whether <strong>cgroup v2</strong> is enabled:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>info<span class="w"> </span>--format<span class="w"> </span><span class="s1">&#39;{{.CgroupDriver}}&#39;</span>
</pre></div>
</div>
<p>If this command returns <code class="docutils literal notranslate"><span class="pre">systemd</span></code>, <strong>cgroup v2</strong> is enabled and you can skip down to <a class="reference internal" href="#set-rootless-context-for-root-user">Set Rootless Context for Root User</a>. Otherwise, keep following the steps below to enable <strong>cgroup v2</strong>.</p>
</li>
<li><p>You need to add an argument to <strong>grub</strong>. You can do this in one of two ways:</p>
<ul>
<li><p>If the <strong>grubby</strong> command is available, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>grubby<span class="w"> </span>--update-kernel<span class="o">=</span>ALL<span class="w"> </span>--args<span class="o">=</span><span class="s2">&quot;systemd.unified_cgroup_hierarchy=1&quot;</span>
</pre></div>
</div>
</li>
<li><p>If <strong>grubby</strong> is not available, use a text editor to edit <strong>/etc/default/grub</strong> manually. On the GRUB_CMDLINE_LINUX line, add <code class="docutils literal notranslate"><span class="pre">systemd.unified_cgroup_hierarchy=1</span></code> as an argument inside the quotes. Then run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>update-grub
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>You now need to change the <strong>systemd</strong> configuration. The commands for this depend on what Linux platform you’re running.</p>
<ul>
<li><p>On any platform <em>except</em> Oracle, run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/systemd/system/user@.service.d
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee /etc/systemd/system/user@.service.d/delegate.conf</span>
<span class="s">[Service]</span>
<span class="s">Delegate=cpu cpuset io memory pids</span>
<span class="s">EOF</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
</pre></div>
</div>
</li>
<li><p>On Oracle Linux platforms, run the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/systemd/system/user@.service.d
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee /etc/systemd/system/user@.service.d/delegate.conf</span>
<span class="s">[Service]</span>
<span class="s">Delegate=yes</span>
<span class="s">DelegateControllers=cpu cpuset io memory pids</span>
<span class="s">EOF</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span><span class="s">&lt;&lt;EOF | sudo tee /etc/systemd/system/user-$(id -u).slice</span>
<span class="s">[Unit]</span>
<span class="s">Description=Fix cgroup controllers</span>
<span class="s">After=user.slice</span>
<span class="s">Requires=user.slice</span>
<span class="s">Before=systemd-logind.service</span>
<span class="s">[Install]</span>
<span class="s">WantedBy=multi-user.target</span>
<span class="s">EOF</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>user-<span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>.slice
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Reboot the system.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>reboot
</pre></div>
</div>
</li>
<li><p>If you haven’t configured the Docker daemon to restart automatically after a reboot, restart it manually now.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl<span class="w"> </span>--user<span class="w"> </span>start<span class="w"> </span>docker
</pre></div>
</div>
</li>
</ol>
</section>
<section id="set-rootless-context-for-root-user">
<h3>Set Rootless Context for Root User<a class="headerlink" href="#set-rootless-context-for-root-user" title="Permalink to this headline">¶</a></h3>
<p>The Alation Analytics v2 installer runs as the root user, so you need to let the root user know that Docker is in rootless mode. Do this by setting the Docker context with the following commands:</p>
<ol class="arabic">
<li><p>Change to the root user:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>su
</pre></div>
</div>
</li>
<li><p>Export the path of the rootless Docker binaries. Replace <strong>&lt;username&gt;</strong> with the username of the user that installed rootless Docker.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/home/&lt;username&gt;/bin:<span class="nv">$PATH</span>
</pre></div>
</div>
</li>
<li><p><em>(Optional)</em> Copy the export to files like <strong>~/.bashrc</strong> for making it permanent.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;export PATH=/home/&lt;username&gt;/bin:$PATH&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/root/.bashrc
</pre></div>
</div>
</li>
<li><p>Remove the DOCKER_HOST environment if set, so the context setting will work.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">unset</span><span class="w"> </span>DOCKER_HOST
</pre></div>
</div>
</li>
<li><p>Get the numeric ID of the non-root user that installed rootless Docker. You’ll need it in the next step. Replace <strong>&lt;non-root-username&gt;</strong> with the username of the user that installed rootless Docker.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>id<span class="w"> </span>-u<span class="w"> </span>&lt;non-root-username&gt;
</pre></div>
</div>
</li>
<li><p>Create the rootless context for the root user to access the rootless Docker daemon. Replace <strong>&lt;non-root-user-id&gt;</strong> with the numeric ID of the non-root user that installed rootless Docker.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>context<span class="w"> </span>create<span class="w"> </span>rootless<span class="w"> </span>--docker<span class="w"> </span><span class="nv">host</span><span class="o">=</span>unix:///run/user/&lt;non-root-userid&gt;/docker.sock
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>context<span class="w"> </span>use<span class="w"> </span>rootless
</pre></div>
</div>
</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>After setting up rootless Docker, all remaining installation commands must be run as root, without sudo.</p>
</div>
</section>
</section>
<section id="step-6-open-ports">
<span id="open-ports"></span><h2>Step 6: Open Ports<a class="headerlink" href="#step-6-open-ports" title="Permalink to this headline">¶</a></h2>
<p>This applies only if installing <strong>on a separate server</strong>.</p>
<p>On the host server, open ports <strong>25432</strong> and <strong>5672</strong> in your firewall for the message broker and PostgreSQL and whitelist the IP of the main Alation server running the catalog on this host. It is recommended to only allow access for the IP of the machine that hosts the Alation catalog and block all other IPs.</p>
</section>
<section id="step-7-create-an-installation-directory">
<h2>Step 7: Create an Installation Directory<a class="headerlink" href="#step-7-create-an-installation-directory" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that at least 32 GB of free space is available on the host for the Alation Analytics installation directory.</p>
</div>
<section id="release-2020-4-and-later">
<h3>Release 2020.4 and Later<a class="headerlink" href="#release-2020-4-and-later" title="Permalink to this headline">¶</a></h3>
<p>From release 2020.4, installation is not tied to the directory <strong>/opt/alation-analytics</strong> and can be anywhere on the host. You can skip this step as the installation directory can be created automatically during installation.</p>
<p>Alternatively, you can create a custom installation directory on the host beforehand. Note down the path as you will need to specify it during installation.</p>
<p>If no custom installation directory is specified during installation, Alation will attempt to locate the directory <strong>opt/alation-analytics</strong> on the host and install into it. If such a directory does not exist, installation cannot proceed until the path is specified.</p>
</section>
<section id="release-2020-3">
<h3>Release 2020.3<a class="headerlink" href="#release-2020-3" title="Permalink to this headline">¶</a></h3>
<p>On the server where you are going to install Alation Analytics V2, create a new directory at <strong>/opt</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/alation-analytics
</pre></div>
</div>
</section>
</section>
<section id="step-8-install-alation-analytics">
<h2>Step 8: Install Alation Analytics<a class="headerlink" href="#step-8-install-alation-analytics" title="Permalink to this headline">¶</a></h2>
<p>This requires the role of a Server Admin.</p>
<ol class="arabic">
<li><p>In your browser, sign in to the Alation catalog and go to Admin Settings &gt; <strong>Feature Configuration</strong> (from version 2021.1) or <strong>Labs</strong> (versions before 2021.1).</p></li>
<li><p>Locate the switch for Alation Analytics V2, toggle it on, and save the changes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If Alation Analytics V1 has previously been enabled on your instance, the Alation Analytics V2 switch will not be available by default.</p>
</div>
</li>
<li><p>After you save the changes, the <strong>Alation Analytics Settings</strong> page will open. This page contains a summary of the installation steps along with some important links. Keep the page open so you can use the links later. There is no need to use the README file. Proceed with step 4 below.</p></li>
<li><p>Download the Alation Analytics V2 installation package (373 MB) using one of the following options:</p>
<ul class="simple">
<li><p>To download to your local machine, click <strong>Download AA</strong>. This is the only option in 2020.3.</p></li>
<li><p>To download with a curl command, copy the provided command and run it on the Alation Analytics host machine. This option is available in 2020.4 and later.</p></li>
</ul>
</li>
<li><p>Copy or move the downloaded package to the Alation Analytics V2 host directory that you have prepared:</p>
<ul class="simple">
<li><p>In 2020.4 and newer, the installation package can go in any custom directory on the host machine, for example <strong>/tmp</strong>.</p></li>
<li><p>In 2020.3, the installation package must be moved to the directory <strong>/opt/alation-analytics</strong> on the host machine.</p></li>
</ul>
</li>
<li><p>Un-tar the downloaded Alation Analytics file and navigate into the un-tarred folder. Locate the installer file. It’s an executable binary file with the same name as the tar file.</p></li>
<li><p>Determine whether you need to use one of the available installation flags:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 6%" />
<col style="width: 94%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Flag</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-w</span></code></p></td>
<td><p><em>Available in 2021.3 and newer</em></p>
<p>Lets you specify which system user will own the installed files, configs, and logs.</p>
<p>Without this flag, ownership will be assigned to the root user.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-b</span></code></p></td>
<td><p><em>Available in 2023.1.4 and newer</em></p>
<p>Traffic to the Postgres and RabbitMQ containers will be bound to a specific IP address. The address will be stored in
<strong>/etc/default/alation-analytics.env</strong> and set in <strong>docker-compose.yaml</strong> during installation.</p>
<p>This flag enables Alation Analytics to be compliant with CIS Benchmark standards for Docker.</p>
<p>Without this flag, the Postgres and RabbitMQ containers are exposed on all network interfaces (0.0.0.0) in the host.</p>
</td>
</tr>
</tbody>
</table>
</li>
<li><p>Run the installer as the root user (if you’ve installed rootless Docker) or using sudo.</p>
<p>Example with no flags (replace <code class="docutils literal notranslate"><span class="pre">x.x.x.x</span></code> with the version number in your tar and installer files):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span><span class="o">{</span>untar_directory<span class="o">}</span>/alation-analytics-x.x.x.x/alation-analytics-installer-v-x.x.x
</pre></div>
</div>
<p><em>Applies to version 2021.3 and newer:</em> Example with the <code class="docutils literal notranslate"><span class="pre">-w</span></code> flag (replace <code class="docutils literal notranslate"><span class="pre">&lt;username&gt;</span></code> with the user who will own the Alation Analytics installed files):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span><span class="o">{</span>untar_directory<span class="o">}</span>/alation-analytics-x.x.x.x/alation-analytics-installer-v-x.x.x<span class="w"> </span>-w<span class="w"> </span>&lt;username&gt;
</pre></div>
</div>
<p><em>Applies to version 2023.1.4 and newer:</em> Example with the <code class="docutils literal notranslate"><span class="pre">-b</span></code> flag (replace <code class="docutils literal notranslate"><span class="pre">&lt;aa_ip_address&gt;</span></code> with the IP address to bind incoming traffic to):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span><span class="o">{</span>untar_directory<span class="o">}</span>/alation-analytics-x.x.x.x/alation-analytics-installer-v-x.x.x<span class="w"> </span>-b<span class="w"> </span>&lt;aa_ip_address&gt;
</pre></div>
</div>
</li>
<li><p>The installer will ask where to install Alation Analytics. The directory you choose will contain the data mounts for the Docker images. Enter the absolute path to the chosen directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">=================================================================</span>
***<span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>by<span class="w"> </span>pressing<span class="w"> </span>Ctrl+C<span class="w"> </span>at<span class="w"> </span>any<span class="w"> </span><span class="nb">time</span><span class="w"> </span>***
Please<span class="w"> </span>enter<span class="w"> </span>where<span class="w"> </span>you<span class="w"> </span>would<span class="w"> </span>like<span class="w"> </span>to<span class="w"> </span>install<span class="w"> </span>Alation<span class="w"> </span>Analytics
leave<span class="w"> </span>blank<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span>default<span class="w"> </span>location<span class="w"> </span><span class="o">(</span>/opt/alation-analytics/<span class="o">)</span>
<span class="o">=================================================================</span>
</pre></div>
</div>
</li>
<li><p>The installer will ask if you want to enter your own password or use a strong auto-generated password for Alation Analytics. Save this password in a secure place. You will need it in a later step.</p>
<ul>
<li><p>Enter 1 to specify your own password. You will need to enter the password two times. The password you choose must meet the following requirements:</p>
<ul>
<li><p>Minimum of 9 characters</p></li>
<li><p>Maximum of 24 characters</p></li>
<li><p>At least 2 lowercase letters</p></li>
<li><p>At least 2 uppercase letters</p></li>
<li><p>At least 2 numerals</p></li>
<li><p>At least 2 special characters from: ! &#64; # % ^ * _</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p># and _ are not allowed as the first character.</p>
</div>
</li>
</ul>
</li>
<li><p>Enter 2 to use an auto-generated password. The generated password will be printed to the console.</p></li>
</ul>
</li>
<li><p>The installer will check all prerequisites and, if they are met, install Alation Analytics.</p></li>
<li><p>In 2023.3.2 and later, a password will be generated for the RabbitMQ component during installation. You’ll see a message like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Use<span class="w"> </span>the<span class="w"> </span>following<span class="w"> </span>generated<span class="w"> </span>password<span class="w"> </span>to<span class="w"> </span>establish<span class="w"> </span>external<span class="w"> </span>connections<span class="w"> </span>to<span class="w"> </span>rabbitmq:
&lt;your-rabbitmq-pasword&gt;
</pre></div>
</div>
<p>Save this password in a secure place. You will need it in a later step.</p>
</li>
<li><p>The installer will ask where Alation itself is installed. This will allow traffic from Alation to Alation Analytics.</p>
<ul class="simple">
<li><p>Enter 1 if Alation and Alation Analytics are installed on the same host.</p></li>
<li><p>Enter 2 to specify the IP address of the Alation host, then enter the IP address.</p></li>
<li><p>Enter 3 to specify the fully-qualified domain name (FQDN) of the Alation host, then enter the FQDN.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">=============================================================================================</span>
***<span class="w"> </span>You<span class="w"> </span>can<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>by<span class="w"> </span>pressing<span class="w"> </span>Ctrl+C<span class="w"> </span>at<span class="w"> </span>any<span class="w"> </span><span class="nb">time</span><span class="w"> </span>***
Please<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>IP<span class="w"> </span>or<span class="w"> </span>FQDN<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>host<span class="w"> </span>which<span class="w"> </span>Alation<span class="w"> </span>Catalog<span class="w"> </span>is<span class="w"> </span>installed<span class="w"> </span>on.
This<span class="w"> </span>will<span class="w"> </span>whitelist<span class="w"> </span>Alation<span class="w"> </span>server<span class="w"> </span>and<span class="w"> </span>allow<span class="w"> </span>access<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>Alation<span class="w"> </span>Analytics<span class="w"> </span>database
Choose<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>Alation<span class="w"> </span>Analytics<span class="w"> </span>and<span class="w"> </span>Alation<span class="w"> </span>are<span class="w"> </span>going<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>installed<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>same<span class="w"> </span>host.<span class="w"> </span><span class="o">(</span><span class="m">127</span>.0.0.1<span class="o">)</span>
Choose<span class="w"> </span><span class="m">2</span><span class="w"> </span>to<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>IP<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>Alation<span class="w"> </span>host<span class="w"> </span>manually.<span class="w"> </span>ex:<span class="w"> </span><span class="m">10</span>.10.10.1
Choose<span class="w"> </span><span class="m">3</span><span class="w"> </span>to<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>FQDN<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>Alation<span class="w"> </span>host<span class="w"> </span>manually.<span class="w"> </span>ex:<span class="w"> </span>alation.example.com
<span class="m">1</span>.<span class="w"> </span>Use<span class="w"> </span>localhost<span class="w"> </span><span class="o">(</span><span class="m">127</span>.0.0.1<span class="o">)</span><span class="w"> </span>as<span class="w"> </span>Alation<span class="w"> </span>Data<span class="w"> </span>Catalog<span class="w"> </span>IP.
<span class="m">2</span>.<span class="w"> </span>Enter<span class="w"> </span>IP<span class="w"> </span>manually
<span class="m">3</span>.<span class="w"> </span>Enter<span class="w"> </span>FQDN<span class="w"> </span><span class="nv">manually</span>
<span class="o">=============================================================================================</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The installation logs can be found at <strong>/var/log/alation-analytics/installer.log</strong> (path inside the Alation shell).</p>
</div>
</section>
<section id="step-9-configure-alation-analytics">
<h2>Step 9: Configure Alation Analytics<a class="headerlink" href="#step-9-configure-alation-analytics" title="Permalink to this headline">¶</a></h2>
<p>After the installation, configure and initialize the Alation Analytics V2 database.</p>
<ol class="arabic">
<li><p>Return to the <strong>Alation Analytics Settings</strong> page and click the link <strong>click here to view conf values and change postgres password</strong>. This opens the <strong>Alation Analytics Conf Values</strong> dialog:</p>
<img alt="../../_images/AAV2_03.png" class="with-border" src="../../_images/AAV2_03.png" />
</li>
<li><p>Specify the values and click <strong>Save</strong>:</p>
<ul>
<li><p><strong>Rabbitmq Host</strong> and <strong>Pgsql DB Host</strong>: IP address of the Alation Analytics server. The default value is <strong>127.0.0.1</strong> which stands for <code class="docutils literal notranslate"><span class="pre">localhost</span></code>. If you have installed Alation Analytics on the same server with the Alation application, leave the default value. If you installed on a separate server, enter the IP of the remote host.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you used the <code class="docutils literal notranslate"><span class="pre">-b</span></code> flag to bind Postgres and RabbitMQ traffic to a specific host during installation, enter the same address you specified during installation.</p>
</div>
</div></blockquote>
</li>
<li><p><strong>Pgsql DB Password</strong>: type the password you created during the installation for the PostgreSQL database.</p></li>
</ul>
</li>
<li><p>Use SSH to connect to the Alation server.</p></li>
<li><p>Enter the Alation shell.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</li>
<li><p>In 2023.3.2 and later, set the password for RabbitMQ using the password that was generated during the installation of Alation Analytics:</p>
<blockquote>
<div><ol class="loweralpha">
<li><p>Change to the <code class="docutils literal notranslate"><span class="pre">alation</span></code> user.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>su<span class="w"> </span>alation
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Set the value in <strong>alation_conf</strong>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation_analytics-v2.rmq.config.password<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;&lt;your-rabbitmq-pasword&gt;&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Exit the <code class="docutils literal notranslate"><span class="pre">alation</span></code> user.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</li>
<li><p>Restart the Alation web services:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_supervisor<span class="w"> </span>restart<span class="w"> </span>web:*<span class="w"> </span>celery:*
</pre></div>
</div>
</li>
<li><p>If you plan to restore the Alation Analytics database from a backup, go to <a class="reference internal" href="BackupAndRestoreAlationAnalyticsV2.html#aav2-restore-a-backup"><span class="std std-ref">Restore a Backup</span></a> (don’t click the <strong>Initialize Analytics Database</strong> button in Alation).</p>
<p>If you’re starting from scratch, <em>wait 5 minutes</em> for Alation Analytics to fully start up. Then return to the <strong>Alation Analytics Settings</strong> page and initialize the Alation Analytics database by clicking the <strong>Initiate Analytics Database</strong> button. This kicks off a job to create the database schema. While the job is running, you can click the <strong>Refresh</strong> button to see its current status. After the job has run, the Alation Analytics V2 database becomes available as a <em>data source</em> in Alation.</p>
<img alt="../../_images/AAV2_23.png" src="../../_images/AAV2_23.png" />
</li>
</ol>
</section>
<section id="after-installation">
<h2>After Installation<a class="headerlink" href="#after-installation" title="Permalink to this headline">¶</a></h2>
<p>After the database has been initialized, the very first ETL is triggered automatically to load the the data from the internal database. After the initial ETL, the next one will run automatically at night (default configuration) or can be triggered manually using a one-off script. Metadata extraction for Alation Analytics V2 runs automatically after every ETL.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>For users to be able to view, query or manage the Alation Analytics V2 data source, they must be granted access. See <a class="reference internal" href="AccessToAlationAnalyticsV2.html"><span class="doc">User Access to Alation Analytics V2</span></a>.</p>
</div>
<p>The Alation Analytics V2 data source that becomes available in Alation comes with a prepackaged data dictionary with table and column descriptions, a number of sample queries linked to the <strong>Description</strong> field of the schema <strong>Public</strong> and a number of out-of-the-box articles referenced under the <strong>Relevant Articles</strong> for schema <strong>Public</strong> (grouped under the parent article <strong>Introduction to Alation Analytics</strong>). Review these materials to familiarize yourself with the structure of the Alation Analytics V2 data source:</p>
<img alt="../../_images/AAV2_16.png" src="../../_images/AAV2_16.png" />
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="TransitionV1ToV2.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Transition from Alation Analytics V1 to Alation Analytics V2
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="AccessToAlationAnalyticsV2.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />User Access to Alation Analytics V2
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/AlationAnalyticsV2/EnableAlationAnalyticsV2&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Enable and Install Alation Analytics V2</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#step-1-prepare-the-host">Step 1: Prepare the Host</a><ul>
<li><a class="reference internal" href="#check-the-alation-application-database-size">Check the Alation Application Database Size</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-2-install-docker-engine">Step 2: Install Docker Engine</a><ul>
<li><a class="reference internal" href="#releases-2022-4-and-newer">Releases 2022.4 and Newer</a></li>
<li><a class="reference internal" href="#releases-2021-2-to-2022-3">Releases 2021.2 to 2022.3</a></li>
<li><a class="reference internal" href="#releases-2020-3-x-2021-1-x">Releases 2020.3.x - 2021.1.x</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-3-install-docker-compose">Step 3: Install Docker Compose</a><ul>
<li><a class="reference internal" href="#method-1">Method 1</a></li>
<li><a class="reference internal" href="#method-2">Method 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-4-check-the-docker-daemon">Step 4: Check the Docker Daemon</a><ul>
<li><a class="reference internal" href="#start-docker-daemon-in-rootless-mode">Start Docker Daemon in Rootless Mode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-5-set-up-rootless-docker">Step 5: Set Up Rootless Docker</a><ul>
<li><a class="reference internal" href="#enable-source-ip-propagation">Enable Source IP Propagation</a></li>
<li><a class="reference internal" href="#enable-cgroup-v2">Enable cgroup v2</a></li>
<li><a class="reference internal" href="#set-rootless-context-for-root-user">Set Rootless Context for Root User</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-6-open-ports">Step 6: Open Ports</a></li>
<li><a class="reference internal" href="#step-7-create-an-installation-directory">Step 7: Create an Installation Directory</a><ul>
<li><a class="reference internal" href="#release-2020-4-and-later">Release 2020.4 and Later</a></li>
<li><a class="reference internal" href="#release-2020-3">Release 2020.3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-8-install-alation-analytics">Step 8: Install Alation Analytics</a></li>
<li><a class="reference internal" href="#step-9-configure-alation-analytics">Step 9: Configure Alation Analytics</a></li>
<li><a class="reference internal" href="#after-installation">After Installation</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->