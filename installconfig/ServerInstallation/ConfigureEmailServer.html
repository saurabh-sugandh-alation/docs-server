
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Email Server Configuration &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Install Alation" href="index.html"/>
        <link rel="next" title="HTTPS" href="HTTPS.html"/>
        <link rel="prev" title="Configure Authentication with OpenID Connect" href="UserAuthenticationOIDC.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/QuickStart/index.html">Quick Start Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Install Alation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="PrepforInstallation.html">Preparing for Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemRequirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="NetworkRequirements.html">Network Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="InstallationReadiness.html">Installation Readiness</a></li>
<li class="toctree-l2"><a class="reference internal" href="Installation.html">Installation Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationLDAP.html">User Authentication with LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationSAML.html">Configure Authentication with SAML from Alation Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationSAMLUI.html">Configure Authentication with SAML from Admin Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableSCIMIntegration.html">Enable SCIM Integration for User and Group Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="TokenAuthForSCIMSync.html">Managing Token Authentication for SCIM Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSCIMIntegrationInOkta.html">Set Up SCIM Integration in Okta</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSAMLandSCIMIntegrationInPingFederate.html">Set Up SAML and SCIM Integration in PingFederate</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSAMLandSCIMwithAAD.html">Set Up SAML and SCIM Integration in Azure AD</a></li>
<li class="toctree-l2"><a class="reference internal" href="TestingSCIMConfiguration.html">Testing SCIM Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ViewSCIMConfiguration.html">View SCIM Configuration in alation_conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="TroubleshootingSCIMConfiguration.html">Troubleshooting SCIM Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationOIDC.html">Configure Authentication with OpenID Connect</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Email Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="HTTPS.html">HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="HighAvailability.html">Installing on High Availability (HA) Pair</a></li>
<li class="toctree-l2"><a class="reference internal" href="SizingGuidelines.html">Sizing Guidelines Detail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureHTTPProxyforWebboundTraffic.html">How to Configure Alation to Use HTTP Proxy for All Web-bound Traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChangeBaseURL.html">How to Change the Base URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateaLicenseFile.html">How to Update a License File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Runbook/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Install Alation</a>
    <span class="separator">&gt;</span>
    <span>Email Server Configuration</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="email-server-configuration">
<h1>Email Server Configuration<a class="headerlink" href="#email-server-configuration" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Alation uses the email server to send notifications to users and to update conversations from responses in the email. Examples of email notifications that Alation sends out include:</p>
<blockquote>
<div><ul class="simple">
<li><p>notifications about the events users subscribe to on their User Profile page</p></li>
<li><p>notifications about the completion of a data export sent to users performing exports</p></li>
<li><p>notifications about the success or failure of scheduled queries sent to query owners</p></li>
<li><p>notifications about the system health and the status of scheduled jobs sent to all Server Admins.</p></li>
</ul>
</div></blockquote>
<p>The email server settings are available on the <strong>Email Server</strong> tab of the <strong>Admin Settings</strong> page. The email server configuration requires the <em>Server Admin</em> role.</p>
<p>Alation recommends setting up the email server during the initial configuration of the Alation Catalog. However, changes to the email server configuration are allowed and can be applied when needed.</p>
<p>The email server can be configured in a number of ways:</p>
<blockquote>
<div><ul>
<li><p><a class="reference internal" href="#setting-up-built-in-smtp-server">Setting Up Built-in SMTP Server</a> (basic authentication with username and password)</p></li>
<li><p><a class="reference internal" href="#setting-up-corporate-smtp-server">Setting Up Corporate SMTP Server</a> (basic authentication with username and password)</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="NetworkRequirements.html#network-requirements-email-server-configuration"><span class="std std-ref">Email Server Configuration Prerequisites</span></a> for information about the network configuration used by the email server.</p>
</div>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#configuring-email-notifications-with-ms-modern-authentication">Configuring Email Notifications with MS Modern Authentication</a> (<em>available from release 2022.1</em>)</p>
<blockquote>
<div><p>Microsoft modern authentication with the email server is available for Microsoft email service accounts, such as Exchange, Outlook online, or Office 365. Alation uses MS Graph APIs to access mailboxes and the OAuth 2.0 client credentials flow to authenticate with Microsoft as the email service provider. You can refer to Microsoft documentation for more details about this authentication flow, for example: <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow">Microsoft identity platform and the OAuth 2.0 client credentials flow</a>.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>After configuring the email server, an admin can configure <strong>Email Interactions</strong> (Reply By Email) to enable users to post to conversations directly in the email. Email interactions can be configured using:</p>
<blockquote>
<div><ul class="simple">
<li><p>An IMAP server: <a class="reference internal" href="#email-interactions-with-basic-authentication">Email Interactions With Basic Authentication</a></p></li>
<li><p>Microsoft modern authentication: <a class="reference internal" href="#email-interactions-with-ms-modern-authentication">Email Interactions With MS Modern Authentication</a> (<em>available from release 2021.2</em>).</p></li>
</ul>
</div></blockquote>
</section>
<section id="setting-up-built-in-smtp-server">
<h2>Setting Up Built-in SMTP Server<a class="headerlink" href="#setting-up-built-in-smtp-server" title="Permalink to this headline">¶</a></h2>
<p>To set up the built-in SMTP server:</p>
<ol class="arabic">
<li><p>Sign in to Alation as a <em>Server Admin</em>.</p></li>
<li><p>In the upper-right corner, click the Settings icon. The <strong>Admin Settings</strong> page will open.</p></li>
<li><p>Click the <strong>Email Server</strong> link to open the email server settings page.</p></li>
<li><p>Under <strong>Email Notifications</strong> &gt; <strong>Basic Auth</strong>, select the <strong>Use Built-in Alation SMTP Server</strong> checkbox.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In releases prior to 2022.1, the <strong>Basic Auth</strong> tab is not present. The <strong>Use Built-in Alation SMTP Server</strong> checkbox is under the <strong>Email Notifications</strong> section.</p>
</div>
</div></blockquote>
</li>
<li><p>Click <strong>Test and Save</strong> to send a test email and save the input information. A successful test means the built-in email server is set up. If it fails, troubleshoot the configuration.</p></li>
</ol>
<section id="troubleshooting-built-in-email-server-configuration">
<h3>Troubleshooting Built-in Email Server Configuration<a class="headerlink" href="#troubleshooting-built-in-email-server-configuration" title="Permalink to this headline">¶</a></h3>
<p>The actions described in this section require SSH access to the Alation server.</p>
<blockquote>
<div><ul>
<li><p>After pressing <strong>Test and Save</strong> in <strong>Admin Settings &gt; Email</strong> you may receive a connection or a timeout error. If that is the case, check if Postfix is up and running inside the Alation shell:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
sudo<span class="w"> </span>service<span class="w"> </span>postfix<span class="w"> </span>start
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>If the connection test is successful but there is no test email in your inbox, review the logs in the <strong>/var/log/maillog</strong> directory on the Alation server (outside of the Alation shell) to identify the problem.</p></li>
<li><p>Run the following command from the Alation shell to debug email delivery, replacing the placeholder email address <em>&lt;replace_email&#64;company.com&gt;</em> with a working email address:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Test e-mail&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sendmail<span class="w"> </span>-f<span class="w"> </span>noreply@alation.com<span class="w"> </span>&lt;replace_email@company.com&gt;
</pre></div>
</div>
</div></blockquote>
<p>If this action succeeds, on the <strong>Email</strong> tab, specify a real working email address as the Sender address instead of the default one and test again.</p>
</li>
</ul>
</div></blockquote>
</section>
<section id="setting-up-connection-to-a-relay-server">
<h3>Setting up Connection to a Relay Server<a class="headerlink" href="#setting-up-connection-to-a-relay-server" title="Permalink to this headline">¶</a></h3>
<p>It is possible to use the built-in SMTP Server in combination with a relay server running outside of the Alation chroot. This option may help avoid potential email blocking by the company’s receiving server when the built-in SMTP server is used.</p>
<p>To connect the built-in SMTP server to a relay server outside of the Alation chroot:</p>
<ol class="arabic">
<li><p>Edit the main configuration file of your SMTP service (for example, Sendmail or Postfix) on the host server to have the <code class="docutils literal notranslate"><span class="pre">relayhost</span></code> variable point to the hostname or IP address of your new relay server.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the SMTP server is Postfix, edit the Postfix configuration file on the OS of the Alation host server: <strong>/etc/postfix/main.cnf</strong>.</p>
</div>
</div></blockquote>
</li>
<li><p>Restart the SMTP service.</p></li>
<li><p>After changing the configuration file, sign in to Alation and go to <strong>Admin Settings &gt; Email Server</strong>.</p></li>
<li><p>Select the <strong>Use Built-in Alation SMTP Server</strong> checkbox.</p></li>
<li><p>Click <strong>Test and Save</strong> to send a test email and save the input information.</p></li>
</ol>
</section>
</section>
<section id="setting-up-corporate-smtp-server">
<h2>Setting Up Corporate SMTP Server<a class="headerlink" href="#setting-up-corporate-smtp-server" title="Permalink to this headline">¶</a></h2>
<p>To configure the use of a corporate email server:</p>
<ol class="arabic">
<li><p>On the corporate SMTP server, create a dedicated email account for Alation with the send privileges. This account will be used in email server configuration on the Alation side.</p></li>
<li><p>Sign in to Alation as a <em>Server Admin</em>.</p></li>
<li><p>Click the <strong>Settings</strong> icon on the upper right of the main toolbar. The <strong>Admin Settings</strong> page will open.</p></li>
<li><p>Click the <strong>Email Server</strong> link to go to the email server configuration settings.</p></li>
<li><p>Under <strong>Email Notifications &gt; Basic Auth</strong>, clear the <strong>Use Built-in Alation SMTP Server</strong> checkbox.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In releases prior to 2022.1, the <strong>Basic Auth</strong> tab is not present. The <strong>Use Built-in Alation SMTP Server</strong> checkbox is under the <strong>Email Notifications</strong> section.</p>
</div>
</div></blockquote>
</li>
<li><p>Enter your corporate SMTP server information:</p></li>
</ol>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 42%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SMTP Server</p></td>
<td><ul class="simple">
<li><p><strong>SMTP Server</strong>: specify
the SMTP server hostname</p></li>
<li><p>TCP port field: specify the TCP
port</p></li>
<li><p><strong>Use TLS</strong>: enable this
setting if TLS is used by the
server</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>SMTP Email Account</p></td>
<td><blockquote>
<div><p>Alation should have a dedicated
email account with send
privileges on this SMTP server.
Provide the following
account information:</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>User ID</strong>:  specify the login
of the SMTP email account</p></li>
<li><p><strong>Password</strong>: provide the
password for this account.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>SMTP Timeout</p></td>
<td><p>Specify
time in seconds that the
system should wait
before it stops trying
to connect to the SMTP server.</p></td>
</tr>
<tr class="row-odd"><td><p>From Email</p></td>
<td><p>Specify the email address to
be used to fill the <strong>From</strong>
field in email notifications,
for example,
<strong>noreply&#64;alation.com</strong>.
Alation recommends using
a real email address.</p></td>
</tr>
<tr class="row-even"><td><p>From Email Display Name</p></td>
<td><p>Provide a name for
the <strong>From</strong> email address.
This name will be displayed as
the name of the sender, for
example:
<strong>DataWizard &lt;noreply&#64;alation.com&gt;</strong></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Click <strong>Test and Save</strong> to send a test email to your email address and save the new SMTP information. If you get the success message but do not receive the test email, see the next section. If there is an error sending the test email, follow the instructions in the error message to troubleshoot.</p></li>
</ol>
<section id="troubleshooting-email-server-configuration">
<h3>Troubleshooting Email Server Configuration<a class="headerlink" href="#troubleshooting-email-server-configuration" title="Permalink to this headline">¶</a></h3>
<p>Some of the actions described in this section require SSH access to the Alation server.</p>
<p>If you do not receive the test email, try the following steps:</p>
<ol class="arabic">
<li><p>Check your spam folder. The email may have been sorted as spam.</p></li>
<li><p>Review the file <strong>alation-debug.log</strong> for email server-specific errors. The file is located in the <strong>/opt/alation/site/logs</strong> directory (inside the Alation shell):</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
<span class="nb">cd</span><span class="w"> </span>/opt/alation/site/logs
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>Check your corporate email server logs to identify the problem. You may need to whitelist the Alation server IP.</p></li>
<li><p>Run the following command on the Alation server to debug email delivery issues. Replace <code class="docutils literal notranslate"><span class="pre">&lt;replace_email&#64;company.com&gt;</span></code> with your email address:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;Test e-mail&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sendmail<span class="w"> </span>-f<span class="w"> </span>noreply@alation.com<span class="w"> </span>&lt;replace_email@company.com&gt;
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
</section>
</section>
<section id="configuring-email-notifications-with-ms-modern-authentication">
<h2>Configuring Email Notifications with MS Modern Authentication<a class="headerlink" href="#configuring-email-notifications-with-ms-modern-authentication" title="Permalink to this headline">¶</a></h2>
<p><em>Available from version 2022.1</em></p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<section id="main-email-account">
<h4>Main email account<a class="headerlink" href="#main-email-account" title="Permalink to this headline">¶</a></h4>
<p>To configure email notifications with Microsoft (MS) modern authentication, set up an MS email account for Alation to authenticate with and use as a mailbox to send emails.</p>
</section>
<section id="from-address">
<h4>From address<a class="headerlink" href="#from-address" title="Permalink to this headline">¶</a></h4>
<p>You can optionally use a sender’s address (the <em>From</em> address) that is different from the main email account. If you opt for this setup, create or identify an additional email account that Alation can use as the sender’s address and grant this email account the permission to send email on behalf of another user. Use the steps in <a class="reference external" href="https://docs.microsoft.com/en-us/microsoft-365/admin/add-users/give-mailbox-permissions-to-another-user?view=o365-worldwide#send-email-from-another-users-mailbox">Send email from another user’s mailbox</a> in Microsoft’s documentation to grant the permissions.</p>
<p>When the From email account is different from the main email account, Alation will use the main email account for authentication and the From email account for sending emails. Use the From address if your configuration preference is to send emails from an address different from the address you use for authentication.</p>
</section>
<section id="azure-app-registration">
<h4>Azure app registration<a class="headerlink" href="#azure-app-registration" title="Permalink to this headline">¶</a></h4>
<p>Before performing the configuration on the Alation side, register an application for Alation in your MS Azure portal (see below). This app registration will be authorized to invoke the MS Graph APIs on behalf of Alation. You may need assistance from your Azure portal admin to approve the required API permissions for this application.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are planning to use Alation’s Email Interactions (Reply By Email) feature with MS modern authentication, you can use the same app registration for configuring both email notifications and Reply By Email.</p>
</div>
</section>
</section>
<section id="register-an-app-in-azure-portal">
<h3>Register an App in Azure Portal<a class="headerlink" href="#register-an-app-in-azure-portal" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>In Azure portal, create an app registration for Alation. When creating the registration, provide the following values:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Name</strong>: specify a meaningful name for your app registration</p></li>
<li><p><strong>Supported account types</strong>: select a value that is appropriate for your environment</p></li>
<li><p><strong>Redirect URL</strong>: do not specify.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/emailServer_MSauth_01.png"><img alt="../../_images/emailServer_MSauth_01.png" src="../../_images/emailServer_MSauth_01.png" style="width: 500px;" /></a>
</div></blockquote>
</li>
<li><p>After registering the app, locate the <strong>Application (client) ID</strong> and the <strong>Directory (tenant) ID</strong> values on the <strong>Overview</strong> tab of the app properties. Store them safely. You’ll need these values for configuration in Alation:</p>
<blockquote>
<div><img alt="../../_images/emailServer_MSauth_02.png" src="../../_images/emailServer_MSauth_02.png" />
</div></blockquote>
</li>
<li><p>In the left-hand menu under <strong>Manage</strong>, go to <strong>Certificates &amp; secrets</strong>.</p></li>
<li><p>Under <strong>Client secrets</strong>, create a new client secret, copy the secret value and store it safely. You will need this value for the configuration in Alation.</p>
<blockquote>
<div><img alt="../../_images/EmailServer_07.png" src="../../_images/EmailServer_07.png" />
</div></blockquote>
</li>
<li><p>Under <strong>Manage</strong>, select <strong>API permissions</strong>.</p></li>
<li><p>Click <strong>Add a permission</strong> and select Microsoft Graph API:</p>
<blockquote>
<div><img alt="../../_images/emailServer_MSauth_03.png" src="../../_images/emailServer_MSauth_03.png" />
</div></blockquote>
</li>
<li><p>Select the <strong>Application permissions</strong> box and search for <strong>Mail</strong>.</p></li>
<li><p>The permission required for email notifications is <strong>Mail.Send</strong>. However, if you are going to use the same app registration for Email Interactions (Reply By Email), also add the permissions required to enable email interactions:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p>Mail.Read</p></li>
<li><p>Mail.ReadBasic</p></li>
<li><p>Mail.ReadBasicAll</p></li>
<li><p>Mail.ReadWrite</p></li>
</ul>
</div></blockquote>
<img alt="../../_images/emailServer_MSauth_04.png" src="../../_images/emailServer_MSauth_04.png" />
</div></blockquote>
</li>
<li><p>After selecting the permissions, click <strong>Add permissions</strong>.</p></li>
<li><p>The permissions will be added to your application. Next, your Azure portal admin needs to grant admin consent for those permissions. After that, you can configure email notifications on the Alation side.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Refer to the Microsoft documentation for more details on how an application calls the Graph API, for example: <a class="reference external" href="https://docs.microsoft.com/en-us/graph/auth-v2-service">Get access without a user</a>.</p>
</div>
</section>
<section id="configure-email-notifications-with-ms-modern-authentication-in-alation">
<h3>Configure Email Notifications With MS Modern Authentication in Alation<a class="headerlink" href="#configure-email-notifications-with-ms-modern-authentication-in-alation" title="Permalink to this headline">¶</a></h3>
<p>To set up email notifications using MS modern authentication:</p>
<ol class="arabic">
<li><p>Prepare the following information about your Azure app registration:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Application (client) ID</strong> - the client ID of the  app registration</p></li>
<li><p><strong>Directory (tenant) ID</strong> - the Active Directory tenant ID for the registered application. You can find the tenant ID on your app registration properties page in Azure portal.</p></li>
<li><p><strong>Client ID</strong> - the unique identifier of the Azure app registration. You can find the Client ID on your app registration properties page in Azure portal.</p></li>
<li><p><strong>Client secret</strong> - the client secret value you have generated for your app registration.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Log in to Alation as a <em>Server Admin</em>.</p></li>
<li><p>Click the <strong>Settings</strong> icon on the top right to open the <strong>Admin Settings</strong> page.</p></li>
<li><p>In the <strong>Server Admin</strong> section of the Admin Settings, click <strong>Email Server</strong> to open the email server setup page.</p></li>
<li><p>In the <strong>Email Notifications</strong> section, click on the <strong>OAuth 2.0</strong> tab:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/emailServer_MSauth_05.png"><img alt="../../_images/emailServer_MSauth_05.png" src="../../_images/emailServer_MSauth_05.png" style="width: 300px;" /></a>
</div></blockquote>
</li>
<li><p>Specify the following information:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Email Address</p></td>
<td><p>Email address of the main email account to be
used for authentication.</p></td>
</tr>
<tr class="row-odd"><td><p>Service Provider</p></td>
<td><p><em>Microsoft</em> is the only supported provider.</p></td>
</tr>
<tr class="row-even"><td><p>Tenant ID</p></td>
<td><p>Specify the Directory (tenant) ID of the Azure
app registration.</p></td>
</tr>
<tr class="row-odd"><td><p>Client ID</p></td>
<td><p>Specify the Application (client) ID of the
Azure app registration.</p></td>
</tr>
<tr class="row-even"><td><p>Client Secret</p></td>
<td><p>Specify the client secret value of the Azure
app registration.</p></td>
</tr>
<tr class="row-odd"><td><p>From Address</p></td>
<td><p>Fill this field if you want to send emails from
a different email address. This email address
will be exposed to Alation users when they
receive emails from Alation.</p>
<p>Note that an additional permission is
required on this email address.
Refer to <a class="reference internal" href="#from-address">From address</a> for more
information.</p>
<p>If no value is provided in this field, the
main email address from the <strong>Email Address</strong>
field will be used for both authentication
and sending emails.</p>
</td>
</tr>
<tr class="row-even"><td><p>From Address Display Name</p></td>
<td><p>This field is disabled when <em>Microsoft</em> is the
Service Provider.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>Click <strong>Test and Save</strong>. Alation checks authentication based on the provided email account information. If the connection can be established successfully, Alation will display a success message and send a test email to the email address of your user profile. If the connection cannot be established, Alation will issue an error message. Depending on the message, troubleshoot the configuration.</p></li>
</ol>
</section>
<section id="troubleshooting-email-notifications-with-ms-modern-authentication">
<h3>Troubleshooting Email Notifications With MS Modern Authentication<a class="headerlink" href="#troubleshooting-email-notifications-with-ms-modern-authentication" title="Permalink to this headline">¶</a></h3>
<section id="test-and-save-fails-when-the-from-address-field-is-not-filled">
<h4>Test and Save fails when the From Address field is not filled<a class="headerlink" href="#test-and-save-fails-when-the-from-address-field-is-not-filled" title="Permalink to this headline">¶</a></h4>
<p><strong>Cause</strong>: Invalid email account credentials are passed</p>
<p><strong>Resolution</strong>: check if</p>
<blockquote>
<div><ul class="simple">
<li><p>The client ID and the tenant ID are valid.</p></li>
<li><p>The client secret value is valid.</p></li>
<li><p>The account specified in the Email Address field is a valid user that has a mailbox.</p></li>
<li><p>The <strong>Mail.Send</strong> API permission has been granted to the Azure app registration used by Alation.</p></li>
</ul>
</div></blockquote>
</section>
<section id="test-and-save-fails-when-the-from-address-field-is-filled">
<h4>Test and Save fails when the From Address field is filled<a class="headerlink" href="#test-and-save-fails-when-the-from-address-field-is-filled" title="Permalink to this headline">¶</a></h4>
<p><strong>Cause</strong>: Permission to send email on behalf of another user is not granted to the email account in the From Address field</p>
<p><strong>Resolution</strong>: Refer to <a class="reference internal" href="#from-address">From address</a>.</p>
</section>
</section>
</section>
<section id="configuring-email-interactions">
<h2>Configuring Email Interactions<a class="headerlink" href="#configuring-email-interactions" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Email interactions (Reply By Email) require that the email notifications are set up first (see above).</p>
</div>
<p>Users communicate in Alation using <strong>conversations</strong>. When an Alation user is &#64;-mentioned in a conversation post, they receive an email notification. An admin can enable the ability for users to respond to conversations directly from the email by enabling <strong>Email Interactions</strong>.</p>
<p>When a user starts a conversation anywhere in Alation and &#64;-mentions other users in the post, the &#64;-mentioned users will receive email notifications with the content of the post. Instead of navigating to Alation to respond, they will be able to send their response to Alation by directly replying to the email notification.</p>
<p>When email interactions are enabled, the email notification about the &#64;-mention in a conversion will include the prompt <strong>Please type your reply above this line</strong>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/EmailServer_11.png"><img alt="../../_images/EmailServer_11.png" src="../../_images/EmailServer_11.png" style="width: 500px;" /></a>
</div></blockquote>
<p>The response will be posted in the corresponding conversation in Alation.</p>
<p>Configuration capabilities for email interactions depend on the Alation version:</p>
<blockquote>
<div><ul>
<li><p><strong>Releases prior to 2021.2</strong></p>
<blockquote>
<div><p>Alation needs a dedicated working email account with IMAP-enabled inbox access that will be used to receive emails. See <a class="reference internal" href="#email-interactions-with-basic-authentication">Email Interactions With Basic Authentication</a>.</p>
</div></blockquote>
</li>
<li><p><strong>Release 2021.2 and newer</strong></p>
<blockquote>
<div><p>It is possible to set up email interactions with Microsoft modern authentication. See <a class="reference internal" href="#email-interactions-with-ms-modern-authentication">Email Interactions With MS Modern Authentication</a>.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<section id="mailbox-synchronization">
<h3>Mailbox Synchronization<a class="headerlink" href="#mailbox-synchronization" title="Permalink to this headline">¶</a></h3>
<p>Alation retrieves information from the emails sent to the receiving mailbox every 3 minutes (default). Alation parses the incoming emails and adds the content of the response to the relevant conversations.</p>
<p>When basic authentication is used to configure Reply By Email, Alation archives the incoming emails every Sunday. For archived emails, Alation cleans up emails that are older than 30 days.</p>
<p>When MS modern authentication is used, the incoming emails are not archived.</p>
</section>
</section>
<section id="email-interactions-with-basic-authentication">
<h2>Email Interactions With Basic Authentication<a class="headerlink" href="#email-interactions-with-basic-authentication" title="Permalink to this headline">¶</a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not use a personal email account for configuring email interactions. Alation recommends creating a separate service email account for Alation.</p>
</div>
<p>To use basic authentication for email interactions:</p>
<ol class="arabic">
<li><p>Sign in to Alation as a <em>Server Admin</em>.</p></li>
<li><p>In the upper right-hand corner of the main toolbar, click the <strong>Settings</strong> icon to open the <strong>Admin Settings</strong> page.</p></li>
<li><p>In the <strong>Server Admin</strong> section, click <strong>Email Server</strong> to open the email server setup page.</p></li>
<li><p>In the <strong>Email Interactions</strong> section, select the <strong>Enable Reply via Email</strong> checkbox. This will make the fields under Email Interactions editable.</p>
<blockquote>
<div><img alt="../../_images/EmailServer_02.png" src="../../_images/EmailServer_02.png" />
</div></blockquote>
</li>
<li><p>Specify the information on the <strong>Basic Auth</strong> tab.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In releases prior to 2021.2, the <strong>Basic Auth</strong> tab is not present.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reply To Email Address</p></td>
<td><p>Specify the reply-to email
address in this field. This
address should belong to the
dedicated email account with an
enabled IMAP inbox access. It
will be used by Alation to
receive email replies from users.</p></td>
</tr>
<tr class="row-odd"><td><p>IMAP Server</p></td>
<td><ul class="simple">
<li><p><strong>IMAP Server</strong> provide the
IMAP server hostname.
Depending on your network
configuration, it can be your
corporate SMTP server.</p></li>
<li><p><strong>IMAP Server port</strong> provide the
port for inbox access</p></li>
<li><p><strong>Server uses SSL</strong> select
this checkbox if IMAP access
should work over SSL for this
server</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>IMAP Email Account</p></td>
<td><ul class="simple">
<li><p><strong>User Name</strong> provide the
user name of the reply-to
email account</p></li>
<li><p><strong>Password</strong> provide the
password of the reply-to user
account</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Intent Tracking Mode</p></td>
<td><p>Select the setting that will work
with your IMAP server. For
details, see <a class="reference internal" href="#intent-tracking-mode">Intent Tracking Mode</a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="5">
<li><p>Click <strong>Save</strong>. Alation will establish a test connection with the email server. If it succeeds, the settings will be saved and the feature will be enabled. Users will be able to post to conversations by replying to emails. Alation checks the inbox of the Reply To Email account on a regular basis, and the email replies are posted a few minutes after they were sent.</p></li>
</ol>
</section>
<section id="intent-tracking-mode">
<h2>Intent Tracking Mode<a class="headerlink" href="#intent-tracking-mode" title="Permalink to this headline">¶</a></h2>
<p>Alation needs <strong>Intent Tracking Mode</strong> to correctly render replies via email and post them to relevant conversations. <em>Intent</em> is a string that Alation appends to the email in order to identify it as a post to a conversation. Alation can encode intent in one of two ways: either in the email address or in the email header. Different email providers have different requirements for including additional strings into the message structure. The admin has to specify this setting depending on the email provider that is in use.</p>
<p>If your IMAP server is Google Gmail or Amazon SES, select <strong>Use email address for tracking reply message intent</strong>. These email services allow adding strings to the email address.</p>
<p>If your IMAP server is Microsoft Exchange or Office 365, select <strong>Use message-id in email header for tracking reply message intent</strong>. These email services allow adding strings to the email header.</p>
<p>If your IMAP server is neither Google Gmail or Amazon SES or Microsoft Exchange or Office 365, then save the first option and test by creating a Conversation and replying to it via email. If using the first option results in the <em>recipient not found</em> error for the reply emails, switch to the second option and try again. The option that successfully sends replies works for your server.</p>
</section>
<section id="email-interactions-with-ms-modern-authentication">
<h2>Email Interactions With MS Modern Authentication<a class="headerlink" href="#email-interactions-with-ms-modern-authentication" title="Permalink to this headline">¶</a></h2>
<p><em>Available from release 2021.2</em></p>
<section id="ms-email-account">
<h3>MS Email Account<a class="headerlink" href="#ms-email-account" title="Permalink to this headline">¶</a></h3>
<p>To configure email interactions with Microsoft (MS) modern authentication, you need a MS email account that Alation can use as a mailbox to send and receive emails. You can either create a separate email account or use the same email account that was already provided to set up email notifications.</p>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not use an existing personal email account. For Alation to update conversations correctly, the incoming emails from users replying to conversations in the email should not be marked as read manually by a user.</p>
</div>
</div></blockquote>
<p>Alation recommends to set the <strong>Mark as Read</strong> property of the MS mailbox to <strong>Don’t automatically mark items as read</strong>.</p>
</section>
<section id="ms-azure-app-registration">
<h3>MS Azure App Registration<a class="headerlink" href="#ms-azure-app-registration" title="Permalink to this headline">¶</a></h3>
<p>You can either use the Azure app registration you already created for email notifications or create a separate app registration for email interactions.
If you chose to use one app registration for both, note that it should accommodate for both configurations. The email interactions require more MS Graph API permissions than email notifications. Make sure that your existing app registration was granted the following API permissions:</p>
<blockquote>
<div><ul class="simple">
<li><p>Mail.Read</p></li>
<li><p>Mail.ReadBasic</p></li>
<li><p>Mail.ReadBasicAll</p></li>
<li><p>Mail.ReadWrite</p></li>
<li><p>Mail.Send (this permission is required by both email notifications and email interactions).</p></li>
</ul>
</div></blockquote>
<p>If you choose to create a separate app registration for email interactions, use the steps in <a class="reference internal" href="#register-an-app-in-azure-portal">Register an App in Azure Portal</a> to create it. The only difference is in the number of API permissions that need to be granted to the app. Make sure to grant these permissions:</p>
<blockquote>
<div><ul class="simple">
<li><p>Mail.Read</p></li>
<li><p>Mail.ReadBasic</p></li>
<li><p>Mail.ReadBasicAll</p></li>
<li><p>Mail.ReadWrite</p></li>
<li><p>Mail.Send (this permission is required by both email notifications and email interactions).</p></li>
</ul>
</div></blockquote>
<p>After creating the app registration and granting it the required permissions, you can configure email interactions in Alation.</p>
</section>
<section id="configure-email-interactions-with-ms-modern-authentication-in-alation">
<h3>Configure Email Interactions With MS Modern Authentication in Alation<a class="headerlink" href="#configure-email-interactions-with-ms-modern-authentication-in-alation" title="Permalink to this headline">¶</a></h3>
<p>When your Azure admin has granted admin consent for the API permissions, you can configure email interactions with MS Modern Authentication in Alation:</p>
<ol class="arabic">
<li><p>Prepare the following information about your Azure app registration:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Application (client) ID</strong> - the client ID of the app registration. You can find the client ID on your app registration properties page in Azure portal.</p></li>
<li><p><strong>Directory (tenant) ID</strong> - the Active Directory tenant ID for the registered application. You can find the tenant ID on your app registration properties page in Azure portal.</p></li>
<li><p><strong>Client secret</strong> - the client secret value you have generated for your app registration.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Log in to Alation as a <em>Server Admin</em>.</p></li>
<li><p>Click the <strong>Settings</strong> icon on top right to open the <strong>Admin Settings</strong> page.</p></li>
<li><p>In the <strong>Server Admin</strong> section of the Settings, click <strong>Email Server</strong> to open the email server setup page.</p></li>
<li><p>In the <strong>Email Interactions</strong> section, select the <strong>Enable Reply via Email</strong> checkbox. This will make the fields under <strong>Email Interactions</strong> editable. To use MS Modern Authentication, fill out the information on the <strong>OAuth 2.0</strong> tab:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/EmailServer_03.png"><img alt="../../_images/EmailServer_03.png" src="../../_images/EmailServer_03.png" style="width: 500px;" /></a>
</div></blockquote>
</li>
<li><p>Fill in the following information:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reply To Email Address</p></td>
<td><p>Specify the reply-to email address.
This address should belong to the dedicated email
account that will be used by Alation to receive inbound
email replies from users.</p></td>
</tr>
<tr class="row-odd"><td><p>Service Provider</p></td>
<td><p>Microsoft (non-editable)</p></td>
</tr>
<tr class="row-even"><td><p>Tenant ID</p></td>
<td><p>Specify the tenant ID of the application you registered in
the Azure portal.</p></td>
</tr>
<tr class="row-odd"><td><p>Client ID</p></td>
<td><p>Specify the client ID of the application you registered
in the Azure portal.</p></td>
</tr>
<tr class="row-even"><td><p>Client Secret</p></td>
<td><p>Specify the client secret of the application you
registered in the Azure portal.</p></td>
</tr>
<tr class="row-odd"><td><p>Intent Tracking Mode</p></td>
<td><p>MS email services allow message-id in the email header.
The <strong>Use message-id in email header</strong> option is
preselected and non-editable when
Microsoft is the Service Provider.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ol>
<ol class="arabic" start="5">
<li><p>Click <strong>Test and Save</strong>. Alation checks authentication based on the provided credentials. If the connection cannot be established, it will issue an error message:</p>
<blockquote>
<div><img alt="../../_images/EmailServer_10.png" src="../../_images/EmailServer_10.png" />
</div></blockquote>
</li>
</ol>
</section>
<section id="troubleshooting-the-configuration">
<h3>Troubleshooting The Configuration<a class="headerlink" href="#troubleshooting-the-configuration" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Solution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Error connecting to Tenant ID:
&lt;tenant-id&gt; with Client:
&lt;client-id&gt; credentials.</p></td>
<td><p>Microsoft OAuth2 settings Tenant ID, Client ID or Client
Secret are invalid.</p>
<p>Verify the OAuth2 settings you have specified in the
Alation UI and make sure they are the correct values from
your Azure portal.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="testing-the-configuration">
<h3>Testing The Configuration<a class="headerlink" href="#testing-the-configuration" title="Permalink to this headline">¶</a></h3>
<p>To test the configuration:</p>
<ol class="arabic">
<li><p>Create a conversation in Alation and &#64;-mention an Alation user in the post.</p></li>
<li><p>Check email on behalf of the mentioned user. This user should receive an email notification from Alation (<strong>&lt;Username&gt; mentioned you in &lt;Conversation name&gt;</strong>) with the ability to reply by email. There will be the prompt <strong>Please type the reply above this line</strong> in the notification.</p></li>
<li><p>Reply to the email:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/EmailServer_11.png"><img alt="../../_images/EmailServer_11.png" src="../../_images/EmailServer_11.png" style="width: 500px;" /></a>
</div></blockquote>
</li>
<li><p>In about 3 minutes, check this conversation in Alation. The response should have been appended to the body of the conversation:</p>
<blockquote>
<div><img alt="../../_images/EmailServer_12.png" src="../../_images/EmailServer_12.png" />
</div></blockquote>
</li>
</ol>
</section>
<section id="troubleshooting-reply-by-email">
<h3>Troubleshooting Reply By Email<a class="headerlink" href="#troubleshooting-reply-by-email" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error</p></th>
<th class="head"><p>Solution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Email messages are sent from
the replying user to the
receiving MS mailbox but are
not added as conversation
updates in Alation.</p></td>
<td><p>Mailbox configured as the receiving address in the settings
is either manually read or read by another application.
Email messages should stay unread to be processed.</p>
<blockquote>
<div><ul class="simple">
<li><p>Log in to the MS Exchange or Outlook and make sure
that the received emails are not marked as
read upon receiving</p></li>
<li><p>Make sure the emails received on Microsoft exchange
or Outlook mailboxes are received in the Inbox folder
and stay in the Inbox folder as unread.</p></li>
<li><p>Alation recommends to set the <strong>Mark as Read</strong>
setting of the MS mailbox to <strong>Don’t automatically</strong>
<strong>mark items as read</strong>.</p></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p>A user has replied to an email
notification but there is no
incoming email and the
Conversation is not updated.</p></td>
<td><p>Check that the user replies to the right notification.
Users should reply to notifications that explicitly
&#64;-mention them and include the prompt
<em>Please type your reply above this line</em> (&lt;Username&gt;
mentioned you in &lt;Conversation name&gt;).</p>
<p>Note that when a Conversation is assigned to a user,
this user also receives an email notification that informs
them about the assignment (&lt;Username&gt; assigned you
to this Conversation). However, they cannot reply to this
email.</p>
</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="UserAuthenticationOIDC.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Configure Authentication with OpenID Connect
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="HTTPS.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />HTTPS
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/ServerInstallation/ConfigureEmailServer&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Email Server Configuration</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#setting-up-built-in-smtp-server">Setting Up Built-in SMTP Server</a><ul>
<li><a class="reference internal" href="#troubleshooting-built-in-email-server-configuration">Troubleshooting Built-in Email Server Configuration</a></li>
<li><a class="reference internal" href="#setting-up-connection-to-a-relay-server">Setting up Connection to a Relay Server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-corporate-smtp-server">Setting Up Corporate SMTP Server</a><ul>
<li><a class="reference internal" href="#troubleshooting-email-server-configuration">Troubleshooting Email Server Configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-email-notifications-with-ms-modern-authentication">Configuring Email Notifications with MS Modern Authentication</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li><a class="reference internal" href="#main-email-account">Main email account</a></li>
<li><a class="reference internal" href="#from-address">From address</a></li>
<li><a class="reference internal" href="#azure-app-registration">Azure app registration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#register-an-app-in-azure-portal">Register an App in Azure Portal</a></li>
<li><a class="reference internal" href="#configure-email-notifications-with-ms-modern-authentication-in-alation">Configure Email Notifications With MS Modern Authentication in Alation</a></li>
<li><a class="reference internal" href="#troubleshooting-email-notifications-with-ms-modern-authentication">Troubleshooting Email Notifications With MS Modern Authentication</a><ul>
<li><a class="reference internal" href="#test-and-save-fails-when-the-from-address-field-is-not-filled">Test and Save fails when the From Address field is not filled</a></li>
<li><a class="reference internal" href="#test-and-save-fails-when-the-from-address-field-is-filled">Test and Save fails when the From Address field is filled</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-email-interactions">Configuring Email Interactions</a><ul>
<li><a class="reference internal" href="#mailbox-synchronization">Mailbox Synchronization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#email-interactions-with-basic-authentication">Email Interactions With Basic Authentication</a></li>
<li><a class="reference internal" href="#intent-tracking-mode">Intent Tracking Mode</a></li>
<li><a class="reference internal" href="#email-interactions-with-ms-modern-authentication">Email Interactions With MS Modern Authentication</a><ul>
<li><a class="reference internal" href="#ms-email-account">MS Email Account</a></li>
<li><a class="reference internal" href="#ms-azure-app-registration">MS Azure App Registration</a></li>
<li><a class="reference internal" href="#configure-email-interactions-with-ms-modern-authentication-in-alation">Configure Email Interactions With MS Modern Authentication in Alation</a></li>
<li><a class="reference internal" href="#troubleshooting-the-configuration">Troubleshooting The Configuration</a></li>
<li><a class="reference internal" href="#testing-the-configuration">Testing The Configuration</a></li>
<li><a class="reference internal" href="#troubleshooting-reply-by-email">Troubleshooting Reply By Email</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->