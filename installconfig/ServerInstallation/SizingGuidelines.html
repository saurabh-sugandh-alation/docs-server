
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Sizing Guidelines Detail &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Install Alation" href="index.html"/>
        <link rel="next" title="How to Configure Alation to Use HTTP Proxy for All Web-bound Traffic" href="ConfigureHTTPProxyforWebboundTraffic.html"/>
        <link rel="prev" title="Installing on High Availability (HA) Pair" href="HighAvailability.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/QuickStart/index.html">Quick Start Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Install Alation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="PrepforInstallation.html">Preparing for Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemRequirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="NetworkRequirements.html">Network Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="InstallationReadiness.html">Installation Readiness</a></li>
<li class="toctree-l2"><a class="reference internal" href="Installation.html">Installation Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationLDAP.html">User Authentication with LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationSAML.html">Configure Authentication with SAML from Alation Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationSAMLUI.html">Configure Authentication with SAML from Admin Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableSCIMIntegration.html">Enable SCIM Integration for User and Group Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="TokenAuthForSCIMSync.html">Managing Token Authentication for SCIM Sync</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSCIMIntegrationInOkta.html">Set Up SCIM Integration in Okta</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSAMLandSCIMIntegrationInPingFederate.html">Set Up SAML and SCIM Integration in PingFederate</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetUpSAMLandSCIMwithAAD.html">Set Up SAML and SCIM Integration in Azure AD</a></li>
<li class="toctree-l2"><a class="reference internal" href="TestingSCIMConfiguration.html">Testing SCIM Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ViewSCIMConfiguration.html">View SCIM Configuration in alation_conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="TroubleshootingSCIMConfiguration.html">Troubleshooting SCIM Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="UserAuthenticationOIDC.html">Configure Authentication with OpenID Connect</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureEmailServer.html">Email Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="HTTPS.html">HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="HighAvailability.html">Installing on High Availability (HA) Pair</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sizing Guidelines Detail</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureHTTPProxyforWebboundTraffic.html">How to Configure Alation to Use HTTP Proxy for All Web-bound Traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="ChangeBaseURL.html">How to Change the Base URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateaLicenseFile.html">How to Update a License File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Runbook/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Install Alation</a>
    <span class="separator">&gt;</span>
    <span>Sizing Guidelines Detail</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="sizing-guidelines-detail">
<h1>Sizing Guidelines Detail<a class="headerlink" href="#sizing-guidelines-detail" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This document attempts to summarize the current state of Alation
instance sizing, including what guidance we give and why and what
problems we have run into.</p>
<p>Our recommended sizing guidelines are a bit conservative, especially
when the scale gets large. It leaves out some details on purpose trying
to be a guide people can understand and follow.</p>
<p>This guide was developed by testing with a relatively small scale and
then extrapolating to large scales using a theoretical understanding of
the system.</p>
<p>Below we go through each system resource and how it scales with Alation
usage. This is the detail behind our current recommendations.</p>
</section>
<section id="memory">
<h2>Memory<a class="headerlink" href="#memory" title="Permalink to this headline">¶</a></h2>
<p>Memory is the most common bottleneck for Alation instances. Alation
internally runs several services that each have their own memory
requirements. Each service has a base amount that is required for normal
functioning then some flexible amount that depends on the scale of
installation.</p>
<section id="memory-formula">
<h3>Memory Formula<a class="headerlink" href="#memory-formula" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Start with 32 GB minimum requirement regardless of the installation details.</p></li>
<li><p>Add 2 GB per million columns in their datasources.</p></li>
<li><p>If you are over the line for a particular size (64GB instance size for example) it should be safe to round down.</p></li>
</ol>
</section>
<section id="minimum-memory-requirements">
<h3>Minimum Memory Requirements<a class="headerlink" href="#minimum-memory-requirements" title="Permalink to this headline">¶</a></h3>
<p>The sum of the base memory requirements for all the services is roughly
28 GB. Now not all of those services are constantly using all that
memory. However, at peak usage (not of users usually, but batch jobs)
 if you don’t have the buffer things will crash.</p>
<p>RAM is typically only apportioned in 2x blocks (ex. 16/32/64/128 GB).
16 GB is cutting it low so we advise a 32GB base instance size. This
recommendation is independent of the scale of the installation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use 16GB memory. If you try to run Alation on 16 GB it will appear to work but you are likely to run into occasional crashes or performance issues.</p>
</div>
</section>
<section id="scale-dependent-memory-requirements">
<h3>Scale dependent memory requirements<a class="headerlink" href="#scale-dependent-memory-requirements" title="Permalink to this headline">¶</a></h3>
<p>For installations that have larger scale in some particular dimensions
Alation will need more than the base 32 GB memory.</p>
<p>The main dimension you need to factor in is the total number of columns
in the data sources you intend to ingest. Number of users/queriers is a
secondary and smaller factor.</p>
<section id="number-of-columns">
<h4>Number of Columns<a class="headerlink" href="#number-of-columns" title="Permalink to this headline">¶</a></h4>
<p>The biggest factor driving memory requirements is the total number of
database objects ingested into Alation. By database object we mean
Schema/Table/Column whose metadata we have ingested into Alation. In
most cases the number of Columns in the connected relational stores is a
good proxy for this number. This is because the Columns are usually 10x
tables so there is only a minor difference if you include the other
objects.</p>
<p>Some jobs scale in the number of total objects. For example we get the
new metadata from a system and diff it on the current metadata that we
know of then ingest the difference. That diff operation is done in
one bulk query. Also in one job we load an ID to name map for each
object into memory. The search index also benefits from being able to
load the objects into memory.</p>
<p>A rough formula to safely size the memory is to start with the 32 GB
minimum then add 2 GB per million objects. 2 GB per million is a
conservative estimate. It doesn’t take 2 GB to load 2M rows
representing those objects into memory. However, there are multiple
batch jobs that scale in the factor of number of objects. They may run
in parallel and use varying amounts of memory per object. 2 GB is a good
estimate to allow for a few overlapping jobs.</p>
<p>Because RAM offerings usually jump from 32 GB to 64 GB this most often
results in a 64 GB recommendation. If the formula asks for over
64 GB it’s probably fine to stick with 64 GB, which is a rough guide and
errs on the conservative side. It’s peak memory usage that we are
worried about, most of the time you would expect to see lower usage.</p>
<p>Example:</p>
<p>10M columns in your databases, 32 + 2 x 10 = 52 GB recommendation.</p>
</section>
<section id="number-of-queriers">
<h4>Number of Queriers<a class="headerlink" href="#number-of-queriers" title="Permalink to this headline">¶</a></h4>
<p>The number of Queriers (Compose Users)  has a small impact on the
memory usage. However, at most it would require 2-4 GB. Because the
formula is approximate, this is generally not worth worrying about
when instance sizing.</p>
<p>Typically, you do not need more than 128 GB.
It’s unlikely that having more than 128 GB will be helpful. Almost
certainly some other piece of the system would break before this becomes
the bottleneck resource at that size.</p>
</section>
<section id="monitoring-memory-usage">
<h4>Monitoring Memory Usage<a class="headerlink" href="#monitoring-memory-usage" title="Permalink to this headline">¶</a></h4>
<p>You can monitor your Alation instances memory usage over time to get a
more precise idea what it uses. Look at the lows for free + cached
memory. The OS uses most free memory for its cache, but it can always
use that memory for other things. Don’t optimize for having no cache at
all. Postgres and Elasticsearch perform better with a good chunk of
memory in OS cache. If you see only ⅓ of the memory being used even at
peak usage then you can consider halving the instance size.</p>
</section>
</section>
</section>
<section id="cpu">
<h2>CPU<a class="headerlink" href="#cpu" title="Permalink to this headline">¶</a></h2>
<p>CPU is hardly ever the bottleneck resource for Alation in practice.
Therefore we don’t recommend worrying about it when instance sizing.
Generally instances with more memory also have more CPU and memory is
almost always the limiting factor. Follow the standard CPU count
for the memory requirement and it should be fine.
There are cases where CPU caused an issue. These were all due to
runaway processes that got hung. If this keeps happening eventually all
the CPUs can be taken up no matter how many there are. Preventing this
is less about getting a bigger machine and more about having CPU
monitoring that would notice if something is pegged at 100% for days.</p>
</section>
<section id="disk-space">
<h2>Disk Space<a class="headerlink" href="#disk-space" title="Permalink to this headline">¶</a></h2>
<p>Alation uses a lot of disk space. Expect that your disk space usage will
keep increasing over time as you use Alation.</p>
<p>The primary factors contributing to disk space are</p>
<ul class="simple">
<li><p>Number of queries ingested</p></li>
<li><p>Amount of Compose usage</p></li>
<li><p>Alation Analytics</p></li>
</ul>
<section id="minimum-requirements">
<h3>Minimum requirements<a class="headerlink" href="#minimum-requirements" title="Permalink to this headline">¶</a></h3>
<section id="base-requirements">
<h4>Base requirements<a class="headerlink" href="#base-requirements" title="Permalink to this headline">¶</a></h4>
<p>There is a minimum requirement for the root drive to have 80 GB
to hold the Alation binaries.  By default, Alation installs at
<code class="docutils literal notranslate"><span class="pre">/opt/alation</span></code>.  A separate mount of 80GB at <code class="docutils literal notranslate"><span class="pre">/opt</span></code> or <code class="docutils literal notranslate"><span class="pre">/opt/alation</span></code> can also
be used.</p>
</section>
<section id="data-drive-requirements">
<h4>Data drive requirements<a class="headerlink" href="#data-drive-requirements" title="Permalink to this headline">¶</a></h4>
<p>For the data drive we recommend a baseline 500 GB. Most of this is used
for Alation’s internal database.</p>
</section>
<section id="backup-drive-requirements">
<h4>Backup drive requirements<a class="headerlink" href="#backup-drive-requirements" title="Permalink to this headline">¶</a></h4>
<p>Alation runs automatic backups on a nightly basis.  The backup drive
should be larger than the data drive, as data is staged on the backup
drive before being compressed.  A conservative estimate of backup = 1.5
x data will give space to hold both the staged data and the compressed
backup files.</p>
</section>
</section>
<section id="number-of-queries-ingested">
<h3>Number of queries ingested<a class="headerlink" href="#number-of-queries-ingested" title="Permalink to this headline">¶</a></h3>
<p>QLI (query log ingestion) refers to the process of ingesting logs from
external data sources into Alation then processing them to compute
aggregate stats like popularity.
QLI primarily stresses the disk space and partially stresses the Disk IO
and CPU. The stress scales essentially linearly with the number of
queries per day.
We use a baseline recommendation +1.25 GB per 1000 queries/day. So for
example if the customer wants to ingest 10M queries per day we recommend
10M / 1k x 1.25 GB = 10 TB.</p>
<p>The idea here was to get a disk size that could store all the queries
ingested fora few years.</p>
<p>This is a conservative estimate based on a high average query text size.
Customers can configure the query retention period.</p>
<p>Customers that are willing to monitor disk space and quickly add on
later could start with a much lower size. QLI should fill up space in a
linearly increasing way, so it should be easy to watch the graph over
time and predict when you need to add more.</p>
</section>
<section id="amount-of-compose-usage">
<h3>Amount of Compose Usage<a class="headerlink" href="#amount-of-compose-usage" title="Permalink to this headline">¶</a></h3>
<p>You can roughly approximate the disk space needed for Compose as:</p>
<blockquote>
<div><ul class="simple">
<li><p>Average query result size x Queries per day x 7</p></li>
</ul>
</div></blockquote>
<p>If you have 100 daily users and they query 100 times, you could estimate an upper bound of 4 MB x 100 users x 100 queries x 7 days = 280 GB. This calculation is based on 4 MB for average query result size as a reasonable guess. You can start with a smaller estimate and monitor. You may need to add space if required.</p>
<p>Alation stores query results from user queries. For each result, it will only store 16 MB by default. However, the Server Admin can increase this value to up to 100 MB. Query Result Size is configurable in <strong>Admin Settings</strong> &gt; <strong>Compose Settings</strong>. For more information on how to
configure the value of Query Result Size, see <a class="reference internal" href="../../analyst/WorkwithQueryResults/ConfigureQueryResults/ConfigureQueryResultSize.html"><span class="doc">Configuring Query Result Size</span></a>.</p>
<p>From 2021.4, the default value of the <strong>alation_conf</strong> parameter <code class="docutils literal notranslate"><span class="pre">alation.query_exec.results_auto_persist_bytes</span></code> defaults to zero. This means that query results of any size that have not been explicitly saved by users are not stored longer than seven days (default) and that queries of any size are subject to the same seven-day retention period. Previously, the default value of this parameter was 1 MB, which could lead to small query results accumulation over time.</p>
<p>Admins can use the <code class="docutils literal notranslate"><span class="pre">alation_action</span> <span class="pre">purge_execution_results</span></code> to reclaim space taken up by stored query results.</p>
</section>
<section id="alation-analytics-v2">
<h3>Alation Analytics V2<a class="headerlink" href="#alation-analytics-v2" title="Permalink to this headline">¶</a></h3>
<p>Alation Analytics is a solution which provides a way for
Alation Administrators to monitor feature usage in Alation. Alation
Analytics sets up a replicated copy of Alation’s internal database which
is available for querying in Compose by users with access.</p>
<p>Alation Analytics was first released with V R3 (5.6.x), and then redesigned in 2020.3 as
Alation Analytics V2. From release <em>2020.3.x</em>, all new installations of Alation should use <strong>Alation Analytics V2</strong>. Alation Analytics V1 is no longer available for new installations.</p>
<p>Alation Analytics V2 can have a significant impact on disk space
consumption. The current recommendation from Alation is to double the disk
space estimates to account for the replicated database copy. However, if you are
able to monitor your disk space usage and add more space easily, you can start with a smaller size.</p>
<p>Since Alation Analytics V2 is almost a replica of the internal database Rosemeta, Alation
recommends that you have at least <code class="docutils literal notranslate"><span class="pre">((1.5~2)\*</span> <span class="pre">du</span> <span class="pre">-sh</span>
<span class="pre">/var/lib/pgsql/13/)</span></code> GB of disk space free before you enable Alation
Analytics.</p>
<p>Alation Analytics V2 can be installed on a remote host, separately from the Alation Catalog, which is a way recommended by Alation. Please find detailed system requirements for Alation Analytics V2 at <a class="reference internal" href="../AlationAnalyticsV2/EnableAlationAnalyticsV2.html"><span class="doc">Enable and Install Alation Analytics V2</span></a>.</p>
</section>
<section id="open-connector-framework">
<h3>Open Connector Framework<a class="headerlink" href="#open-connector-framework" title="Permalink to this headline">¶</a></h3>
<p><em>Available from 2020.4</em></p>
<p>Open Connector Framework is a solution which provides a way to support external connectors developed by partnering teams in order to add specific sources to the Catalog. Connectors created on the basis of OCF - or OCF connectors - are installed in addition to the Alation application and can be maintained separately from the Data Catalog.
Alation recommends installing OCF components on the same host with the Alation application. For each BI connector to be installed, it is recommended to have 500 MB of disk space (a conservative estimate). Refer to <a class="reference internal" href="../../sources/OpenConnectorFramework/OCFInstallAlationConnectorManager.html"><span class="doc">Install Alation Connector Manager</span></a> for more details.</p>
</section>
</section>
<section id="disk-io">
<h2>Disk IO<a class="headerlink" href="#disk-io" title="Permalink to this headline">¶</a></h2>
<p>Alation uses a good amount of disk IO to do batch processing jobs, but
it is generally not an issue. Usually a standard AWS EBS volume with
250 MB/sec throughput is fine. Alation does not have precise throughput
or IOPs recommendations.</p>
<p>In rare cases, we have seen an impact on site users due to a disk IO
bottleneck. A few times we have seen this happen when the disk IO gets
artificially throttled by some virtualized storage system after Alation
used some threshold amount.</p>
<p>Using SSDs will markedly speed up batch jobs but it’s generally not
necessary to get that speed up.</p>
</section>
<section id="common-problems">
<h2>Common Problems<a class="headerlink" href="#common-problems" title="Permalink to this headline">¶</a></h2>
<section id="specific-process-runs-out-of-memory">
<h3>Specific process runs out of memory<a class="headerlink" href="#specific-process-runs-out-of-memory" title="Permalink to this headline">¶</a></h3>
<p>Sometimes the Connector (component that runs Compose queries) or Elasticsearch
will run out of memory. These are JVM based process and they have a
preset cap on how much memory they can use. This value is configurable.
Increasing the overall instance size will not automatically allow these
processes to use more memory. If you experience this problem you can
usually increase this cap on the problem process.</p>
</section>
<section id="os-runs-out-of-memory-and-terminates-processes">
<h3>OS runs out of memory and terminates processes<a class="headerlink" href="#os-runs-out-of-memory-and-terminates-processes" title="Permalink to this headline">¶</a></h3>
<p>The OS will stop a process using too much memory if it needs some. You
will see a message in the system log about it. This can happen when a
batch job spikes in memory usage. If the sizing guide was followed this
is unlikely to happen. It may
be some other issue is causing the job to use more memory than expected
and the extra size won’t be needed long term.</p>
</section>
<section id="specific-job-crashes">
<h3>Specific job crashes<a class="headerlink" href="#specific-job-crashes" title="Permalink to this headline">¶</a></h3>
<p>If a job crashes but wasn’t killed by the OS it may be due to some other
constraint in the job. For example, MDE failed when a certain number of
columns were all in one schema. It processed per schema and at a certain
size it reached a hard limit in Postgres.</p>
</section>
<section id="specific-page-loads-slow">
<h3>Specific page loads slow<a class="headerlink" href="#specific-page-loads-slow" title="Permalink to this headline">¶</a></h3>
<p>Sometimes a specific page or area of the product is slow but not others.
It is unlikely that increasing system specs will help here. Usually
that page does not scale well in a particular dimension. For example,
the list of sources page in one instance got slow when the number
of deleted data sources was high. Someone was testing adding and
deleting constantly on it and had a huge DS count compared to usual.</p>
</section>
<section id="intermittent-slowness">
<h3>Intermittent slowness<a class="headerlink" href="#intermittent-slowness" title="Permalink to this headline">¶</a></h3>
<p>These issues are the hardest to troubleshoot but there are a few most common
problems:</p>
<ul class="simple">
<li><p>Compose: sometimes if Connector ran out of memory or stalled, the Compose web app gets stuck waiting to hear back from it and runs out of threads to handle new requests. A lot of Compose performance issues have been fixed in newer versions of Alation.</p></li>
<li><p>High usage of the site, often during a mass training: usually, even
with 200 daily active users, the users do not actively use the UI at exactly the same moment. When there is a concentrated mass usage, the web app may run out of processes to handle the traffic. These processes can be increased to double or x4 the default of 10 and that often solves the problem. You need some spare memory to increase this count but they don’t take too much.</p></li>
<li><p>Large batch jobs stressing disk IO: sometimes a backup job or some other
job is putting stress on the disk and slowing down the experience of users.</p></li>
<li><p>High usage of bulk APIs: currently API usage is handled by the same
resource. Someone may write a script that tries to massively
parallelize some work and this can use up the resources. As a result, users
get a slower experience.</p></li>
</ul>
</section>
<section id="ran-out-of-disk-space">
<h3>Ran out of disk space<a class="headerlink" href="#ran-out-of-disk-space" title="Permalink to this headline">¶</a></h3>
<p>This is usually predictable if you have a graph of disk usage for your
instances. Sometimes it might spike while performing a backup or some
batch job (using a temp file). You should see those spikes in your graph
though and they are regular and predictable then.</p>
<p>The best way to clear space is usually to turn on QLI archival/deletion.
Once processed we don’t need to keep ingested queries. You can set the
retention period. It defaults to on and 6 months retention in most newer
versions of Alation.</p>
</section>
</section>
<section id="configurable-parameters">
<h2>Configurable Parameters<a class="headerlink" href="#configurable-parameters" title="Permalink to this headline">¶</a></h2>
<p>Alation has several parameters that can be configured in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code>
that will allow you to change the amount of memory associated with
different aspects of the system.</p>
<p>For <em>V R5 (5.9.x)</em>, the new configurable parameters
are <code class="docutils literal notranslate"><span class="pre">bulk_insert_SQL_str_length_limit</span></code> and <code class="docutils literal notranslate"><span class="pre">stewardship.curation_progress.ingestion.batch_size</span></code>. For more information on how to configure the values of these parameters,
see  <a class="reference internal" href="../../admins/AdditionalConfiguration/Setbulk_insert_SQL_str_length_limitParameter.html"><span class="doc">Set bulk_insert_SQL_str_length_limit Parameter</span></a>  and <a class="reference internal" href="../../admins/AdditionalConfiguration/SetStewardshipParameter.html"><span class="doc">Set stewardship.curation_progress.ingestion.batch_size Parameter</span></a>.</p>
<p>To change one of these parameters, enter the Alation shell and change
the <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code> value as in the following example.  After changing the
configuration values, you will need to restart part or all of the
Alation system.</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>alation<span class="w"> </span>shell
alation_confelasticsearch.env.es_heap_size<span class="w"> </span>-s<span class="w"> </span>2g
alation_action<span class="w"> </span>restart_alation
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 16%" />
<col style="width: 17%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Guidance</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">connector.ram</span></code></p></td>
<td><p>4g</p></td>
<td><p>RAM allocated
to the Compose
Connector
increase this.</p>
<p>If you don’t
use Hive, the
default 4 GB is
nearly always
enough.</p>
<p>If you use Hive
and have 64 GB+
RAM, increase
this to 8 GB and
more if it
OOMs. We found
that Hive
drivers are not
as RAM
efficient as
other drivers.</p>
</td>
<td><p>If you get OOM
errors in
<code class="docutils literal notranslate"><span class="pre">connector_err.log</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">taskserver.ram</span></code></p></td>
<td><p>4g</p></td>
<td><p>RAM allocated
to the Task
Server (MDE,
QLI, etc)</p></td>
<td><p>If you get OOM
errors in
<code class="docutils literal notranslate"><span class="pre">taskserver_err.log</span></code>
increase this.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">elasticsearch.env.es_heap_size</span></code></p></td>
<td><p>1g</p></td>
<td><p>RAM allocated
to the search
engine</p></td>
<td><p>If you get OOM
errors in
<code class="docutils literal notranslate"><span class="pre">elasticsearch.log</span></code>
increase this.
If you have
over a million
objects in your
catalog
increase this
to 2 GB. If you
have &gt;10
million
objects,
increase to 4 GB.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code></p></td>
<td><p>10</p></td>
<td><p>Number of
processes
handling
requests from
users of the
app</p></td>
<td><p>If you have &gt;
32 GB memory
increase to 20.
You may not
need it but it
doesn’t take
much additional
memory. Note
that each
process has 2
threads so 2x
uwsgi.processes
is the amount
of parallel
requests
supported</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="HighAvailability.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Installing on High Availability (HA) Pair
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="ConfigureHTTPProxyforWebboundTraffic.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />How to Configure Alation to Use HTTP Proxy for All Web-bound Traffic
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/ServerInstallation/SizingGuidelines&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Sizing Guidelines Detail</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#memory">Memory</a><ul>
<li><a class="reference internal" href="#memory-formula">Memory Formula</a></li>
<li><a class="reference internal" href="#minimum-memory-requirements">Minimum Memory Requirements</a></li>
<li><a class="reference internal" href="#scale-dependent-memory-requirements">Scale dependent memory requirements</a><ul>
<li><a class="reference internal" href="#number-of-columns">Number of Columns</a></li>
<li><a class="reference internal" href="#number-of-queriers">Number of Queriers</a></li>
<li><a class="reference internal" href="#monitoring-memory-usage">Monitoring Memory Usage</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cpu">CPU</a></li>
<li><a class="reference internal" href="#disk-space">Disk Space</a><ul>
<li><a class="reference internal" href="#minimum-requirements">Minimum requirements</a><ul>
<li><a class="reference internal" href="#base-requirements">Base requirements</a></li>
<li><a class="reference internal" href="#data-drive-requirements">Data drive requirements</a></li>
<li><a class="reference internal" href="#backup-drive-requirements">Backup drive requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#number-of-queries-ingested">Number of queries ingested</a></li>
<li><a class="reference internal" href="#amount-of-compose-usage">Amount of Compose Usage</a></li>
<li><a class="reference internal" href="#alation-analytics-v2">Alation Analytics V2</a></li>
<li><a class="reference internal" href="#open-connector-framework">Open Connector Framework</a></li>
</ul>
</li>
<li><a class="reference internal" href="#disk-io">Disk IO</a></li>
<li><a class="reference internal" href="#common-problems">Common Problems</a><ul>
<li><a class="reference internal" href="#specific-process-runs-out-of-memory">Specific process runs out of memory</a></li>
<li><a class="reference internal" href="#os-runs-out-of-memory-and-terminates-processes">OS runs out of memory and terminates processes</a></li>
<li><a class="reference internal" href="#specific-job-crashes">Specific job crashes</a></li>
<li><a class="reference internal" href="#specific-page-loads-slow">Specific page loads slow</a></li>
<li><a class="reference internal" href="#intermittent-slowness">Intermittent slowness</a></li>
<li><a class="reference internal" href="#ran-out-of-disk-space">Ran out of disk space</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configurable-parameters">Configurable Parameters</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->