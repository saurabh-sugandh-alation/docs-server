
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Restore OCF Components &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Restore from a Backup" href="index.html"/>
        <link rel="next" title="Restore Alation Analytics V2" href="RestoreAlationAnalytics.html"/>
        <link rel="prev" title="Restore Alation With a Separate Postgres Backup" href="RestoreAlationWithSeparatePostgresBackup.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Update/index.html">Update Alation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Back Up and Restore</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../BackupV1AndV2/index.html">Backup V1 and Backup V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ConfigureBackups/index.html">Configure Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CreateBackupsManually.html">Create Backups Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../FindBackups.html">Find Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../MonitorBackups.html">Monitor Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ManagePostgresBackupsSeparately.html">Manage Postgres Backups Separately</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Restore from a Backup</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="RestoreAlation.html">Restore Alation</a></li>
<li class="toctree-l3"><a class="reference internal" href="RestoreAlationWithSeparatePostgresBackup.html">Restore Alation With a Separate Postgres Backup</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Restore OCF Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="RestoreAlationAnalytics.html">Restore Alation Analytics V2</a></li>
<li class="toctree-l3"><a class="reference internal" href="RestoreAnalytics.html">Restoring Alation Analytics V1</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="../index.html">Back Up and Restore</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Restore from a Backup</a>
    <span class="separator">&gt;</span>
    <span>Restore OCF Components</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="restore-ocf-components">
<h1>Restore OCF Components<a class="headerlink" href="#restore-ocf-components" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<section id="ensure-your-ocf-connectors-are-backed-up">
<h2>Ensure Your OCF Connectors are Backed Up<a class="headerlink" href="#ensure-your-ocf-connectors-are-backed-up" title="Permalink to this headline">¶</a></h2>
<p><em>Applies from release 2021.2</em></p>
<p>These steps require server-side access to Alation.</p>
<p>To check if the installed OCF connector is getting backed up by the Alation backup process, check the <strong>/opt/alation/site/site_data/ocf/connectors/</strong> on the Alation host (path inside the Alation shell).</p>
<p>This directory exists if:</p>
<blockquote>
<div><ul class="simple">
<li><p>An OCF connector was installed on the 2021.2 Alation version (or newer)</p></li>
<li><p>An OCF connector that was installed on a previous version was updated after updating Alation to 2021.2.</p></li>
</ul>
</div></blockquote>
<p>If the directory does not exist, it means that the OCF connectors installed on the host are not getting backed up.</p>
<p>If the directory exists, list the contents of the directory to list the connector source files that are present in the backup path:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
ls<span class="w"> </span>/opt/alation/site/site_data/ocf/connectors/
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<a class="reference internal image-reference" href="../../../_images/OCF_Restore_04.png"><img alt="../../../_images/OCF_Restore_04.png" src="../../../_images/OCF_Restore_04.png" style="width: 500px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The name of the Zip file includes the connector <strong>id</strong>. For example, in the name <strong>connector_1_1621628810</strong>, <strong>1</strong> is the connector id. The sequence of numbers after the id is the timestamp in Unix time.</p>
</div>
<p>You can use the <strong>list</strong> command to view the metadata of the connector with a specific id: <code class="docutils literal notranslate"><span class="pre">alation_ypireti</span> <span class="pre">list</span> <span class="pre">--id</span> <span class="pre">&lt;ID&gt;</span> <span class="pre">--fields</span> <span class="pre">&lt;field1_name&gt;</span> <span class="pre">&lt;field2_name&gt;</span></code>. This command should be run from the Alation shell as user <code class="docutils literal notranslate"><span class="pre">alation</span></code>, for example:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># To enter the shell:</span>
sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
<span class="c1"># To change user to &quot;alation&quot;:</span>
sudo<span class="w"> </span>su<span class="w"> </span>alation
<span class="c1"># To list the metadata of a specific connector</span>
alation_ypireti<span class="w"> </span>list<span class="w"> </span>--id<span class="w"> </span><span class="m">1</span><span class="w"> </span>--fields<span class="w"> </span>id<span class="w"> </span>name<span class="w"> </span>hydra
</pre></div>
</div>
</div></blockquote>
</section>
<section id="restore-ocf-components-after-restoring-an-alation-backup">
<h2>Restore OCF Components After Restoring an Alation Backup<a class="headerlink" href="#restore-ocf-components-after-restoring-an-alation-backup" title="Permalink to this headline">¶</a></h2>
<section id="release-2021-2-and-newer">
<h3>Release 2021.2 and Newer<a class="headerlink" href="#release-2021-2-and-newer" title="Permalink to this headline">¶</a></h3>
<p>Alation Connector Manager is not included into the Alation backup. When you restore Alation from a backup on a clean instance, Alation Connector Manager needs to be re-installed on the host after restoring Alation.</p>
<p>The OCF connectors are included into the backup. When you install or update an OCF connector on an Alation instance, it is automatically added to the backup path at  <strong>/opt/alation/site/site_data/ocf/connectors/</strong> (path inside the Alation shell) and included into the Alation backup.</p>
<p>After you restore Alation from a backup that includes OCF connectors, you can restore the backed up OCF connectors using the <strong>alation_ypireti sync</strong> command.</p>
<p>To restore the OCF system on an instance that was restored from a backup:</p>
<ol class="arabic">
<li><p>SSH to the Alation host where you restored Alation from a backup.</p></li>
<li><p>Install Docker and then install Alation Connector Manager, following the steps for release 2021.2 in <a class="reference internal" href="../../../sources/OpenConnectorFramework/OCFInstallAlationConnectorManager.html"><span class="doc">Install Alation Connector Manager</span></a>. Note that from release 2021.2, it is recommended to install Docker using the <strong>Alation Container Service</strong>.</p></li>
<li><p>After installing and configuring Alation Connector Manager, make sure the <code class="docutils literal notranslate"><span class="pre">agent</span></code> is running:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>ps
</pre></div>
</div>
<p>This command should return the <code class="docutils literal notranslate"><span class="pre">agent</span></code> container:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>docker<span class="w"> </span>ps

CONTAINER<span class="w"> </span>ID<span class="w">   </span>IMAGE<span class="w">   </span>COMMAND<span class="w">   </span>CREATED<span class="w">          </span>STATUS<span class="w">          </span>PORTS<span class="w">   </span>NAMES
e33c5484f846<span class="w">   </span>agent<span class="w">   </span><span class="s2">&quot;agent&quot;</span><span class="w">   </span><span class="m">11</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">   </span>Up<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds<span class="w">               </span>agent
</pre></div>
</div>
<p>Note that no OCF connectors are listed as running because they have not been installed on the restored instance yet.</p>
</div></blockquote>
</li>
<li><p>Run the <strong>alation_ypireti list</strong> command to check which OCF connectors existed on the instance that was backed up and restored. This command should be run from the Alation shell as user <code class="docutils literal notranslate"><span class="pre">alation</span></code>:</p>
<blockquote>
<div><p>4.1. Enter the Alation shell.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</div></blockquote>
<p>4.2. Change the user to <code class="docutils literal notranslate"><span class="pre">alation</span></code>.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>su<span class="w"> </span>alation
</pre></div>
</div>
</div></blockquote>
<p>4.3. Run the following command:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>list<span class="w"> </span>--fields<span class="w"> </span>id<span class="w"> </span>name<span class="w"> </span>hydra
</pre></div>
</div>
</div></blockquote>
<p>At this point, the <strong>list</strong> command will output the <strong>id</strong> and <strong>name</strong> fields but no <code class="docutils literal notranslate"><span class="pre">hydra</span></code> field information. This is expected because the newly installed Connector Manager does not have information about the backed up connector images yet. This is indicative of the state when Alation Connector Manager and the Alation internal database are not synchronized.</p>
<img alt="../../../_images/OCF_Restore_01.png" src="../../../_images/OCF_Restore_01.png" />
</div></blockquote>
</li>
<li><p>Still in the Alation shell and as user <code class="docutils literal notranslate"><span class="pre">alation</span></code>, run the <strong>alation_ypireti sync</strong> command to ensure that Alation and Alation Connector Manager have the same set of connectors:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>sync
</pre></div>
</div>
<p>The <strong>alation_ypireti sync</strong> command first deletes all connector records on Alation Connector Manager and then restores them from the backed-up source files located at <strong>/opt/alation/site/site_data/ocf/connectors/</strong>.</p>
<img alt="../../../_images/OCF_Restore_02.png" src="../../../_images/OCF_Restore_02.png" />
</div></blockquote>
</li>
<li><p>Run the <strong>list</strong> command again to verify that synchronization was successful:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>list<span class="w"> </span>--fields<span class="w"> </span>id<span class="w"> </span>name<span class="w"> </span>hydra
</pre></div>
</div>
<p>Now this command should return the <strong>id</strong>, <strong>name</strong>, and <code class="docutils literal notranslate"><span class="pre">hydra</span></code> fields with Docker container information of the installed connector:</p>
<img alt="../../../_images/OCF_Restore_03.png" src="../../../_images/OCF_Restore_03.png" />
</div></blockquote>
</li>
</ol>
<p>If there are no backup source files found for a connector with a specific id, the <strong>alation_ypireti sync</strong> output will contain a warning to update the connector, for example:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="m">2021</span>-04-16<span class="w"> </span><span class="m">05</span>:23:16,186<span class="w"> </span>-<span class="w"> </span>Ypireti<span class="w"> </span>-<span class="w"> </span>WARNING<span class="w"> </span>No<span class="w"> </span>package<span class="w"> </span>backup<span class="w"> </span>found<span class="w"> </span><span class="k">for</span><span class="w"> </span>connector<span class="w"> </span><span class="m">2</span>.
Please<span class="w"> </span>update<span class="w"> </span>the<span class="w"> </span>connector<span class="w"> </span>manually.
E.g.<span class="w"> </span>alation_ypireti<span class="w"> </span>update<span class="w"> </span>--id<span class="w"> </span><span class="m">2</span><span class="w"> </span>--path<span class="w"> </span>&lt;path_to_connector_zip&gt;
</pre></div>
</div>
</div></blockquote>
<p>In such a case, you need to manually reinstall the connector onto its existing ID (see the steps in <a class="reference internal" href="#releases-2020-3-2020-4-and-2021-1">Releases 2020.3, 2020.4, and 2021.1</a> below).</p>
</section>
<section id="releases-2020-3-2020-4-and-2021-1">
<h3>Releases 2020.3, 2020.4, and 2021.1<a class="headerlink" href="#releases-2020-3-2020-4-and-2021-1" title="Permalink to this headline">¶</a></h3>
<p>OCF components (Alation Connector Manager and OCF connectors) are not included into the Alation backup. When you restore Alation from a backup on a clean instance, OCF components need to be re-installed. The Docker images of the OCF connectors that were installed on the instance that was backed-up need to be installed onto their IDs that already exist in the backup data.</p>
<p>Perform the steps below to restore OCF components after restoring Alation from a backup:</p>
<ol class="arabic">
<li><p>On the Alation host where you restored the backup, install and configure Alation Connector Manager:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../../../sources/OpenConnectorFramework/OCFInstallAlationConnectorManager.html"><span class="doc">Install Alation Connector Manager</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Run the command below to retrieve the IDs of OCF connectors that were installed on the backed-up instance:</p>
<blockquote>
<div><p>2.1. Enter the Alation shell.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</div></blockquote>
<p>2.2. Change the user to <code class="docutils literal notranslate"><span class="pre">alation</span></code>.</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>su<span class="w"> </span>alation
</pre></div>
</div>
</div></blockquote>
<p>2.3. Run the following command:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>list<span class="w"> </span>--fields<span class="w"> </span>id<span class="w"> </span>name<span class="w"> </span>hydra
</pre></div>
</div>
</div></blockquote>
<p>Note that in the this command will only output the connector <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">name</span></code> metadata and no <code class="docutils literal notranslate"><span class="pre">hydra</span></code> field information. It is expected because the connector manager does not have the Docker image yet. This way, you find out which OCF connector needs to be installed onto which ID in the backup:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="m">2020</span>-10-28<span class="w"> </span><span class="m">06</span>:21:18,800<span class="w"> </span>-<span class="w"> </span>Ypireti<span class="w"> </span>-<span class="w"> </span>INFO<span class="w">    </span>Connector<span class="w"> </span><span class="m">1</span><span class="w"> </span>metadata:
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="m">1</span>,
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;Alation&#39;s Tableau Connector&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Place the connector Zip file into a directory on the Alation host that is accessible from the Alation shell, for example, to <strong>data1/tmp</strong>.</p></li>
<li><p>Navigate to this directory on the host, in the Alation shell.</p></li>
<li><p>Un-pack the connector package, for example:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>unzip<span class="w"> </span>alation-oracle-1.0.0.61.zip
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Install the OCF connector Docker image onto its old ID:</p>
<blockquote>
<div><ul>
<li><p><em>Release 2020.3.x</em>:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>--tls-disabled<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--agent<span class="w"> </span>localhost:81<span class="w"> </span>install<span class="w"> </span>./&lt;OCF_connector_name&gt;.img<span class="w"> </span>&lt;ID&gt;
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><em>Release 2020.4.x and newer versions</em>:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>kratos<span class="w"> </span>--subcommand<span class="w"> </span>install<span class="w"> </span>./&lt;OCF_connector_name&gt;.img<span class="w"> </span>&lt;ID&gt;
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Example</strong>:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>kratos<span class="w"> </span>--subcommand<span class="w"> </span>install<span class="w"> </span>./alation-oracle-ocf:1.0.0.61.img<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><p>Verify that the installation was successful:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>alation_ypireti<span class="w"> </span>list<span class="w"> </span>--fields<span class="w"> </span>id<span class="w"> </span>name<span class="w"> </span>hydra
</pre></div>
</div>
<p>This command should return the <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, and <code class="docutils literal notranslate"><span class="pre">hydra</span></code> fields with Docker container information of the installed connector, for example:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="m">2020</span>-10-28<span class="w"> </span><span class="m">06</span>:39:50,245<span class="w"> </span>-<span class="w"> </span>Ypireti<span class="w"> </span>-<span class="w"> </span>INFO<span class="w">    </span>Connector<span class="w"> </span><span class="m">1</span><span class="w"> </span>metadata:
<span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="m">1</span>,
<span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;Alation&#39;s Tableau Connector&quot;</span>,
<span class="w">  </span><span class="s2">&quot;hydra&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;port&quot;</span>:<span class="w"> </span><span class="m">10001</span>,
<span class="w">  </span><span class="s2">&quot;containerName&quot;</span>:<span class="w"> </span><span class="s2">&quot;connector_1&quot;</span>,
<span class="w">  </span><span class="s2">&quot;imageName&quot;</span>:<span class="w"> </span><span class="s2">&quot;connector_1&quot;</span>,
<span class="w">  </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="m">1</span>,
<span class="w">  </span><span class="s2">&quot;containerID&quot;</span>:<span class="w"> </span><span class="s2">&quot;3e8fca3db28a5adcbb1401bdafddbc9517af2e08fa5db5f4a0398c99a928b56e&quot;</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>In the Alation Catalog, go to the Settings page of the source that uses the restored OCF connector and test the connection.</p></li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="RestoreAlationWithSeparatePostgresBackup.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Restore Alation With a Separate Postgres Backup
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="RestoreAlationAnalytics.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Restore Alation Analytics V2
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on installconfig/BackupandRestore/RestoreFromBackup/RestoreOCFComponents&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Restore OCF Components</a><ul>
<li><a class="reference internal" href="#ensure-your-ocf-connectors-are-backed-up">Ensure Your OCF Connectors are Backed Up</a></li>
<li><a class="reference internal" href="#restore-ocf-components-after-restoring-an-alation-backup">Restore OCF Components After Restoring an Alation Backup</a><ul>
<li><a class="reference internal" href="#release-2021-2-and-newer">Release 2021.2 and Newer</a></li>
<li><a class="reference internal" href="#releases-2020-3-2020-4-and-2021-1">Releases 2020.3, 2020.4, and 2021.1</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->