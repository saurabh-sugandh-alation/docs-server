
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Troubleshoot the Agent &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Alation Agent" href="index.html"/>
        <link rel="next" title="Alation Agent Version History" href="AlationAgentVersionHistory.html"/>
        <link rel="prev" title="Start and Stop the Agent" href="StartingAndStoppingTheAgent.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Alation Agent</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="AgentReleaseNotes.html">Agent Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="InstallingTheAlationAgent.html">Install the Alation Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConnectingTheAgentToDataSources.html">Connect the Agent to Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="ManagingConnectors.html">Manage Connectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="WorkingWithTheAgentsCertificates.html">Work with the Agent’s Certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpgradingTheAgent.html">Upgrade the Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateAgentDnsAddress.html">Update the Agent’s Address Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="DeletingAndReconnectingTheAgentInAlation.html">Delete and Reconnect the Agent in Alation</a></li>
<li class="toctree-l2"><a class="reference internal" href="UninstallingAndReinstallingTheAgentSoftware.html">Uninstall and Reinstall the Agent Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="StartingAndStoppingTheAgent.html">Start and Stop the Agent</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Troubleshoot the Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationAgentVersionHistory.html">Alation Agent Version History</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Alation Agent</a>
    <span class="separator">&gt;</span>
    <span>Troubleshoot the Agent</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="troubleshoot-the-agent">
<h1>Troubleshoot the Agent<a class="headerlink" href="#troubleshoot-the-agent" title="Permalink to this headline">¶</a></h1>
<p class="cloud-label hover-text">Alation Cloud Service <span class="tooltip-text">Applies to Alation Cloud Service instances of Alation</span></p>
<p>This section will help you troubleshoot issues with the Agent. Issues may include:</p>
<ul class="simple">
<li><p>Agent is in a “Disconnected” status.</p></li>
<li><p>Agent connectors are in an “Unknown” status.</p></li>
<li><p>Error when installing new connectors.</p></li>
</ul>
<p>If network interruptions ever break the connection between the Agent and your Alation Cloud instance, the Agent will attempt to reconnect. It keeps trying to connect using an exponential backoff algorithm. Once the Agent can connect to your Alation Cloud instance again, it will reauthenticate and reestablish a secure connection.</p>
<p>Any jobs, such as metadata extraction, that were underway will automatically restart as long as the connection is reestablished within 30 seconds. If it takes longer than that, you’ll have to restart the job manually.</p>
<section id="diagnose-agent-connectivity-problems">
<span id="id1"></span><h2>Diagnose Agent Connectivity Problems<a class="headerlink" href="#diagnose-agent-connectivity-problems" title="Permalink to this headline">¶</a></h2>
<p><em>Applies to Agent versions 1.5.0.2541 and later</em></p>
<p>Alation Agent versions 1.5.0.2541 and later come packaged with a suite of diagnostics that you can use to troubleshoot connectivity issues when deploying the Agent. These checks include (but are not limited to):</p>
<ul class="simple">
<li><p>Operating system, memory, and CPU compatibility.</p></li>
<li><p>Configuration of the Agent.</p></li>
<li><p>Expired or revoked security certificates.</p></li>
<li><p>Issues related to DNS resolution and establishment of a TCP connection to Alation Cloud Service.</p></li>
</ul>
<p>To use the diagnostic tools, log into the Agent host machine. Some of the most useful commands are shown below.</p>
<p>To get help information about the diagnostics tool:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span><span class="nb">help</span>
</pre></div>
</div>
<p>To save the logs for all Agent <a class="reference internal" href="index.html#agent-architecture"><span class="std std-ref">components</span></a>, including connectors, to the <strong>/tmp</strong> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span>logs<span class="w"> </span>-o<span class="w"> </span>/tmp
</pre></div>
</div>
<p>To get a list of available diagnostics:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span>list
</pre></div>
</div>
<p>To run all diagnostics and save the results to a file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span>run<span class="w"> </span>&gt;&gt;<span class="w"> </span>agent_diagnostics.yaml
</pre></div>
</div>
<p>You can send the resulting file, which includes the output logs of the diagnostics, to Alation Support to enable faster diagnosis of Agent connectivity problems.</p>
</section>
<section id="check-the-system-requirements">
<h2>Check the System Requirements<a class="headerlink" href="#check-the-system-requirements" title="Permalink to this headline">¶</a></h2>
<p>Verify that the Agent’s host machine meets the <a class="reference internal" href="index.html#agent-system-requirements"><span class="std std-ref">Agent System Requirements</span></a>.</p>
</section>
<section id="check-the-agent-version">
<h2>Check the Agent Version<a class="headerlink" href="#check-the-agent-version" title="Permalink to this headline">¶</a></h2>
<p>Ensure that you have installed the latest version of the Agent.</p>
<ol class="arabic">
<li><p>On the Agent host machine, check the installed Agent’s version by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>hydra<span class="w"> </span>version
</pre></div>
</div>
<p>The version number will be in the first line of the output.</p>
</li>
<li><p>Go to the <a class="reference external" href="https://customerportal.alationdata.com/agents/">Alation Customer Portal</a>. If prompted, log in.</p></li>
<li><p>On the Alation Customer Portal, check the latest version number under the <strong>Version</strong> column. If it’s newer than the Agent you have installed, <a class="reference internal" href="UpgradingTheAgent.html"><span class="doc">upgrade the Agent</span></a>.</p></li>
</ol>
</section>
<section id="check-the-agents-status">
<span id="check-agent-status"></span><h2>Check the Agent’s Status<a class="headerlink" href="#check-the-agents-status" title="Permalink to this headline">¶</a></h2>
<p>As a troubleshooting step, or when starting and stopping the Agent, you may want to check the Agent’s status.</p>
<section id="agent-status-in-alation">
<h3>Agent Status in Alation<a class="headerlink" href="#agent-status-in-alation" title="Permalink to this headline">¶</a></h3>
<p>In Alation, you can check the Agent’s connection status by visiting <strong>Admin Settings &gt; Manage Connectors &gt; Agents Dashboard</strong>. The Agent’s <strong>Status</strong> tells you if your Alation Cloud instance can reach the Agent’s <em>reverse proxy</em> <a class="reference internal" href="index.html#agent-architecture"><span class="std std-ref">component</span></a>. This does not necessarily indicate that the Alation Connector Manager component or the connectors are running.</p>
</section>
<section id="agent-status-on-the-agents-machine">
<span id="check-agent-status-on-agent-machine"></span><h3>Agent Status on the Agent’s Machine<a class="headerlink" href="#agent-status-on-the-agents-machine" title="Permalink to this headline">¶</a></h3>
<p>You can check the status of the Agent’s individual components on the Agent’s host machine. To check the status, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>ps
</pre></div>
</div>
<p>This command will output a list of running Docker containers. A normally functioning Agent will show several containers:</p>
<ul>
<li><p><strong>agent:</strong> This is the Alation Connector Manager component of the Agent.</p></li>
<li><p><strong>proxy:</strong> This is the reverse proxy component of the Agent.</p></li>
<li><p><strong>connector_[n]:</strong> Each connector will be listed with <strong>n</strong> representing the connector’s ID.</p>
<blockquote>
<div><img alt="../../_images/Agent_DockerContainerList.png" src="../../_images/Agent_DockerContainerList.png" />
<p>You can correlate the ID with the connectors on the <strong>Connectors Dashboard</strong> in Alation by clicking on a connector and viewing its URL.</p>
<img alt="../../_images/Agent_ConnectorID.png" src="../../_images/Agent_ConnectorID.png" />
</div></blockquote>
</li>
</ul>
<p>If any components are missing from the list, that means they are not running. You can try to start the components back up by running <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">hydra</span> <span class="pre">restart</span></code> on the Agent machine. Then run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">ps</span></code> again to check the status.</p>
</section>
</section>
<section id="check-the-certificates">
<h2>Check the Certificates<a class="headerlink" href="#check-the-certificates" title="Permalink to this headline">¶</a></h2>
<p>If the Agent shows as disconnected, it may be that the Agent’s certificates have expired or been revoked. The certificates expire automatically after one year.</p>
<p>To check if the Agent has valid certificates, see <a class="reference internal" href="WorkingWithTheAgentsCertificates.html#viewing-the-certificates-expiration-date"><span class="std std-ref">View the Certificates’ Expiration Date</span></a>. If the Agent does not have valid certificates, see <a class="reference internal" href="WorkingWithTheAgentsCertificates.html#renewing-agent-certificates"><span class="std std-ref">Renew the Certificates</span></a> to reestablish the connection. Do not add a new Agent, as doing so will not solve problems with certificates and may cause additional problems.</p>
</section>
<section id="update-the-agents-address-configuration">
<h2>Update the Agent’s Address Configuration<a class="headerlink" href="#update-the-agents-address-configuration" title="Permalink to this headline">¶</a></h2>
<p class="cloud-label hover-text">Alation Cloud Service <span class="tooltip-text">Applies to Alation Cloud Service instances of Alation</span></p>
<p>You may need to update the Agent’s address configuration if the Agent is in a disconnected status. This may happen if the Agent was set up incorrectly or if you’re an Alation Cloud Service customer who’s been upgraded to the cloud native architecture (available starting in 2022.4).</p>
<p>To update the Agent’s address configuration, first you need to get the correct <em>connectivity endpoint</em> of your Alation Cloud Service instance. Then you need to enter the endpoint into the Agent’s configuration file. This process is described in detail below.</p>
<section id="get-the-alation-cloud-service-connectivity-endpoint">
<h3>Get the Alation Cloud Service Connectivity Endpoint<a class="headerlink" href="#get-the-alation-cloud-service-connectivity-endpoint" title="Permalink to this headline">¶</a></h3>
<p>You can get the Alation Cloud Service connectivity endpoint by starting, but not finishing, the Agent installation process within Alation:</p>
<ol class="arabic">
<li><p>In Alation, click on the <strong>Settings</strong> gear icon in the top right corner. This opens the <strong>Admin Settings</strong> page.</p>
<img alt="../../_images/TopNavigationBar_Gear.png" src="../../_images/TopNavigationBar_Gear.png" />
</li>
<li><p>Under the <strong>Server Admin</strong> section, click <strong>Manage Connectors</strong>.</p>
<img alt="../../_images/AdminSettings_ManageConnectors.png" class="with-border" src="../../_images/AdminSettings_ManageConnectors.png" />
</li>
<li><p>Click the <strong>Agents</strong> tab. The <strong>Agents Dashboard</strong> appears.</p></li>
<li><p>Click the <strong>Add New Agent</strong> button.</p>
<img alt="../../_images/Agent_AddNewAgentButton.png" class="with-border" src="../../_images/Agent_AddNewAgentButton.png" />
<p>The <strong>Add New Agent</strong> dialog will appear.</p>
</li>
<li><p>The first step of the installation process will show connectivity endpoint between quotes on the <code class="docutils literal notranslate"><span class="pre">address</span></code> line.</p>
<img alt="../../_images/Agent_AddNewAgent_Install_Address.png" class="with-border" src="../../_images/Agent_AddNewAgent_Install_Address.png" />
</li>
<li><p>Save the connectivity endpoint in a secure location for later use. Then click the <strong>X</strong> button to exit the <strong>Add New Agent</strong> dialog. (You should not install or reinstall an Agent now.)</p></li>
</ol>
</section>
<section id="allow-the-connectivity-endpoint">
<h3>Allow the Connectivity Endpoint<a class="headerlink" href="#allow-the-connectivity-endpoint" title="Permalink to this headline">¶</a></h3>
<p>If your organization uses a Web Application Firewall (WAF), inform your firewall admin to allow the Alation Cloud Service connectivity endpoint to pass through.</p>
</section>
<section id="edit-the-agent-configuration-file">
<h3>Edit the Agent Configuration File<a class="headerlink" href="#edit-the-agent-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>Now that you have the correct connectivity endpoint of your Alation Cloud Service instance, you need to enter the address into the Agent’s configuration file.</p>
<ol class="arabic">
<li><p>The Agent configuration file is located on the Agent host machine at <strong>/etc/hydra/hydra.toml</strong>. Edit the file using your preferred text editor. You may need to use sudo privileges.</p></li>
<li><p>In <strong>hydra.toml</strong>, look for the <code class="docutils literal notranslate"><span class="pre">address</span></code> line. Replace the address value inside the quotation marks with the Alation Cloud Service connectivity endpoint you obtained earlier. If the address is already correct, you don’t need to do anything else.</p></li>
<li><p>Restart the agent by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">hydra</span> <span class="n">restart</span>
</pre></div>
</div>
</li>
<li><p>In Alation, return to the Agents Dashboard and verify that the Agent is now connected to Alation.</p></li>
</ol>
</section>
</section>
<section id="check-agent-error-messages">
<h2>Check Agent Error Messages<a class="headerlink" href="#check-agent-error-messages" title="Permalink to this headline">¶</a></h2>
<p>To view Agent error messages, run the following command on the Agent’s host machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>hydra.service
</pre></div>
</div>
</section>
<section id="check-logs">
<h2>Check Logs<a class="headerlink" href="#check-logs" title="Permalink to this headline">¶</a></h2>
<p>Each <a class="reference internal" href="index.html#agent-architecture"><span class="std std-ref">component</span></a> of the Agent writes its own logs on the Agent host machine. Each connector that’s installed on the Agent also has its own logs. On the Agent machine, you can get an archive of all logs or check the logs for each component and connector separately. Connector logs are also available directly in Alation.</p>
<section id="all-logs">
<h3>All Logs<a class="headerlink" href="#all-logs" title="Permalink to this headline">¶</a></h3>
<p>You can get an archive of all Agent component logs, including connector logs, using the Agent diagnostics tool on the Agent machine.</p>
<p>To save all Agent logs to the current working directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span>logs
</pre></div>
</div>
<p>To save all Agent logs to a specified directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kratos<span class="w"> </span>diagnostics<span class="w"> </span>logs<span class="w"> </span>-o<span class="w"> </span>/tmp
</pre></div>
</div>
</section>
<section id="agent-component-logs">
<h3>Agent Component Logs<a class="headerlink" href="#agent-component-logs" title="Permalink to this headline">¶</a></h3>
<p>To check the Agent’s logs, you’ll need to know the name of the Docker container for the <a class="reference internal" href="index.html#agent-architecture"><span class="std std-ref">component</span></a> you’re checking. To get the names of the containers, run the following command on the Agent’s host machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>docker<span class="w"> </span>ps
</pre></div>
</div>
<p>In the output, look under the <strong>NAMES</strong> column.</p>
<ul>
<li><p><strong>agent:</strong> This is the Alation Connector Manager component of the Agent.</p></li>
<li><p><strong>proxy:</strong> This is the reverse proxy component of the Agent.</p></li>
<li><p><strong>connector_[n]:</strong> Each connector will be listed with <strong>n</strong> representing the connector’s ID.</p>
<blockquote>
<div><img alt="../../_images/Agent_DockerContainerList.png" src="../../_images/Agent_DockerContainerList.png" />
<p>You can correlate the ID with the connectors on the <strong>Connectors Dashboard</strong> in Alation by clicking on a connector and viewing its URL.</p>
<img alt="../../_images/Agent_ConnectorID.png" src="../../_images/Agent_ConnectorID.png" />
</div></blockquote>
</li>
</ul>
<p>Access the logs using the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span></code> command followed by the name of the container. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># tail logs for Alation Connector Manager component</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>agent
<span class="c1"># tail logs for reverse proxy component</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>proxy
<span class="c1"># save logs to a file</span>
docker<span class="w"> </span>logs<span class="w"> </span>agent<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="w"> </span>agent.logs<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
docker<span class="w"> </span>logs<span class="w"> </span>proxy<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="w"> </span>agent.logs<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
</div>
</section>
<section id="connector-logs">
<h3>Connector Logs<a class="headerlink" href="#connector-logs" title="Permalink to this headline">¶</a></h3>
<p>Each OCF connector has logs that record information about actions such as metadata extraction and query log ingestion. Logs for OCF connectors installed on the Agent are available from the <strong>Connectors Dashboard</strong>. The <strong>Logs</strong> area displays seven days or 1,000 lines of logs. You must be a Server Admin to see the Connectors Dashboard.</p>
<p>To view OCF connector logs in Alation:</p>
<ol class="arabic">
<li><p>In Alation, click on the <strong>Settings</strong> gear icon in the top right corner. This opens the <strong>Admin Settings</strong> page.</p>
<img alt="../../_images/TopNavigationBar_Gear.png" src="../../_images/TopNavigationBar_Gear.png" />
</li>
<li><p>Under the <strong>Server Admin</strong> section, click <strong>Manage Connectors</strong>.</p>
<img alt="../../_images/AdminSettings_ManageConnectors.png" class="with-border" src="../../_images/AdminSettings_ManageConnectors.png" />
</li>
<li><p>Click the connector whose logs you want to see.</p></li>
<li><p>Choose whether you want to see <strong>Connector Logs</strong> or <strong>System Logs</strong>.</p>
<img alt="../../_images/OCF_ConnectorLogs.png" src="../../_images/OCF_ConnectorLogs.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The option to download connector logs is not supported for Agent connectors.</p>
</div>
</li>
</ol>
<p>To view OCF connector logs on the Agent’s host machine:</p>
<ol class="arabic">
<li><p>Get the ID of the connector by running <code class="docutils literal notranslate"><span class="pre">kratos</span> <span class="pre">list</span></code> and looking for the “id” field. Or run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">ps</span></code> and look for the number following the underscore in the container name.</p></li>
<li><p>Use the commands below to work with the connector logs as desired:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tail logs</span>
kratos<span class="w"> </span>tail<span class="w"> </span>&lt;ID&gt;

<span class="c1"># Get full logs</span>
kratos<span class="w"> </span>logs<span class="w"> </span>&lt;ID&gt;

<span class="c1"># Get logs from a specific date</span>
kratos<span class="w"> </span>logs<span class="w"> </span>--since<span class="w"> </span><span class="m">2020</span>-08-15<span class="w"> </span>&lt;ID&gt;

<span class="c1"># Redirect logs to a file</span>
kratos<span class="w"> </span>logs<span class="w"> </span>&lt;ID&gt;<span class="w"> </span>&gt;<span class="w"> </span>connector_3.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="StartingAndStoppingTheAgent.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Start and Stop the Agent
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="AlationAgentVersionHistory.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Alation Agent Version History
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on cloud/AlationAgent/TroubleshootingTheAgent&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Troubleshoot the Agent</a><ul>
<li><a class="reference internal" href="#diagnose-agent-connectivity-problems">Diagnose Agent Connectivity Problems</a></li>
<li><a class="reference internal" href="#check-the-system-requirements">Check the System Requirements</a></li>
<li><a class="reference internal" href="#check-the-agent-version">Check the Agent Version</a></li>
<li><a class="reference internal" href="#check-the-agents-status">Check the Agent’s Status</a><ul>
<li><a class="reference internal" href="#agent-status-in-alation">Agent Status in Alation</a></li>
<li><a class="reference internal" href="#agent-status-on-the-agents-machine">Agent Status on the Agent’s Machine</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-the-certificates">Check the Certificates</a></li>
<li><a class="reference internal" href="#update-the-agents-address-configuration">Update the Agent’s Address Configuration</a><ul>
<li><a class="reference internal" href="#get-the-alation-cloud-service-connectivity-endpoint">Get the Alation Cloud Service Connectivity Endpoint</a></li>
<li><a class="reference internal" href="#allow-the-connectivity-endpoint">Allow the Connectivity Endpoint</a></li>
<li><a class="reference internal" href="#edit-the-agent-configuration-file">Edit the Agent Configuration File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-agent-error-messages">Check Agent Error Messages</a></li>
<li><a class="reference internal" href="#check-logs">Check Logs</a><ul>
<li><a class="reference internal" href="#all-logs">All Logs</a></li>
<li><a class="reference internal" href="#agent-component-logs">Agent Component Logs</a></li>
<li><a class="reference internal" href="#connector-logs">Connector Logs</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->