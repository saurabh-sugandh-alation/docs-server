
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Sampling and Profiling &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Custom DB" href="index.html"/>
        <link rel="next" title="QLI From Custom DB" href="QLIFromCustomDB.html"/>
        <link rel="prev" title="Guidelines for Creating Queries for MDE" href="GuidelinesForMDEQueries.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Custom DB</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="AddCustomDrivers.html">Add Custom Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="CDataDrivers.html">CData Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="DriverFixer.html">Driver Fixer</a></li>
<li class="toctree-l2"><a class="reference internal" href="AddCustomDBtoAlation.html">Add Custom DB to Alation</a></li>
<li class="toctree-l2"><a class="reference internal" href="MDEFromCustomDB.html">Metadata Extraction From Custom DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="GuidelinesForMDEQueries.html">Guidelines for Creating Queries for MDE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sampling and Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="QLIFromCustomDB.html">QLI From Custom DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="FileBasedQLICustomDB.html">File-Based Query Log Ingestion</a></li>
<li class="toctree-l2"><a class="reference internal" href="ViewBasedQLICustomDB.html">View-Based QLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="SQLQueryBasedQLICustomDB.html">SQL Query QLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="AWSAthena.html">Amazon Athena</a></li>
<li class="toctree-l2"><a class="reference internal" href="UpdateSimbaJDBCDriverForAthenaToSupportSSO.html">Update Simba JDBC Driver for Amazon Athena to Support SSO</a></li>
<li class="toctree-l2"><a class="reference internal" href="AWSDynamoDB.html">Amazon DynamoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="AzureCosmosDB.html">Azure Cosmos DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="AzureDW.html">Azure Data Warehouse (Azure SQL DW)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfluentKafka.html">Confluent Kafka</a></li>
<li class="toctree-l2"><a class="reference internal" href="DatabricksforCustomDB.html">Databricks for Custom DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="DatabricksAzure.html">Databricks Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="DatabricksAzureOAuthForCompose.html">Azure Databricks: Configure SSO through OAuth for Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="Denodo.html">Denodo</a></li>
<li class="toctree-l2"><a class="reference internal" href="Elasticsearch.html">Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="EMRSparkSQL.html">EMR SparkSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="EMRPrestoWithAWSGlueAsMetastore.html">EMR Presto on Hive with AWS Glue as Metastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="GCPDatabricks.html">GCP Databricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="GitHub.html">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="MariaDB.html">MariaDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="MarkLogic.html">MarkLogic</a></li>
<li class="toctree-l2"><a class="reference internal" href="MongoDB.html">MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="MongoDBAtlas.html">MongoDB Atlas</a></li>
<li class="toctree-l2"><a class="reference internal" href="NetSuite.html">NetSuite</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parquet.html">Parquet (Amazon S3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Salesforce.html">Salesforce</a></li>
<li class="toctree-l2"><a class="reference internal" href="Servicenow.html">ServiceNow</a></li>
<li class="toctree-l2"><a class="reference internal" href="Splunk.html">Splunk</a></li>
<li class="toctree-l2"><a class="reference internal" href="SSAS.html">SQL Server Analysis Service (SSAS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="StarburstEnterprisePresto.html">Starburst Enterprise (Presto)</a></li>
<li class="toctree-l2"><a class="reference internal" href="StarburstEnterpriseTrino.html">Starburst Enterprise (Trino)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReferenceForQueryBasedMDE.html">Example Queries for Query-Based MDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReferenceFileBasedQLI.html">Example JSONs for File-Based QLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="ToubleshootingForCDataDataSources.html">Troubleshooting for CData Data Sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Custom DB</a>
    <span class="separator">&gt;</span>
    <span>Sampling and Profiling</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="sampling-and-profiling">
<h1>Sampling and Profiling<a class="headerlink" href="#sampling-and-profiling" title="Permalink to this headline">¶</a></h1>
<section id="sampling">
<span id="sampling-profiling-sampling"></span><h2>Sampling<a class="headerlink" href="#sampling" title="Permalink to this headline">¶</a></h2>
<p>Sampling is a data source operation that selects a sample of 10,000 rows from each table in the database to give catalog users a quick preview of the data content on the Table and Column catalog pages.</p>
<p>For Custom DB, Alation supports table Sampling based on default or custom queries:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Default query-based Sampling</strong> runs a default SELECT query against all tables selected for the Sampling operation:</p></li>
<li><p><strong>Custom query-based Sampling</strong> is supported for Tables from release 2020.3. It allows overriding the default query with a custom query for individual Table objects.</p></li>
</ul>
</div></blockquote>
<p>The Sampling operation is available by default. To take advantage of deeper Column Profiling, enable <strong>Profiling V2</strong> (available from 2020.3). See <a class="reference internal" href="#profiling-v2">Profiling V2</a>.</p>
<p>To add a sample of a Table or Column to the catalog:</p>
<ol class="arabic simple">
<li><p>Configure Sampling in the data source Settings page: <a class="reference internal" href="#configure-sampling">Configure Sampling</a></p></li>
<li><p>Run bulk-sampling of multiple Tables from the Settings: <a class="reference internal" href="#data-profiling-sampling">Data Profiling/Sampling</a></p></li>
<li><p>Run Sampling for individual Tables and Columns on their respective catalog pages.</p></li>
</ol>
<section id="configure-sampling">
<h3>Configure Sampling<a class="headerlink" href="#configure-sampling" title="Permalink to this headline">¶</a></h3>
<p>On the Custom DB Settings page, parameters for Sampling can be found on 3 of the Settings tabs:</p>
<blockquote>
<div><ul>
<li><p><a class="reference internal" href="#per-object-parameters">Per-Object Parameters</a></p>
<blockquote>
<div><p>Define parameters for Sampling on the level of specific objects:</p>
<blockquote>
<div><ul class="simple">
<li><p>select specific Tables to be sampled;</p></li>
<li><p>define if views should be skipped during profiling;</p></li>
<li><p>define the number of sample rows or sample values to be stored in the catalog;</p></li>
<li><p>specify a custom query to sample individual Tables.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#custom-settings">Custom Settings</a></p>
<blockquote>
<div><ul class="simple">
<li><p>Specify a <strong>Limit Query Template</strong> (available from release 2020.3) to limit the sample size.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#data-profiling-sampling">Data Profiling/Sampling</a></p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>In releases before 2021.1, this tab is named <strong>Data Profiling</strong>.</p>
<p>From release 2021.1, this tab is named <strong>Data Sampling</strong>.</p>
</div>
<ul class="simple">
<li><p>Set the number of tables to sample in each schema and launch the Sampling job. The Sampling job triggered from the Data Profiling/Sampling tab samples multiple objects at once.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Sampling of individual Tables and Columns</p>
<blockquote>
<div><p>Individual Table samples can be run on the <strong>Samples</strong> tab of a Table object catalog page. Individual Columns profiles can be run on the <strong>Overview</strong> tab of a Column object catalog page.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Depending on the configuration you wish to apply, you may need to modify settings on all three tabs before launching the Sampling job:</p>
<ol class="arabic simple">
<li><p>Start with setting the <strong>Limit Query Template</strong> on the <strong>Custom Settings</strong> tab.</p></li>
<li><p>Then specify parameters on the <strong>Per-Objects Parameters</strong> tab: select specific objects to profile and add custom queries for sampling individual Tables.</p></li>
<li><p>And lastly, move to the <strong>Data Profiling</strong> or <strong>Data Sampling</strong> tab: schedule the Sampling job, select the number of Tables, and perform on-demand of multiple objects.</p></li>
</ol>
</section>
</section>
<section id="profiling-v2">
<span id="profilingv2-label"></span><h2>Profiling V2<a class="headerlink" href="#profiling-v2" title="Permalink to this headline">¶</a></h2>
<p>Column Profiling is a data source operation that retrieves a data sample based on the default or custom query and performs statistical calculations on this sample. Column Profiling results can be represented on the <strong>Frequency Distribution</strong> chart for a Column.</p>
<p>Column Profiling and its additional features can be enabled using <strong>alation_conf</strong> and the dedicated feature flags:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">alation.feature_flags.enable_profiling_v2</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Default</strong>: False</p></li>
<li><p><strong>Available from version</strong>: 2020.3</p></li>
<li><p><strong>Description</strong>: Enables the Profiling V2 feature (Column Profiling for Custom DB)</p></li>
<li><p><strong>Requires a restart</strong>: after changing the value, restart Alation Supervisor with <code class="docutils literal notranslate"><span class="pre">alation_supervisor</span> <span class="pre">restart</span> <span class="pre">all</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.show_distribution_chart</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Default</strong>: False</p></li>
<li><p><strong>Available from version</strong>: 2021.1</p></li>
<li><p><strong>Description</strong>: Enables the display of the Frequency Distribution chart on the catalog pages of Column objects</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.max_unbatched_values</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Default</strong>: 200</p></li>
<li><p><strong>Available from version</strong>: 2021.1</p></li>
<li><p><strong>Description</strong>: Sets the min number of unique values in a column for Alation to begin to group ranges of values for the Frequency Distribution chart</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.batch_count</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Default</strong>: 50</p></li>
<li><p><strong>Available from version</strong>: 2021.1</p></li>
<li><p><strong>Description</strong>: sets the number of ranges to be displayed on the Frequency Distribution chart</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<section id="configure-profiling">
<h3>Configure Profiling<a class="headerlink" href="#configure-profiling" title="Permalink to this headline">¶</a></h3>
<p>When Profiling V2 is turned on, there will be additional configuration options for Column Profiling in the Custom DB Settings:</p>
<blockquote>
<div><ul>
<li><p><a class="reference internal" href="#per-object-parameters">Per-Object Parameters</a></p>
<blockquote>
<div><ul class="simple">
<li><p>Ability to specify custom queries for profiling individual Columns</p></li>
</ul>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#custom-settings">Custom Settings</a></p>
<blockquote>
<div><ul class="simple">
<li><p>Ability to customize the default profiling queries for all Columns (<em>available from release 2020.4</em>)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
</section>
<section id="custom-settings">
<h2>Custom Settings<a class="headerlink" href="#custom-settings" title="Permalink to this headline">¶</a></h2>
<section id="custom-settings-limit-query-template">
<span id="sampling-profiling-limit-query-template"></span><h3>Custom Settings &gt; Limit Query Template<a class="headerlink" href="#custom-settings-limit-query-template" title="Permalink to this headline">¶</a></h3>
<p><em>Available from release 2020.3</em></p>
<p>By default, when sampling tables in the Custom DB source type, Alation attempts to read all rows in a table and then truncate the result to 10,000. This operation can put an excessive load on the database when sampled tables contain tens or hundreds of thousands of rows or more. To limit the number of sampled rows to 10,000 from the start, you can write and apply a <strong>Limit Query Template</strong>.</p>
<p>The <strong>Limit Query Template</strong> limits the number of rows that Alation extracts from the database for Table Sampling. Instead of extracting all and then truncating the results to 10,000, Alation will extract 10,000 rows only.</p>
<p>The Limit Query Template must observe the SQL conventions of the database you are creating it for. On the functional level, it is a templatized version of the SELECT statement with the LIMIT or equivalent clause.</p>
<p>To write a Limit Query Template, represent the SELECT statement with LIMIT (or its equivalent) as a template that includes the following 4 keywords:</p>
<ul class="simple">
<li><p><strong>COLUMNS</strong>: placeholder keyword for column names in the SELECT statement</p></li>
<li><p><strong>TABLE_NAME</strong>: placeholder keyword for the table name in the SELECT statement</p></li>
<li><p><strong>FILTER_CLAUSES</strong>: placeholder keyword for the SQL filter clause</p></li>
<li><p><strong>ROW_SIZE</strong>: placeholder keyword for the LIMIT value.</p></li>
</ul>
<p>The 4 keywords are expected by Alation and are required to be present in the template.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li><p>Database systems which support LIMIT (e.g. Databricks Azure, Denodo):</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>COLUMNS<span class="w"> </span>FROM<span class="w"> </span>TABLE_NAME<span class="w"> </span>FILTER_CLAUSES<span class="w"> </span>LIMIT<span class="w"> </span>ROW_SIZE
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Database systems which support SELECT TOP (e.g. SQL Server):</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>TOP<span class="w"> </span>ROW_SIZE<span class="w"> </span>COLUMNS<span class="w"> </span>FROM<span class="w"> </span>TABLE_NAME<span class="w"> </span>FILTER_CLAUSES
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Database systems which support FETCH FIRST &lt;N&gt; ROWS ONLY (e.g. DB2)</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>COLUMNS<span class="w"> </span>FROM<span class="w"> </span>TABLE_NAME<span class="w"> </span>FILTER_CLAUSES<span class="w"> </span>FETCH<span class="w"> </span>FIRST<span class="w"> </span>ROW_SIZE<span class="w"> </span>ROWS<span class="w"> </span>ONLY
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Database systems which support ROWNUM (e.g. Oracle):</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT<span class="w"> </span>*<span class="w"> </span>FROM<span class="w"> </span><span class="o">(</span><span class="w"> </span>SELECT<span class="w"> </span>COLUMNS<span class="w"> </span>FROM<span class="w"> </span>TABLE_NAME<span class="w"> </span>FILTER_CLAUSES<span class="w"> </span><span class="o">)</span><span class="w"> </span>WHERE<span class="w"> </span>ROWNUM<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span>ROW_SIZE
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p><strong>Save</strong> the template after specifying it in the field:</p>
<blockquote>
<div><img alt="../../_images/DS_CustomDB29.png" src="../../_images/DS_CustomDB29.png" />
</div></blockquote>
<section id="test-the-limit-query-template">
<h4>Test the Limit Query Template<a class="headerlink" href="#test-the-limit-query-template" title="Permalink to this headline">¶</a></h4>
<p>It is recommended to test your Limit Query Template on one object before you run Profiling on multiple objects. To test, save the Limit Query Template on the <strong>Custom Settings</strong> tab and run Profiling for one specific object first. You can monitor the process by tailing the <strong>taskserver.log</strong> from the Alation shell:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
tail<span class="w"> </span>-f<span class="w"> </span>/opt/alation/site/logs/taskserver.log
</pre></div>
</div>
<p>The log output will include the errors that may occur if the query is incorrect.
If the template is correct and applies without issues, the <strong>taskserver.log</strong> will contain the SELECT statement with the applied limit of 10,000 rows, for example:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2020-06-18T07:25:43.591Z&quot;</span>,<span class="s2">&quot;source_host&quot;</span>:<span class="s2">&quot;known-griffon.alation-test.com&quot;</span>,
<span class="s2">&quot;file&quot;</span>:<span class="s2">&quot;CustomDBTableProfiler.java&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;getProfileQuery&quot;</span>,<span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;INFO&quot;</span>,<span class="s2">&quot;line_number&quot;</span>:<span class="s2">&quot;61&quot;</span>,
<span class="s2">&quot;thread_name&quot;</span>:<span class="s2">&quot;pool-424-thread-1&quot;</span>,<span class="s2">&quot;@version&quot;</span>:1,<span class="s2">&quot;logger_name&quot;</span>:<span class="s2">&quot;alation.profiler.CustomDBTableProfiler&quot;</span>,
<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;Profiling test_automation_schema_withdifftabletypes.deltatablemarks table with query :</span>
<span class="s2">SELECT school_id,s_id,score,status FROM test_automation_schema_withdifftabletypes.deltatablemarks</span>
<span class="s2">LIMIT 10001&quot;</span>,<span class="s2">&quot;class&quot;</span>:<span class="s2">&quot;alation.profiler.CustomDBTableProfiler&quot;</span>,<span class="s2">&quot;mdc&quot;</span>:<span class="o">{}}</span>
<span class="o">{</span><span class="s2">&quot;@timestamp&quot;</span>:<span class="s2">&quot;2020-06-18T07:25:43.592Z&quot;</span>,<span class="s2">&quot;source_host&quot;</span>:<span class="s2">&quot;known-griffon.alation-test.com&quot;</span>,
<span class="s2">&quot;file&quot;</span>:<span class="s2">&quot;TableProfiler.java&quot;</span>,<span class="s2">&quot;method&quot;</span>:<span class="s2">&quot;getProfileKrb&quot;</span>,<span class="s2">&quot;level&quot;</span>:<span class="s2">&quot;INFO&quot;</span>,<span class="s2">&quot;line_number&quot;</span>:<span class="s2">&quot;533&quot;</span>,
<span class="s2">&quot;thread_name&quot;</span>:<span class="s2">&quot;pool-424-thread-1&quot;</span>,<span class="s2">&quot;@version&quot;</span>:1,<span class="s2">&quot;logger_name&quot;</span>:<span class="s2">&quot;alation.profiler.TableProfiler&quot;</span>,
<span class="s2">&quot;message&quot;</span>:<span class="s2">&quot;test_automation_schema_withdifftabletypes.deltatablemarks being profiled with query:</span>
<span class="s2">SELECT school_id,s_id,score,status FROM test_automation_schema_withdifftabletypes.deltatablemarks</span>
<span class="s2">LIMIT 10001&quot;</span>,<span class="s2">&quot;class&quot;</span>:<span class="s2">&quot;alation.profiler.TableProfiler&quot;</span>,<span class="s2">&quot;mdc&quot;</span>:<span class="o">{}}</span>
</pre></div>
</div>
</section>
<section id="reset-the-limit-query-template">
<h4>Reset the Limit Query Template<a class="headerlink" href="#reset-the-limit-query-template" title="Permalink to this headline">¶</a></h4>
<p>To clear a saved Limit Query Template, delete it from the <strong>Limit Query Template</strong> field making sure you have cleared it completely and deleted all the spaces. Click <strong>Save</strong>.</p>
</section>
</section>
<section id="custom-settings-custom-queries">
<h3>Custom Settings &gt; Custom Queries<a class="headerlink" href="#custom-settings-custom-queries" title="Permalink to this headline">¶</a></h3>
<p><em>Available from release 2020.4</em></p>
<p>This configuration is available if Profiling V2 is enabled. It allows customizing the default queries for Column Profiling.</p>
<p>By default, to profile a column, Alation runs a default query. Default queries for Column Profiling differ depending on the data type: numeric or non-numeric. You can customize the default queries for Column Profiling on the <strong>Custom Settings</strong> tab under <strong>Custom Queries</strong>:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_01.png" src="../../_images/ColumnProfiling_01.png" />
</div></blockquote>
<p>The default query supplied by Alation can be modified based on the user requirements and the data source type. The following default query template can be used to revert back to the default query from custom query:</p>
<blockquote>
<div><ul>
<li><p><strong>Numeric columns</strong>:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">  </span>MIN<span class="o">({</span>column_name<span class="o">})</span><span class="w"> </span>AS<span class="w"> </span>MIN,
<span class="w">  </span>MAX<span class="o">({</span>column_name<span class="o">})</span><span class="w"> </span>AS<span class="w"> </span>MAX,
<span class="w">  </span>AVG<span class="o">({</span>column_name<span class="o">})</span><span class="w"> </span>AS<span class="w"> </span>MEAN,
<span class="w">  </span><span class="o">(</span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>COUNT<span class="o">({</span>column_name<span class="o">}))</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;#NULL&quot;</span>,
<span class="w">  </span><span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="w"> </span>THEN<span class="w"> </span><span class="o">((</span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>COUNT<span class="o">({</span>column_name<span class="o">}))</span><span class="w"> </span>*<span class="w"> </span><span class="m">100</span>.0<span class="w"> </span>/<span class="w"> </span>COUNT<span class="o">(</span>*<span class="o">))</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span>.0<span class="w"> </span>END<span class="o">)</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;%NULL&quot;</span>
FROM<span class="w"> </span><span class="o">{</span>schema_name<span class="o">}</span>.<span class="o">{</span>table_name<span class="o">}</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><strong>Non-numeric columns</strong>:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>SELECT
<span class="w">  </span><span class="o">((</span>SUM<span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span><span class="o">{</span>column_name<span class="o">}</span><span class="w"> </span>IS<span class="w"> </span>NULL<span class="w"> </span>THEN<span class="w"> </span><span class="m">1</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span><span class="w"> </span>END<span class="o">)))</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;#NULL&quot;</span>,
<span class="w">  </span><span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="w"> </span>THEN<span class="w"> </span><span class="o">((((</span>SUM<span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span><span class="o">{</span>column_name<span class="o">}</span><span class="w"> </span>IS<span class="w"> </span>NULL<span class="w"> </span>THEN<span class="w"> </span><span class="m">1</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span><span class="w"> </span>END<span class="o">)))</span><span class="w"> </span>*<span class="w"> </span><span class="m">100</span>.0<span class="w"> </span>/<span class="w"> </span>count<span class="o">(</span>*<span class="o">))</span><span class="w"> </span><span class="o">)</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span>.0<span class="w"> </span>END<span class="w"> </span><span class="o">)</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;%NULL&quot;</span>,
<span class="w">  </span><span class="o">((</span>SUM<span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span><span class="o">{</span>column_name<span class="o">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>THEN<span class="w"> </span><span class="m">1</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span><span class="w"> </span>END<span class="o">))</span><span class="w"> </span><span class="o">)</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;#EMPTY&quot;</span>,
<span class="w">  </span><span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span>COUNT<span class="o">(</span>*<span class="o">)</span><span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="w"> </span>THEN<span class="w"> </span><span class="o">(((</span>SUM<span class="o">(</span>CASE<span class="w"> </span>WHEN<span class="w"> </span><span class="o">{</span>column_name<span class="o">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>THEN<span class="w"> </span><span class="m">1</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span><span class="w"> </span>END<span class="o">))</span><span class="w"> </span>*<span class="w"> </span><span class="m">100</span>.0<span class="w"> </span>/<span class="w"> </span>count<span class="o">(</span>*<span class="o">)))</span><span class="w"> </span>ELSE<span class="w"> </span><span class="m">0</span>.0<span class="w"> </span>END<span class="o">)</span><span class="w"> </span>AS<span class="w"> </span><span class="s2">&quot;%EMPTY&quot;</span>
FROM<span class="w"> </span><span class="o">{</span>schema_name<span class="o">}</span>.<span class="o">{</span>table_name<span class="o">}</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The Profiling queries must contain the <code class="docutils literal notranslate"><span class="pre">{column_name}</span></code>, <code class="docutils literal notranslate"><span class="pre">{schema_name}</span></code>, and <code class="docutils literal notranslate"><span class="pre">{table_name}</span></code> variables. Users must check the compatibility of the default query based on the database type and modify it if required.</p>
</div>
</div></blockquote>
<p>The default Profiling query calculates the Profiling stats that are displayed on the <strong>Overview</strong> tab of the Column catalog page. When you customize the query, you can also customize the statistics that should be calculated and displayed:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_09.png" src="../../_images/ColumnProfiling_09.png" />
</div></blockquote>
</section>
</section>
<section id="per-object-parameters">
<span id="sampling-profiling-per-object-parameters"></span><h2>Per-Object Parameters<a class="headerlink" href="#per-object-parameters" title="Permalink to this headline">¶</a></h2>
<p>On the <strong>Per-Object Parameters</strong> tab, you can select Sampling and Profiling options for each available level of the data object hierarchy (Schema &gt; Table &gt; Column) in a data source. On each of these levels, the Profiling parameters will slightly differ. Click the name of a Schema or Table to go down to the lower object level:</p>
<blockquote>
<div><img alt="../../_images/DS_CustomDB26.png" src="../../_images/DS_CustomDB26.png" />
</div></blockquote>
<ul class="simple">
<li><p><strong>Profile?</strong> - sets objects to be included into Profiling. By default, all are selected. Clear checkboxes for objects you wish to exclude. Available at the Schema and Table levels.</p></li>
<li><p><strong>Max rows to Scan</strong> - a read-only parameter available for your information. Appears on the Schema and Table levels. For each table selected for Profiling, Alation only samples <strong>10,000</strong> random or top rows. Note that for the Custom DB, Alation attempts to read all rows and then truncate the result to <strong>10,000</strong> unless the Limit Query Template has been applied.</p></li>
<li><p><strong>Max rows to Store</strong> - sets the max number of rows to be stored for a table. Available on the Schema and Table level. If defined on the Schema level, the value is propagated to all tables in this Schema. If defined on the Table level, the setting applies to this specific table only. Default: 100. Click the number for a specific object to edit.</p></li>
<li><p><strong>Skip Views</strong> - allows skipping views during Profiling. Selected by default. Applies at the Schema level.</p></li>
<li><p><strong>Profiling Query (Sampling Query)</strong> - Available at the Table level from release 2020.3 and at the Column level from release 2020.4. See <a class="reference internal" href="#custom-query-based-sampling-for-tables">Custom Query-Based Sampling for Tables</a> and <a class="reference internal" href="#custom-query-based-profiling-for-columns">Custom Query-Based Profiling for Columns</a> below.</p></li>
<li><p><strong>Max values to Store</strong> - allows to set the number of column values to be stored for a sample. Available at the Column level. Click the number for a specific column to edit.</p></li>
</ul>
<section id="custom-query-based-sampling-for-tables">
<span id="sampling-profiling-custom-query-based-sampling-for-tables"></span><h3>Custom Query-Based Sampling for Tables<a class="headerlink" href="#custom-query-based-sampling-for-tables" title="Permalink to this headline">¶</a></h3>
<p><em>Available from release 2020.3</em></p>
<p>You can specify a custom query for profiling individual tables:</p>
<ol class="arabic">
<li><p>On the <strong>Per-Object Parameters</strong> tab, navigate to the table level of your data source by clicking the name of a Schema.</p></li>
<li><p>Locate the table for which you wish to provide a custom query. For this table, in the column <strong>Profiling Query</strong> or <strong>Sampling Query</strong>, click the <strong>Edit</strong> icon to open the query editor. The name of the column - <strong>Profiling Query</strong> or <strong>Sampling Query</strong> - depends on the Alation version:</p>
<blockquote>
<div><img alt="../../_images/DS_CustomDB27.png" src="../../_images/DS_CustomDB27.png" />
</div></blockquote>
</li>
<li><p>In the query editor that opens, provide the query and <strong>Save</strong>.</p>
<blockquote>
<div><img alt="../../_images/DS_CustomDB28.png" src="../../_images/DS_CustomDB28.png" />
</div></blockquote>
</li>
</ol>
<p>The next Sampling job you run will use the saved custom query to profile this specific table.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no SQL validation for the custom profiling queries. If the query is incorrect, Alation will throw an error during profiling this table which will be logged in the Profiling History. It is recommended to test run and troubleshoot the query in Compose before saving it in the catalog and running the Profiling job.</p>
</div>
</div></blockquote>
<section id="table-sampling-settings-priority">
<h4>Table Sampling Settings Priority<a class="headerlink" href="#table-sampling-settings-priority" title="Permalink to this headline">¶</a></h4>
<p>If you have provided both custom queries for specific tables and the Limit Query Template in <strong>Custom Settings</strong>, then the Sampling job will apply:</p>
<ul class="simple">
<li><p>The custom queries to the tables which have them specified;</p></li>
<li><p>The Limit Query Template to the rest of the profiled tables.</p></li>
</ul>
<p>If you have provided custom queries for specific tables but did not use the Limit Query Template, then the Sampling job will apply:</p>
<ul class="simple">
<li><p>The the custom queries to the tables which have them specified;</p></li>
<li><p>The default query to the rest of the sampled tables.</p></li>
</ul>
</section>
</section>
<section id="custom-query-based-profiling-for-columns">
<span id="sampling-profiling-custom-query-based-sampling-for-columns"></span><h3>Custom Query-Based Profiling for Columns<a class="headerlink" href="#custom-query-based-profiling-for-columns" title="Permalink to this headline">¶</a></h3>
<p><em>Available from release 2020.4</em></p>
<p>Requires Profiling V2 to be turned on.</p>
<p>You can specify a custom query for profiling individual columns:</p>
<ol class="arabic">
<li><p>On the <strong>Per-Object Parameters</strong> tab, navigate to the column by clicking <strong>Datasource &gt; Schema &gt; Table &gt; Column</strong>.</p></li>
<li><p>Locate the column you wish to provide a query for. For this column, in the <strong>Profiling Query</strong> column, click the <strong>Edit</strong> icon.</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_03.png" src="../../_images/ColumnProfiling_03.png" />
</div></blockquote>
</li>
<li><p>In the query editor that opens, provide the query and click <strong>Save</strong>:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_04.png" src="../../_images/ColumnProfiling_04.png" />
</div></blockquote>
</li>
</ol>
<p>The next Column Profiling job you run will use the saved custom query to profile this specific column.</p>
<p>There is no SQL validation for the custom profiling queries. If the query is incorrect, Alation will throw an error during profiling this table which will be logged in the Profiling History. It is recommended to test run and troubleshoot the query in Compose before saving it in the catalog and running the Profiling job.</p>
</section>
</section>
<section id="data-profiling-sampling">
<h2>Data Profiling/Sampling<a class="headerlink" href="#data-profiling-sampling" title="Permalink to this headline">¶</a></h2>
<p>After you have specified and tested the desired Profiling/Sampling settings, you can launch the Sampling job on the data source Settings &gt; <strong>Data Profiling</strong> or <strong>Data Sampling</strong> tab of the Settings:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>Releases before 2021.1</em>: this tab is named <strong>Data Profiling</strong></p></li>
<li><p><em>2021.1 and newer</em>: this tab is named <strong>Data Sampling</strong></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also run Profiling for individual Tables and Columns on their respective catalog pages:</p>
<blockquote>
<div><ul class="simple">
<li><p>Catalog page of a Table object &gt; <strong>Samples</strong> tab</p></li>
<li><p>Catalog Page of a Column object &gt; <strong>Overview</strong> tab.</p></li>
</ul>
</div></blockquote>
</div>
<p>Sampling can be run on demand or as a scheduled job. If you decide on scheduling the Sampling job, please note that it can occupy significant resources on the database. Consult your DBAs about the optimal schedule for Sampling.</p>
<p>To perform Sampling of multiple objects:</p>
<ol class="arabic">
<li><p>Open Settings &gt; <strong>Data Profiling</strong> or <strong>Data Sampling</strong>.</p></li>
<li><p>By default, Sampling is set to be launched on demand. If you wish to set a schedule, clear the <strong>Disable automatic profiling</strong> (or <strong>Disable automatic sampling</strong>) checkbox to reveal the scheduling fields.</p></li>
<li><p>To set a schedule, in the corresponding fields of the schedule section, specify values for week, day and time.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>To turn off the scheduling, select the <strong>Disable automatic profiling checkbox</strong>.</p>
</div>
</div></blockquote>
</li>
<li><p>Next, set the number of tables to be sampled by selecting a value in the dropdown list on top of the <strong>Job History</strong> table. By default, <strong>all tables</strong> are sampled. When a specific number of tables is selected, unprofiled and popular tables are prioritized:</p>
<blockquote>
<div><img alt="../../_images/DS_CustomDB30.png" src="../../_images/DS_CustomDB30.png" />
</div></blockquote>
</li>
<li><p>Click the <strong>Launch Job Now!</strong> or <strong>Relaunch Job</strong> to start Data Profiling.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Launch Job Now!</strong> is the label when the profiling job has never been run before. After the first use it changes to <strong>Relaunch Job</strong>.</p>
</div>
</div></blockquote>
</li>
<li><p>The results of the Sampling job are logged in the <strong>Job History</strong> table at the bottom of the page.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Detailed log for the Sampling job can be found in the <strong>taskserver.log</strong> file at <strong>/opt/alation/site/logs</strong> from the Alation shell.</p>
</div>
</div></blockquote>
</li>
</ol>
</section>
<section id="individual-column-profiling">
<h2>Individual Column Profiling<a class="headerlink" href="#individual-column-profiling" title="Permalink to this headline">¶</a></h2>
<p>Individual columns can be profiled by catalog users on their respective catalog pages. This operation requires that users authenticate against the database when Dynamic Profiling is enabled for the data source. For help authenticating against the database, see <a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/WorkingWithDataSourceConnections.html"><span class="doc">Working with Data Source Connections</span></a>.</p>
<p>To perform individual column profiling:</p>
<ol class="arabic simple">
<li><p>Open the catalog page of a specific column.</p></li>
<li><p>Depending on whether or not Profiling V2 is enabled on the instance, the column profiling actions will differ.</p></li>
</ol>
<section id="default-column-profiling">
<h3>Default Column Profiling<a class="headerlink" href="#default-column-profiling" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>On the <strong>Overview</strong> tab, click <strong>Run Profile</strong>. This retrieves a new default profile for the Column based on the default or custom profiling query.</p>
<blockquote>
<div><img alt="../../_images/CustomDB_Profiling_01.png" src="../../_images/CustomDB_Profiling_01.png" />
</div></blockquote>
</li>
<li><p>Refresh the page to view the results.</p></li>
</ol>
</section>
<section id="profiling-v2-deep-column-profiling">
<h3>Profiling V2 (Deep Column Profiling)<a class="headerlink" href="#profiling-v2-deep-column-profiling" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>On the <strong>Overview</strong> tab of the Column Catalog page, click the <strong>Run Profile</strong> button:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_05.png" src="../../_images/ColumnProfiling_05.png" />
</div></blockquote>
</li>
<li><p>Click the <strong>Refresh Page</strong> button to view the new profile:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_06.png" src="../../_images/ColumnProfiling_06.png" />
</div></blockquote>
</li>
<li><p>The Profiling information such as Profiling Info, Distribution and Full Profile Values will be displayed:</p>
<blockquote>
<div><img alt="../../_images/ColumnProfiling_07.png" src="../../_images/ColumnProfiling_07.png" />
</div></blockquote>
</li>
</ol>
<section id="profiling-info">
<h4>Profiling Info<a class="headerlink" href="#profiling-info" title="Permalink to this headline">¶</a></h4>
<p>The following statistics are calculated during Column Profiling by executing the default profiling query:</p>
<p><strong>Numeric data types</strong></p>
<blockquote>
<div><ul>
<li><p>Profiling information: <strong>Min</strong>, <strong>Max</strong>, <strong>Mean</strong>, <strong>#Null</strong>, and <strong>%Null</strong></p>
<blockquote>
<div><img alt="../../_images/CustomDB_Profiling_03.png" src="../../_images/CustomDB_Profiling_03.png" />
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p><strong>Non-Numeric data types</strong></p>
<blockquote>
<div><ul>
<li><p>Profiling Information - <strong>#Null</strong> and <strong>%Null</strong></p>
<blockquote>
<div><img alt="../../_images/CustomDB_Profiling_04.png" src="../../_images/CustomDB_Profiling_04.png" />
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="frequency-distribution-chart">
<span id="sampling-profiling-frequency-distribution-chart"></span><h4>Frequency Distribution Chart<a class="headerlink" href="#frequency-distribution-chart" title="Permalink to this headline">¶</a></h4>
<p>The Frequency Distribution chart is a visual representation of frequency for column values.</p>
<p><strong>Version 2020.4</strong></p>
<p>The Frequency Distribution chart is displayed when the Profiling V2 feature is enabled (<code class="docutils literal notranslate"><span class="pre">alation.feature_flags.enable_profiling_v2</span> <span class="pre">=</span> <span class="pre">True</span></code>) and draws a bar for each column value:</p>
<blockquote>
<div><img alt="../../_images/CustomDB_Profiling_05.png" src="../../_images/CustomDB_Profiling_05.png" />
</div></blockquote>
<p><strong>From version 2021.1</strong></p>
<p>The presence of the Frequency Distribution chart is controlled by a separate <strong>alation_conf</strong> parameter <code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.show_distribution_chart</span></code>. It needs to be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> in addition to the parameter <code class="docutils literal notranslate"><span class="pre">alation.feature_flags.enable_profiling_v2</span></code>.</p>
<p>There are 2 additional parameters that allow customizing the appearance of the Frequency Distribution Chart:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.max_unbatched_values</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.batch_count</span></code></p></li>
</ul>
</div></blockquote>
<p>The Frequency Distribution chart will display a column (value range) for each bucket of values formed on the basis of these parameters.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.max_unbatched_values</span></code> to the number of unique values that should be present in a column for Alation to start forming value ranges for the Distribution chart. This parameter “checks” how many distinct values are in the column. Alation only starts creating ranges of values when the number of distinct values in a column &gt;= the value of this parameter. Otherwise, it draws a bar for each distinct value.</p>
<p>Set <code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.batch_count</span></code> to the number of ranges of values to be displayed on the chart.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>For example, if a column has 1,000 distinct values, then Alation will form equal value ranges after sorting the column in the ascending order and based on the calculation of <code class="docutils literal notranslate"><span class="pre">1,000/distribution.batch_count</span></code>.</p>
<p>With the default value of <code class="docutils literal notranslate"><span class="pre">alation.profiling.v2.distribution.batch_count</span> <span class="pre">=</span> <span class="pre">50</span></code>, each value range will represent 20 (1,000/50) distinct values: 1-20, 21-40, 41-60, etc.</p>
</div>
<img alt="../../_images/CustomDB_Profiling_06.png" src="../../_images/CustomDB_Profiling_06.png" />
</div></blockquote>
</section>
<section id="explore-frequency-distribution-chart">
<h4>Explore Frequency Distribution Chart<a class="headerlink" href="#explore-frequency-distribution-chart" title="Permalink to this headline">¶</a></h4>
<p>You can explore the Frequency Distribution Chart by using the interactive controls on top right of the chart area:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Zoom In</strong>: click the <strong>Plus</strong> icon to zoom in</p></li>
<li><p><strong>Zoom Out</strong>: click the <strong>Minus</strong> icon to zoom out</p></li>
<li><p><strong>Select and resize</strong>: click the Magnifying Glass icon and then select an area on the chart to display this area only</p></li>
<li><p><strong>Move left and right</strong>: click the Hand icon to select the Move mode, and then place the cursor onto the chart area and drag left or right</p></li>
<li><p><strong>Reset</strong>: click the Home icon to reset the chart</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="GuidelinesForMDEQueries.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Guidelines for Creating Queries for MDE
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="QLIFromCustomDB.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />QLI From Custom DB
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on datasources/CustomDB/ProfilingForCustomDB&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Sampling and Profiling</a><ul>
<li><a class="reference internal" href="#sampling">Sampling</a><ul>
<li><a class="reference internal" href="#configure-sampling">Configure Sampling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#profiling-v2">Profiling V2</a><ul>
<li><a class="reference internal" href="#configure-profiling">Configure Profiling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-settings">Custom Settings</a><ul>
<li><a class="reference internal" href="#custom-settings-limit-query-template">Custom Settings &gt; Limit Query Template</a><ul>
<li><a class="reference internal" href="#test-the-limit-query-template">Test the Limit Query Template</a></li>
<li><a class="reference internal" href="#reset-the-limit-query-template">Reset the Limit Query Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-settings-custom-queries">Custom Settings &gt; Custom Queries</a></li>
</ul>
</li>
<li><a class="reference internal" href="#per-object-parameters">Per-Object Parameters</a><ul>
<li><a class="reference internal" href="#custom-query-based-sampling-for-tables">Custom Query-Based Sampling for Tables</a><ul>
<li><a class="reference internal" href="#table-sampling-settings-priority">Table Sampling Settings Priority</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-query-based-profiling-for-columns">Custom Query-Based Profiling for Columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-profiling-sampling">Data Profiling/Sampling</a></li>
<li><a class="reference internal" href="#individual-column-profiling">Individual Column Profiling</a><ul>
<li><a class="reference internal" href="#default-column-profiling">Default Column Profiling</a></li>
<li><a class="reference internal" href="#profiling-v2-deep-column-profiling">Profiling V2 (Deep Column Profiling)</a><ul>
<li><a class="reference internal" href="#profiling-info">Profiling Info</a></li>
<li><a class="reference internal" href="#frequency-distribution-chart">Frequency Distribution Chart</a></li>
<li><a class="reference internal" href="#explore-frequency-distribution-chart">Explore Frequency Distribution Chart</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->