
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Impala &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Adding Data Sources" href="index.html"/>
        <link rel="next" title="MongoDB" href="MongoDB.html"/>
        <link rel="prev" title="Greenplum" href="Greenplum.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/QuickStart/index.html">Quick Start Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Runbook/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Adding Data Sources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="AWSGluewithoutHive.html">AWS Glue without Hive</a></li>
<li class="toctree-l2"><a class="reference internal" href="AzureDataWarehouse.html">Azure Data Warehouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cassandra.html">Cassandra</a></li>
<li class="toctree-l2"><a class="reference internal" href="DatabricksAWS.html">Databricks on AWS</a></li>
<li class="toctree-l2"><a class="reference internal" href="DB2LUW.html">DB2 LUW</a></li>
<li class="toctree-l2"><a class="reference internal" href="Greenplum.html">Greenplum</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Impala</a></li>
<li class="toctree-l2"><a class="reference internal" href="MongoDB.html">MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="MemSQL.html">MemSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="MySQL.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="Netezza.html">Netezza</a></li>
<li class="toctree-l2"><a class="reference internal" href="Oracle.html">Oracle</a></li>
<li class="toctree-l2"><a class="reference internal" href="PostgreSQL.html">PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="PrestoOnHive.html">Presto on Hive</a></li>
<li class="toctree-l2"><a class="reference internal" href="Redshift.html">Amazon Redshift</a></li>
<li class="toctree-l2"><a class="reference internal" href="Salesforce.html">Salesforce</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAPHANA.html">SAP Hana</a></li>
<li class="toctree-l2"><a class="reference internal" href="SAS.html">SAS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Snowflake.html">Snowflake</a></li>
<li class="toctree-l2"><a class="reference internal" href="SnowflakeSSO.html">Snowflake OAuth For Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="SQLServer.html">SQL Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="SybaseIQ.html">Sybase IQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="SybaseASE.html">Sybase Adaptive Server Enterprise (ASE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Teradata.html">Teradata</a></li>
<li class="toctree-l2"><a class="reference internal" href="Vertica.html">Vertica</a></li>
<li class="toctree-l2"><a class="reference internal" href="KerberosConfiguration.html">Kerberos Configuration (General)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureAlationDB.html">Configure Alation DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="Appendix.html">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Adding Data Sources</a>
    <span class="separator">&gt;</span>
    <span>Impala</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="impala">
<h1>Impala<a class="headerlink" href="#impala" title="Permalink to this headline">¶</a></h1>
<section id="required-information">
<h2>Required Information<a class="headerlink" href="#required-information" title="Permalink to this headline">¶</a></h2>
<p>To configure an Impala data source in Alation, you need the following information:</p>
<ul>
<li><p>A service account with the required privileges. See <a class="reference internal" href="#service-account">Service Account</a>.</p></li>
<li><p>Hostname or IP address of the host where an Impala daemon is running. Use the hostname or IP of  any <code class="docutils literal notranslate"><span class="pre">impalad</span></code> in your cluster.</p></li>
<li><p>Port number. Default: <strong>21050</strong></p></li>
<li><p>Hive Metastore URI in the Thrift format: <code class="docutils literal notranslate"><span class="pre">thrift://&lt;METASTORE_HOST&gt;:&lt;port&gt;</span></code></p></li>
<li><p>If using TLS/SSL, the SSL certificate for the Impala endpoint. See <a class="reference internal" href="#using-ssl">Using SSL</a>.</p></li>
<li><p>If using Kerberos:</p>
<blockquote>
<div><ul class="simple">
<li><p>Make sure the pre-configuration for Kerberos has been done: <a class="reference internal" href="../DSConfiguration/ConfiguringKerberosforDataSourceAuthentication.html"><span class="doc">Configuring Kerberos for Data Source Authentication</span></a>.</p></li>
<li><p>Kerberos Service Principal</p></li>
<li><p>Metastore Principal</p></li>
<li><p>If using keytabs, the appropriate keytab for the service account. You will need to upload it to Alation.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Query Log Ingestion requires additional setup. See <a class="reference internal" href="#prerequisites-for-qli">Prerequisites For QLI</a>.</p>
</section>
<section id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<section id="complex-data-type-extraction">
<span id="impala-complex-data-type-extraction"></span><h3>Complex Data Type Extraction<a class="headerlink" href="#complex-data-type-extraction" title="Permalink to this headline">¶</a></h3>
<p><em>Applies from 2021.4</em></p>
<p>Do the following steps to enable the flag to extract the struct and array data types from Impala data source during the Metadata Extraction:</p>
<ol class="arabic simple">
<li><p>Enter the Alation shell:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Using alation_conf, set the struct and array data type flag to <strong>true</strong>.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.feature_flags.enable_generic_nosql_support<span class="w"> </span>-s<span class="w"> </span><span class="nb">true</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It does not require any restart.</p>
</div>
<p>Set the struct and array data type flag to <strong>false</strong> to disable this feature.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.feature_flags.enable_generic_nosql_support<span class="w"> </span>-s<span class="w"> </span><span class="nb">false</span>
</pre></div>
</div>
</section>
</section>
<section id="service-account">
<h2>Service Account<a class="headerlink" href="#service-account" title="Permalink to this headline">¶</a></h2>
<p>Alation recommends creating a service account prior to adding your Impala data source to the Catalog. The service account should have enough permissions to run MDE, Profiling, and QLI. It requires:</p>
<ul class="simple">
<li><p>SELECT permissions on all schemas which you plan to extract into the Catalog (for MDE and Profiling);</p></li>
<li><p>permissions to READ the HDFS location where the Impala logs are stored (for QLI);</p></li>
<li><p>READ, WRITE, and EXECUTE permissions for the Hive external table.</p></li>
<li><p>permissions to access to the Hive Metastore</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on Hive external tables, see, for example, <a class="reference external" href="https://data-flair.training/blogs/hive-internal-tables-vs-external-tables/">Comparison between Hive Internal Tables vs External Tables</a>.</p>
</div>
<section id="using-sentry-authorization">
<h3>Using Sentry Authorization<a class="headerlink" href="#using-sentry-authorization" title="Permalink to this headline">¶</a></h3>
<p>If using Sentry authorization, ensure that the service account has the SELECT permissions on all schemas and access to the Metastore.</p>
</section>
<section id="kerberized-impala">
<h3>Kerberized Impala<a class="headerlink" href="#kerberized-impala" title="Permalink to this headline">¶</a></h3>
<p>Alation recommends creating the service account in the same realm as the one used by Impala users.</p>
</section>
</section>
<section id="using-ssl">
<h2>Using SSL<a class="headerlink" href="#using-ssl" title="Permalink to this headline">¶</a></h2>
<p>Alation requires the SSL certificate to the Impala endpoint to be added to the certificate truststore on the Alation server.</p>
<p>To connect to Impala over SSL in Alation:</p>
<ol class="arabic">
<li><p>Work with your CDH administrator to gather the required SSL certificates from the Hadoop cluster.  The following certificates in the PEM format are required:</p>
<blockquote>
<div><ul class="simple">
<li><p>Impala TLS/SSL Server Certificate File</p></li>
<li><p>SSL/TLS Certificate for Impala Daemon Web Server</p></li>
<li><p>SSL/TLS Certificate for Catalog Server Web Server</p></li>
<li><p>SSL/TLS Certificate for Statestore Daemon Web Server</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To obtain the paths to the certificates, go to <strong>Cloudera Manager &gt; Impala &gt; Configuration</strong>. Type <code class="docutils literal notranslate"><span class="pre">Impala</span> <span class="pre">TLS/SSL</span> <span class="pre">Server</span> <span class="pre">Certificate</span> <span class="pre">File</span> <span class="pre">(PEM</span> <span class="pre">Format)</span></code> in the search field. The results page will display paths to SSL certificates.</p>
</div>
</div></blockquote>
</li>
<li><p>Create a certificate chain for the Impala endpoint and add it to the certificate truststore in Alation. See <a class="reference internal" href="../DSConfiguration/InstallingCertificatesforSecureDataSourceCon.html"><span class="doc">Installing Certificates for Secure Data Source Connections</span></a>.</p></li>
<li><p>When adding the Impala data source to Alation, use the <strong>JDBC URI</strong> option when configuring the connection:</p>
<blockquote>
<div><ul class="simple">
<li><p>If using the default truststore, and add the parameter <code class="docutils literal notranslate"><span class="pre">;ssl=true</span></code> after the hostname and port: <code class="docutils literal notranslate"><span class="pre">impala://&lt;HOSTNAME&gt;:21050/;ssl=true;auth=noSasl</span></code></p></li>
<li><p>If using a custom truststore, add the parameter <code class="docutils literal notranslate"><span class="pre">;ssl=true</span></code>, the path to the truststore and the truststore password parameter to the URI (&lt;HOSTNAME&gt;  is the hostname or IP address of an <code class="docutils literal notranslate"><span class="pre">impalad</span></code> in your CDH cluster): <code class="docutils literal notranslate"><span class="pre">impala://&lt;HOSTNAME&gt;:21050/;ssl=true;sslTrustStore=/etc/pki/java/cacerts;trustStorePassword=changeit;auth=noSasl</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ol>
</section>
<section id="prerequisites-for-qli">
<h2>Prerequisites for QLI<a class="headerlink" href="#prerequisites-for-qli" title="Permalink to this headline">¶</a></h2>
<p>In order to run Query Log Ingestion for an Impala data source, perform the following pre-configuration on your instance of Impala:</p>
<ol class="arabic">
<li><p><strong>Enable audit log in Impala</strong>. For specific details refer to documentation for your CDH version, for example: <a class="reference external" href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/impala_auditing.html#auditing">Impala Auditing</a>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Enable auditing by including the option <code class="docutils literal notranslate"><span class="pre">-audit_event_log_dir=directory_path</span></code> in your <code class="docutils literal notranslate"><span class="pre">impalad</span></code> startup options. The path refers to a local directory on the server, not an HDFS directory.</p></li>
<li><p>Decide how many queries will be represented in each log file. By default, Impala starts a new log file every 5,000 queries. To specify a different number, include the option <code class="docutils literal notranslate"><span class="pre">-max_audit_event_log_file_size=number_of_queries</span></code> in the <code class="docutils literal notranslate"><span class="pre">impalad</span></code> startup options. Limiting the size manages disk space by archiving older logs, and reduce the amount of text to process when analyzing activity for a particular period.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Periodically pull audit logs from Impala coordinator nodes to HDFS.</p>
<blockquote>
<div><ul class="simple">
<li><p>By default, the audit logs are located in <strong>/var/log/impalad/audit/</strong> inside Impala coordinator nodes. User can also configure the place of audit logs.</p></li>
<li><p>To periodically pull logs, users can write a script and run it as cron job to pull the audit logs from impala coordinator nodes to HDFS everyday.</p></li>
<li><p>User should create a directory for storing all Impala audit logs in HDFS.</p></li>
<li><p>The audit log files from each Impala coordinator node should only stay in a HDFS subdirectory of the audit log directory. The subdirectory should be named by the ID of the Impala coordinator node, for example, IP address, or any unique identifier.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>An example script is provided by Alation that you can use for reference: <a class="reference internal" href="Appendix.html#appendix-8"><span class="std std-ref">A.8 Impala QLI Script</span></a>.</p></li>
</ol>
<p>After all the steps are completed, users can configure and perform Query Log Ingestion (QLI) for Impala in Alation.</p>
</section>
<section id="setup-in-alation">
<h2>Setup in Alation<a class="headerlink" href="#setup-in-alation" title="Permalink to this headline">¶</a></h2>
<p>To add an Impala data source to Alation:</p>
<ol class="arabic">
<li><p>Go to the <strong>Sources</strong> page and on the upper-right, click <strong>Add</strong>.</p></li>
<li><p>Provide the information on the first <strong>Add a Data Source</strong> screen and click <strong>Continue Setup</strong>. This will bring up the <strong>Add Data Source</strong> wizard.</p></li>
<li><p>Select <strong>Impala</strong> as <strong>Database Type</strong>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_Impala01.png"><img alt="../../_images/DS_Impala01.png" src="../../_images/DS_Impala01.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
<li><p>Select the <strong>Enter JDBC URI</strong> checkbox and enter the JDBC URI. Please note that the parameters you must provide depend on your connection configuration. &lt;HOSTNAME&gt; is the hostname or IP address of an Impala daemon in your cluster:</p>
<blockquote>
<div><p><strong>Basic Connection</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">impala://&lt;HOSTNAME&gt;:21050/default/;auth=noSasl</span></code></p>
<p><strong>Example</strong>:
<code class="docutils literal notranslate"><span class="pre">impala://ip-10-13-13-51.test.com:21050/default/;auth=noSasl</span></code></p>
<p><strong>Connection Over TLS/SSL</strong></p>
<p>For prerequisites, see Using SSL. Add the parameter <code class="docutils literal notranslate"><span class="pre">;ssl=true</span></code> after the hostname and port: <code class="docutils literal notranslate"><span class="pre">impala://&lt;HOSTNAME&gt;:21050/;ssl=true;auth=noSasl</span></code></p>
<p><strong>Example</strong>:
<code class="docutils literal notranslate"><span class="pre">impala://ip-10-13-13-51.test.com:21050/default/;ssl=true;auth=noSasl</span></code></p>
<p><strong>Kerberized Impala</strong></p>
<p>JDBC URI must include the service principal:
<code class="docutils literal notranslate"><span class="pre">impala://&lt;HOSTNAME&gt;:21050/default;principal=impala/&lt;sevice_principal&gt;</span></code></p>
<p>There is no need to specify the <code class="docutils literal notranslate"><span class="pre">;auth=noSasl</span></code> parameter when using Kerberos authentication.</p>
<p><strong>Examples</strong>:
<code class="docutils literal notranslate"><span class="pre">impala://ip-10-13-13-51.test.com:21050/default/;principal=impala/_HOST&#64;TEST.COM</span></code>
<code class="docutils literal notranslate"><span class="pre">impala://ip-10-13-13-51.test.com:21050/default/;principal=impala/ip-10-13-0-117.test.com&#64;TEST.COM</span></code></p>
<p><strong>Kerberized Impala Over SSL</strong></p>
<p>The template for a JDBC URL containing both TLS/SSL and Kerberos parameters is as follows:
<code class="docutils literal notranslate"><span class="pre">impala://&lt;</span> <span class="pre">hostname&gt;:&lt;port&gt;</span> <span class="pre">/;principal=</span> <span class="pre">impala/&lt;service_principal&gt;</span> <span class="pre">;ssl=true;sslTrustStore=/etc/pki/java/cacerts;trustStorePassword=changeit</span></code></p>
<p><strong>Example</strong>:
<code class="docutils literal notranslate"><span class="pre">impala://ip-10-11-21-8.test.com:21050/default/;principal=impala/_HOST&#64;TEST.COM;ssl=true;sslTrustStore=/etc/pki/java/cacerts;trustStorePassword=changeit</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alation recommends to use the default truststore at <strong>/etc/pki/java/cacerts</strong> (path inside the Alation Chroot).
If you are using a custom truststore, then provide the path to this truststore for the <code class="docutils literal notranslate"><span class="pre">sslTrustStore</span></code> parameter.</p>
</div>
</div></blockquote>
</li>
<li><p>Provide the <strong>Port</strong> information or use the default port.</p></li>
<li><p>Provide the Hive <strong>Metastore</strong> information:</p>
<blockquote>
<div><ul class="simple">
<li><p>For the metastore on AWS Glue, select the <strong>Use AWS GLue</strong> checkbox and then provide the <strong>Access Key ID</strong>, <strong>Access Key Secret</strong>, and <strong>AWS Region</strong>. If not using AWS Glue, leave this checkbox clear.</p></li>
<li><p>For the <strong>Metastore URI</strong>, use the Thrift format: <code class="docutils literal notranslate"><span class="pre">thrift://&lt;Hive_metastore_host&gt;:&lt;port&gt;</span></code>. Example: <strong>thrift://10.13.15.110:9083</strong></p></li>
</ul>
</div></blockquote>
</li>
<li><p>If using Kerberos, select the checkbox <strong>Use Kerberos</strong> and specify:</p>
<blockquote>
<div><ul class="simple">
<li><p>In the <strong>Hive Principal</strong> field: the <strong>Impala Principal</strong> (Kerberos service principal for your Impala instance): <code class="docutils literal notranslate"><span class="pre">impala/&lt;impalad_hostname&gt;&#64;&lt;REALM&gt;</span></code>. Example: <strong>impala/ip-10-13-13-51.test.com&#64;TEST.COM</strong></p></li>
<li><p><strong>Metastore Principal</strong>: <code class="docutils literal notranslate"><span class="pre">hive/&lt;Hive</span> <span class="pre">Metastore</span> <span class="pre">Host&gt;&#64;&lt;REALM&gt;</span></code>. Example: <strong>hive/ip-10-13-0-117.test.com&#64;TEST.COM</strong></p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/DS_Impala02.png"><img alt="../../_images/DS_Impala02.png" src="../../_images/DS_Impala02.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
<li><p>If using keytabs, note that you will be able to download the keytab later on the <strong>General Settings</strong> tab of the data source Settings page. You do not need to upload the keytab in the Add Data Source wizard.</p></li>
<li><p>Under the <strong>Catalog</strong> section, provide the <strong>Title</strong>, <strong>Description</strong>, and <strong>Privacy</strong> settings, and click <strong>Save and Continue</strong>. The <strong>Set Up a Service Account</strong> wizard screen will open:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_Impala03.png"><img alt="../../_images/DS_Impala03.png" src="../../_images/DS_Impala03.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="11">
<li><p>Enter the username and password for the service account. Click <strong>Save and Continue</strong>. This will bring up the next wizard screen, <strong>Configure Your Data Source</strong>.</p></li>
<li><p>Click <strong>Skip This Step</strong>. You will be able to configure QLI later on the <strong>Query Log Ingestion</strong> tab of the Settings page.</p></li>
</ol>
<p>After this step, you are navigated to the <strong>Settings</strong> page of your data source. Complete the configuration on each tab of the Settings page and then proceed to running MDE, Profiling, and QLI.</p>
</section>
<section id="using-keytabs">
<h2>Using Keytabs<a class="headerlink" href="#using-keytabs" title="Permalink to this headline">¶</a></h2>
<p>When using keytabs with Kerberos authentication, download the appropriate keytab on the <strong>General Settings</strong> tab &gt; <strong>Service Account</strong> section of the <strong>Settings</strong> page:</p>
<img alt="../../_images/DS_Impala04.png" src="../../_images/DS_Impala04.png" />
</section>
<section id="useful-commands">
<h2>Useful Commands<a class="headerlink" href="#useful-commands" title="Permalink to this headline">¶</a></h2>
<p>Curl commands for WebHDFS. In these examples, <code class="docutils literal notranslate"><span class="pre">&lt;ip-10-13-52-220.alation-test.com&gt;</span></code> is the WebHDFS server:</p>
<blockquote>
<div><ul>
<li><p>Check directory status:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070/webhdfs/v1/&lt;tmp/alation&gt;?op=LISTSTATUS&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a directory:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>--negotiate<span class="w"> </span>-u<span class="w"> </span>:<span class="w"> </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070/webhdfs/v1/tmp/webhdfs&amp;op=MKDIRS&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create a file:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>--negotiate<span class="w"> </span>-u<span class="w"> </span>:<span class="w"> </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070//webhdfs/v1/tmp/webhdfs/webhdfs-test.txt?&amp;op=CREATE&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Open and read a file:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-L<span class="w"> </span>--negotiate<span class="w"> </span>-u<span class="w"> </span>:<span class="w">  </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070/webhdfs/v1/tmp/alation?op=OPEN&quot;</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not have the READ permission, the “Permission denied” error will appear.</p>
</div>
</li>
<li><p>Rename the file:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>PUT<span class="w"> </span>--negotiate<span class="w"> </span>-u<span class="w"> </span>:<span class="w"> </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070/webhdfs/v1/tmp/abc?op=RENAME&amp;destination=/tmp/xyz&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Delete the file:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>DELETE<span class="w"> </span>--negotiate<span class="w"> </span>-u<span class="w"> </span>:<span class="w"> </span><span class="s2">&quot;http://&lt;ip-10-13-52-220.alation-test.com&gt;:50070/webhdfs/v1/tmp/abc?op=DELETE&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</section>
<section id="diagnosing-webhdfs-setup">
<h2>Diagnosing WebHDFS Setup<a class="headerlink" href="#diagnosing-webhdfs-setup" title="Permalink to this headline">¶</a></h2>
<p>Prior to launching Query Log Ingestion (QLI), please check that everything was set up correctly. To diagnose, connect to the Alation server and try to list the contents of the logs directory with the relevant <a class="reference external" href="https://hadoop.apache.org/docs/r1.0.4/webhdfs.html#LISTSTATUS">curl command</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SSL for Impala connection is supported. If you use SSL, then in the tests substitute HTTP for HTTPS. In Alation UI, on the <strong>Query Log Ingestion</strong> tab, confirm that the WebHDFS server URL uses HTTPS.  For example, <strong>https://WEBHDFS_HOSTNAME</strong>.</p>
</div>
<p><strong>Example</strong> for plain Impala instance with Authentication scheme = None, on MacOS:</p>
<blockquote>
<div><div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-L<span class="w"> </span><span class="s2">&quot;http://&lt;webhdfs_server&gt;:50070/webhdfs/v1/&lt;tmp/alation&gt;?op=LISTSTATUS&quot;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="metadata-extraction-mde">
<h2>Metadata Extraction (MDE)<a class="headerlink" href="#metadata-extraction-mde" title="Permalink to this headline">¶</a></h2>
<p>You can perform MDE on the Metadata Extraction tab of the Settings page.</p>
<p><em>From 2021.4:</em></p>
<p>During Metadata Extraction, complex data types such as struct and array can be extracted to Alation if this extraction feature has been enabled. To extract the struct and array data types, make sure you set the dedicated  alation_conf flag to True: refer to <a class="reference internal" href="#complex-data-type-extraction">Complex Data Type Extraction</a>.</p>
<p><strong>Struct:</strong></p>
<blockquote>
<div><img alt="../../_images/DS_Impala05.png" src="../../_images/DS_Impala05.png" />
</div></blockquote>
<p><strong>Array:</strong></p>
<blockquote>
<div><img alt="../../_images/DS_Impala06.png" src="../../_images/DS_Impala06.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the schema that contains the data types (struct and array) is already extracted before enabling the <strong>alation_conf</strong> flag, remove the schema using Selective Extraction. Enable the <a class="reference internal" href="#impala-complex-data-type-extraction"><span class="std std-ref">flag</span></a> in <strong>alation_conf</strong> and perform the extraction again including the schema.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="Greenplum.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Greenplum
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="MongoDB.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />MongoDB
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on datasources/AddDataSources/Impala&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Impala</a><ul>
<li><a class="reference internal" href="#required-information">Required Information</a></li>
<li><a class="reference internal" href="#prerequisite">Prerequisite</a><ul>
<li><a class="reference internal" href="#complex-data-type-extraction">Complex Data Type Extraction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#service-account">Service Account</a><ul>
<li><a class="reference internal" href="#using-sentry-authorization">Using Sentry Authorization</a></li>
<li><a class="reference internal" href="#kerberized-impala">Kerberized Impala</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-ssl">Using SSL</a></li>
<li><a class="reference internal" href="#prerequisites-for-qli">Prerequisites for QLI</a></li>
<li><a class="reference internal" href="#setup-in-alation">Setup in Alation</a></li>
<li><a class="reference internal" href="#using-keytabs">Using Keytabs</a></li>
<li><a class="reference internal" href="#useful-commands">Useful Commands</a></li>
<li><a class="reference internal" href="#diagnosing-webhdfs-setup">Diagnosing WebHDFS Setup</a></li>
<li><a class="reference internal" href="#metadata-extraction-mde">Metadata Extraction (MDE)</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->