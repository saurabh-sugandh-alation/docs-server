
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Google BigQuery Setup in Alation &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Google BigQuery" href="index.html"/>
        <link rel="next" title="Google BigQuery FAQ" href="GoogleBigQueryFAQ.html"/>
        <link rel="prev" title="Google BigQuery Prerequisites" href="GoogleBigQueryPrerequisites.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/QuickStart/index.html">Quick Start Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Runbook/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Google BigQuery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="GoogleBigQueryPrerequisites.html">Google BigQuery Prerequisites</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Google BigQuery Setup in Alation</a></li>
<li class="toctree-l2"><a class="reference internal" href="GoogleBigQueryFAQ.html">Google BigQuery FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="GoogleBigQueryTroubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="GoogleBigQueryAdditionalInformation.html">Additional Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admins/CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admins/Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Google BigQuery</a>
    <span class="separator">&gt;</span>
    <span>Google BigQuery Setup in Alation</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="google-bigquery-setup-in-alation">
<h1>Google BigQuery Setup in Alation<a class="headerlink" href="#google-bigquery-setup-in-alation" title="Permalink to this headline">¶</a></h1>
<p><em>Applies from V R6 (5.10.x)</em></p>
<p>For earlier versions, see <a class="reference internal" href="#setup-in-alation-v-r5-5-9-x-and-below">Setup in Alation V R5 (5.9.x) and Below</a>.</p>
<p>To add a Google BigQuery data source to the Alation Catalog:</p>
<ol class="arabic simple">
<li><p>Go to <strong>Sources</strong> and on the <strong>Sources</strong> page, on the upper-right, click <strong>Add</strong>.</p></li>
<li><p>Provide the information on the first <strong>Add a Data Source</strong> screen and click <strong>Continue Setup</strong>. This will bring up the <strong>Add Data Source</strong> wizard.</p></li>
</ol>
<section id="data-source-wizard-step-1-connection-information">
<h2>Data Source Wizard Step 1: Connection Information<a class="headerlink" href="#data-source-wizard-step-1-connection-information" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../_images/DS_GBQ01.png"><img alt="../../_images/DS_GBQ01.png" src="../../_images/DS_GBQ01.png" style="width: 400px;" /></a>
<ol class="arabic simple">
<li><p>Select <strong>Google BigQuery</strong> as <strong>Database Type</strong>.</p></li>
<li><p><strong>Host</strong> the Host field is auto-populated with value <code class="docutils literal notranslate"><span class="pre">www.googleapis.com</span></code>. This field cannot be edited.</p></li>
<li><p>In the <strong>Database Name</strong> field, provide your <strong>Project ID</strong>. The project must be billing-enabled.</p></li>
<li><p>Provide the remaining information and click <strong>Save and Continue</strong>. This will bring up Step 2 of the wizard.</p></li>
</ol>
</section>
<section id="data-source-wizard-step-2-authentication">
<h2>Data Source Wizard Step 2: Authentication<a class="headerlink" href="#data-source-wizard-step-2-authentication" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../../_images/DS_GBQ02.png"><img alt="../../_images/DS_GBQ02.png" src="../../_images/DS_GBQ02.png" style="width: 400px;" /></a>
<ol class="arabic">
<li><p>Leave the <strong>Enable Service Account Certificate</strong> checkbox clear if you are using a user account for authentication. If you want to use a service account, see <a class="reference internal" href="#authenticating-with-a-service-account">Authenticating with a Service Account</a>.</p></li>
<li><p>Under <strong>User Account Certificate</strong>, click the link <strong>Upload OAuth certificate (json)</strong> and upload the certificate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="GoogleBigQueryPrerequisites.html#google-bigquery-prerequisites-generate-user-account-certificate"><span class="std std-ref">Generate User Account Certificate</span></a> for details on how to generate the user account certificate in GCP.</p>
</div>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>Click <strong>Get Authorization Code</strong>. You will be prompted to log in to the Google Account:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ03.png"><img alt="../../_images/DS_GBQ03.png" src="../../_images/DS_GBQ03.png" style="width: 300px;" /></a>
</div></blockquote>
</li>
<li><p>After you sign in, the following screen is displayed:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ04.png"><img alt="../../_images/DS_GBQ04.png" src="../../_images/DS_GBQ04.png" style="width: 250px;" /></a>
</div></blockquote>
</li>
<li><p>Click <strong>Allow</strong>.</p></li>
<li><p>On the next screen that opens, copy the authorization code:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ05.png"><img alt="../../_images/DS_GBQ05.png" src="../../_images/DS_GBQ05.png" style="width: 250px;" /></a>
</div></blockquote>
</li>
<li><p>Paste the authorization code in the field to the right of the <strong>Get Authorization Code</strong> button:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ06.png"><img alt="../../_images/DS_GBQ06.png" src="../../_images/DS_GBQ06.png" style="width: 250px;" /></a>
</div></blockquote>
</li>
<li><p>Click <strong>Save</strong>. This saves the authorization code. This field cannot be left blank.</p></li>
<li><p>Click <strong>Save and Continue</strong>. This leads you to the <strong>Access</strong> tab of the data source <strong>Settings</strong> page.</p></li>
</ol>
<section id="authenticating-with-a-service-account">
<h3>Authenticating with a Service Account<a class="headerlink" href="#authenticating-with-a-service-account" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Select the <strong>Enable Service Account Certificate</strong> checkbox. The <strong>Service Account Id</strong> field will be revealed.</p></li>
<li><p>Enter the <strong>Service Account Id</strong>.</p></li>
<li><p>Click <strong>Save</strong>.</p></li>
<li><p>Upload the service account certificate key. See <a class="reference internal" href="GoogleBigQueryPrerequisites.html#google-bigquery-prerequisites-create-service-account-key"><span class="std std-ref">Create a Service Account and Generate a Key</span></a> for details.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ07.png"><img alt="../../_images/DS_GBQ07.png" src="../../_images/DS_GBQ07.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
</ol>
<ol class="arabic simple" start="5">
<li><p>To upload a different service account certificate, click the <strong>Delete</strong> button. This deletes the currently uploaded service account certificate.</p></li>
<li><p>If you want to also use the user account, proceed to provide the OAuth certificate. Follow the steps in <a class="reference internal" href="#data-source-wizard-step-2-authentication">Data Source Wizard Step 2: Authentication</a> , starting with step 2.</p></li>
</ol>
</section>
</section>
<section id="data-source-wizard-step-3-configure-qli">
<h2>Data Source Wizard Step 3: Configure QLI<a class="headerlink" href="#data-source-wizard-step-3-configure-qli" title="Permalink to this headline">¶</a></h2>
<p>There are no specific requirements to set up QLI. <strong>Click Skip This Step</strong>:</p>
<a class="reference internal image-reference" href="../../_images/DS_GBQ11.png"><img alt="../../_images/DS_GBQ11.png" src="../../_images/DS_GBQ11.png" style="width: 3.5in;" /></a>
<p>When the Wizard is complete, run Metadata Extraction, Profiling, and Query Log Ingestion on the respective tabs of the <strong>Settings</strong> page.</p>
</section>
<section id="settings-page">
<h2>Settings Page<a class="headerlink" href="#settings-page" title="Permalink to this headline">¶</a></h2>
<section id="general-settings">
<h3>General Settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h3>
<p>The <strong>General Settings</strong> page allows you to validate the connection, and
upload a new service account certificate or a user account certificate:</p>
<a class="reference internal image-reference" href="../../_images/DS_GBQ08.png"><img alt="../../_images/DS_GBQ08.png" src="../../_images/DS_GBQ08.png" style="width: 5.5in;" /></a>
<p>On the <strong>General Settings</strong> page, DO NOT change the
values <code class="docutils literal notranslate"><span class="pre">bigquery://https://www.googleapis.com;</span></code> and <code class="docutils literal notranslate"><span class="pre">QueryDialect=SQL;</span></code> or
profiling will fail:</p>
<p>Include the <em>Timeout=&lt;Timeout_Value&gt;</em> parameter in the above URI to increase the timeout if large datasets have to be extracted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the user account certificate has not been uploaded, you will not be
able to query the source in Compose: there will be an authentication
error from GCP when you try to connect to your GCP source.</p>
<p>To resolve this, upload the User Account Certificate on the <strong>General
Settings</strong> tab. This needs to be a user account that has access to the
Project you want to query.</p>
</div>
</section>
<section id="metadata-extraction">
<h3>Metadata Extraction<a class="headerlink" href="#metadata-extraction" title="Permalink to this headline">¶</a></h3>
<p>To extract metadata, go to the <strong>Metadata Extraction</strong> tab. Follow the prompts on this tab to perform MDE.</p>
<p>Note that when you do <strong>Fetch Schemas</strong>, Alation will fetch datasets from <strong>all</strong> the projects the user or service account used for authentication has access to in GCP.</p>
<p>The extracted metadata of Google BigQuery data source constitutes metadata of projects, datasets, tables and views, and columns of tables and views.  From 2021.3,
materialized views will also be extracted during MDE. Lineage is not supported for materialized views.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The STRUCT data type is supported from <em>version 2020.3</em>.</p>
<p>From  2022.1, the description of the STRUCT data type will be extracted from the source comments during the metadata extraction and added to the Description field on the Catalog pages of column objects.</p>
</div>
<p>Default Metadata Extraction for Google BigQuery extracts only the SELECT queries from view definitions. To extract complete view definitions for Google BigQuery views and materialized views, perform additional configuration on the Alation server using <strong>alation_conf</strong> and setting the feature flag <em>enable_extraction_of_full_view_definition_for_gbq</em> to True. Refer to <a class="reference internal" href="../../admins/AdditionalConfiguration/ExtracttheCompleteViewDefinitionforGoogleBigQuery.html"><span class="doc">Extract the Complete View Definition</span></a> for more details.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The user or service account used for MDE requires access to the INFORMATION_SCHEMA tables in the Google BigQuery data source to extract complete view definitions. This operation adds to the cost of MDE, refer to <a class="reference external" href="https://cloud.google.com/bigquery/docs/information-schema-intro#pricing">Information Schema Pricing</a> in BigQuery documentation.</p>
</div>
<p><strong>Limitations of Metadata Extraction</strong>:</p>
<ol class="arabic simple">
<li><p>You cannot perform the Include and Exclude extraction operation at the same time.</p></li>
<li><p>You cannot perform extraction of a schema if the schema name begins with an underscore.</p></li>
<li><p>Alation does not extract descriptions of schemas and tables.</p></li>
</ol>
</section>
<section id="data-profiling">
<h3>Data Profiling<a class="headerlink" href="#data-profiling" title="Permalink to this headline">¶</a></h3>
<p>Go to the <strong>Data Profiling</strong> tab to perform profiling. Alation supports table and
column profiling. Standard SQL is used for profiling and supported by
the Simba driver.</p>
<p>Alation does not support profiling for partition tables and column
profiling for the Geography data type.</p>
</section>
<section id="query-log-ingestion">
<h3>Query Log Ingestion<a class="headerlink" href="#query-log-ingestion" title="Permalink to this headline">¶</a></h3>
<p><strong>Sampling in Query Log Ingestion</strong> is not supported for the Google BigQuery data source type. <strong>Sampling in Query Log Ingestion</strong> flag must be off when you perform Query Log Ingestion. Make sure that the flag is off in <strong>General Settings &gt; Sampling in Query Log Ingestion</strong>.</p>
<img alt="../../_images/DS_GBQ18.png" src="../../_images/DS_GBQ18.png" />
<p>Go to the <strong>Query Log Ingestion</strong> tab to perform query log ingestion.QLI is supported for Popularity, top users, Lineage, and surfacing the Filters and Joins information.</p>
</section>
</section>
<section id="setting-up-database-authentication-in-compose">
<h2>Setting up Database Authentication in Compose<a class="headerlink" href="#setting-up-database-authentication-in-compose" title="Permalink to this headline">¶</a></h2>
<p>Authentication for Compose uses the <strong>user account</strong> and goes using the Simba driver. This connection uses the OAuth certificate uploaded to Alation when the data source was configured.  The OAuth certificate uploaded in the <strong>User Account</strong> section of the data source <strong>Settings</strong> &gt; <strong>General Settings</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the user account certificate has not been uploaded, this will result
in an authentication error in Compose. To resolve this, upload a user account certificate on the <strong>General Settings</strong> tab of the data source Settings page (this requires the <em>Data Source Admin</em> level access to the data source). Refresh the Compose page.</p>
</div>
<p>Every user will have to establish a connection to GBQ with their own Google credentials when they use Compose for the first time. However, in the GBQ query history, all Compose queries will be logged as run by the main user whose OAuth certificate is provided in the data source Settings even though individual Compose users authenticate in Compose using their own Google credentials. Individual query history will be available in Alation, but not in GBQ query log.</p>
<p>Ensure that you use the correct configuration for Compose URI:</p>
<blockquote>
<div><ul class="simple">
<li><p>DO NOT change <code class="docutils literal notranslate"><span class="pre">bigquery://https://www.googleapis.com</span></code></p></li>
<li><p>ProjectId=&lt;Project ID&gt; where &lt;Project ID&gt; is the Project ID of a
billing-enabled Project.</p></li>
</ul>
</div></blockquote>
<p>Your default connection URL will look like this:</p>
<blockquote>
<div><p><strong>bigquery://https://www.googleapis.com/bigquery/v2:443;ProjectId=my-project-for-gbq-source;QueryDialect=SQL;</strong></p>
</div></blockquote>
<p>The default connection uses the Standard SQL parameter. See <a class="reference internal" href="#using-standard-or-legacy-sql">Using Standard or Legacy SQL</a> below.</p>
<p>To connect in Compose,</p>
<ol class="arabic">
<li><p>Select the connection you want to use:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ12.png"><img alt="../../_images/DS_GBQ12.png" src="../../_images/DS_GBQ12.png" style="width: 5.5in;" /></a>
</div></blockquote>
</li>
</ol>
<ol class="arabic" start="2">
<li><p> Click the <strong>Refresh</strong> connection button for the selected connection:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ13.png"><img alt="../../_images/DS_GBQ13.png" src="../../_images/DS_GBQ13.png" style="width: 5.5in;" /></a>
</div></blockquote>
</li>
<li><p>In the Google Authorization dialog that opens, click <strong>Authorize</strong>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ14.png"><img alt="../../_images/DS_GBQ14.png" src="../../_images/DS_GBQ14.png" style="width: 300px;" /></a>
</div></blockquote>
</li>
<li><p>On the next screen, choose the account you want to authorize with then click <strong>Allow</strong>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ15.png"><img alt="../../_images/DS_GBQ15.png" src="../../_images/DS_GBQ15.png" style="width: 300px;" /></a>
</div></blockquote>
</li>
<li><p>Upon successful authentication with Google, an authorization code will be displayed. Copy and paste this code from the Google authentication window into the <strong>Code</strong> field in the Database Authentication window in Alation Compose and click <strong>Connect</strong>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/DS_GBQ16.png"><img alt="../../_images/DS_GBQ16.png" src="../../_images/DS_GBQ16.png" style="width: 300px;" /></a>
</div></blockquote>
</li>
</ol>
<p>Note that if you receive errors when trying to authorize with Google, it may be:</p>
<ul class="simple">
<li><p><strong>404 error - page not found</strong> see <a class="reference internal" href="GoogleBigQueryTroubleshooting.html#google-bigquery-troubleshooting-404"><span class="std std-ref">Page Not Found (404) when authorizing with Google</span></a>.</p></li>
<li><p><strong>The app not verified by Google error</strong> see <a class="reference internal" href="GoogleBigQueryTroubleshooting.html#google-bigquery-troubleshooting-auth-error"><span class="std std-ref">An authentication error when connecting in Compose</span></a>.</p></li>
</ul>
<p>Starting with <em>V R6 (5.10.x)</em>, users can execute concurrent queries on Google BigQuery source.</p>
</section>
<section id="using-standard-or-legacy-sql">
<h2>Using Standard or Legacy SQL<a class="headerlink" href="#using-standard-or-legacy-sql" title="Permalink to this headline">¶</a></h2>
<p>Starting with V R6, Alation supports both Standard and Legacy SQL for
GBQ data sources. You need to manually define the syntax you want to use
in the Connection URI in Compose.</p>
<p>To define the syntax, change the parameter <strong>QueryDialect</strong> in the
Compose connection URI: <code class="docutils literal notranslate"><span class="pre">QueryDialect=SQL</span></code> or <code class="docutils literal notranslate"><span class="pre">QueryDialect=BIG_QUERY</span></code>. Refresh the Compose page and reconnect.</p>
<p>URI Example:</p>
<p><strong>bigquery://https://www.googleapis.com/bigquery/v2:443;ProjectId=my-project-for-gbq-source;QueryDialect=SQL;</strong></p>
</section>
<section id="setup-in-alation-v-r5-5-9-x-and-below">
<h2>Setup in Alation V R5 (5.9.x) and Below<a class="headerlink" href="#setup-in-alation-v-r5-5-9-x-and-below" title="Permalink to this headline">¶</a></h2>
<section id="data-source-wizard-step-1-configure-connection">
<h3>Data Source Wizard Step 1: Configure Connection<a class="headerlink" href="#data-source-wizard-step-1-configure-connection" title="Permalink to this headline">¶</a></h3>
<p><strong>Host</strong> refers to the service account email and <strong>Database Name</strong> will be the <strong>Project ID</strong>:</p>
<a class="reference internal image-reference" href="../../_images/DS_GBQ09.png"><img alt="../../_images/DS_GBQ09.png" src="../../_images/DS_GBQ09.png" style="width: 3.5in;" /></a>
</section>
<section id="data-source-wizard-step-2-download-certificates">
<h3>Data Source Wizard Step 2: Download Certificates<a class="headerlink" href="#data-source-wizard-step-2-download-certificates" title="Permalink to this headline">¶</a></h3>
<p>Use this section to upload the Service Account certificate and the User Account certificate.</p>
<a class="reference internal image-reference" href="../../_images/DS_GBQ10.png"><img alt="../../_images/DS_GBQ10.png" src="../../_images/DS_GBQ10.png" style="width: 3.5in;" /></a>
</section>
</section>
<section id="id1">
<h2>Data Source Wizard Step 3: Configure QLI<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>There are no specific requirements to set up QLI. <strong>Click Skip This Step</strong>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="GoogleBigQueryPrerequisites.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Google BigQuery Prerequisites
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="GoogleBigQueryFAQ.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Google BigQuery FAQ
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on datasources/GBQ/GoogleBigQuerySetup&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Google BigQuery Setup in Alation</a><ul>
<li><a class="reference internal" href="#data-source-wizard-step-1-connection-information">Data Source Wizard Step 1: Connection Information</a></li>
<li><a class="reference internal" href="#data-source-wizard-step-2-authentication">Data Source Wizard Step 2: Authentication</a><ul>
<li><a class="reference internal" href="#authenticating-with-a-service-account">Authenticating with a Service Account</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-source-wizard-step-3-configure-qli">Data Source Wizard Step 3: Configure QLI</a></li>
<li><a class="reference internal" href="#settings-page">Settings Page</a><ul>
<li><a class="reference internal" href="#general-settings">General Settings</a></li>
<li><a class="reference internal" href="#metadata-extraction">Metadata Extraction</a></li>
<li><a class="reference internal" href="#data-profiling">Data Profiling</a></li>
<li><a class="reference internal" href="#query-log-ingestion">Query Log Ingestion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setting-up-database-authentication-in-compose">Setting up Database Authentication in Compose</a></li>
<li><a class="reference internal" href="#using-standard-or-legacy-sql">Using Standard or Legacy SQL</a></li>
<li><a class="reference internal" href="#setup-in-alation-v-r5-5-9-x-and-below">Setup in Alation V R5 (5.9.x) and Below</a><ul>
<li><a class="reference internal" href="#data-source-wizard-step-1-configure-connection">Data Source Wizard Step 1: Configure Connection</a></li>
<li><a class="reference internal" href="#data-source-wizard-step-2-download-certificates">Data Source Wizard Step 2: Download Certificates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Data Source Wizard Step 3: Configure QLI</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->