
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Deferred Query Execution &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Additional Configuration" href="index.html"/>
        <link rel="next" title="Managing Space: Monitor Postgres Table Size" href="MonitoringPostgresTableSize.html"/>
        <link rel="prev" title="Enable Table Privacy" href="EnableTablePrivacy.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Additional Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Usingalation_conf.html">Using alation_conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="ObfuscateLiteralsinViewSQL.html">Obfuscate Literals in View SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableTopContributorsReport.html">Enable Alation Analytics Top Contributors Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="EditingEtcHosts.html">Editing /etc/hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableTablePrivacy.html">Enable Table Privacy</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deferred Query Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="MonitoringPostgresTableSize.html">Managing Space: Monitor Postgres Table Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="PurgingQueryResults.html">Managing Space: Purge Query Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="ManageAccessToDataExportAndDownload.html">Manage Access to Data Export and Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisableUsernameMigration.html">Disable the Username Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisableUserCredentialsStorage.html">Disable or Enable User Credentials Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureAPITokensManagement.html">Configure the API Tokens Management Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureServiceCloudAccessforDesignatedAdmins.html">Configure Service Cloud Access for Designated Admins</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureAccesstoInternalHelpDesk.html">Configure Access to the Internal Help Desk</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnablePermissionforDataSourceAdmintoAddSources.html">Enable Permission for Data Source Admin to Add Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnablePaginationForLineage.html">Enable Pagination for Lineage</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableDebugLogLevel.html">Enable Debug Mode for Capturing the Detailed Level Logs (Custom DB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableMarketplaces.html">Enable or Disable Marketplaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableConnectedSheetsHub.html">Enable Connected Sheets Hub</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableObjectDefinedRemovability.html">Enable Removability of Object-defined Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableorDisableSearchAutocomplete.html">Enable or Disable Search Autocomplete</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableCustomFieldSearch.html">Enable Custom Field Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisableNotSet.html">Disable the Not Set Filter Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnabletheLexiconSearch.html">Enable the Lexicon Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetSearchRankingByOType.html">Set Search Ranking by Object Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetSearchRankingfortheEndorsementandDeprecationFlags.html">Set Search Ranking for the Endorsement and Deprecation Flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetPasswordforPostgreSQLInstance.html">Set Password for Internal PostgreSQL Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="UseSuggestedStewards.html">Use Allie to Suggest Stewards</a></li>
<li class="toctree-l2"><a class="reference internal" href="SetStewardshipParameter.html">Set stewardship.curation_progress.ingestion.batch_size Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="Setbulk_insert_SQL_str_length_limitParameter.html">Set bulk_insert_sql_str_length_limit Parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="BetaAzureMetadataExtraction.html">Beta Azure Metadata Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="MultiCatalogSupportforDatasourcesLikePresto.html">Multi-Catalog Support for Data Sources Like Presto</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableCassandraDatasource.html">Enable Cassandra Data Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="CustomAttributeMapforSAMLConfiguration.html">Use a Custom Attribute map for SAML Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuoteTextFieldsforExportandDownload.html">Wrap Text Fields in Quotes for Export and Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="ResetLDAPBindPassword.html">Reset LDAP Bind Password Using CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnableOrDisableQueryScheduling.html">Enable or Disable Query Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="ObjectMentionUpdates.html">Updating Object Mentions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ControlLeft-HandNavigationBarBehavior.html">Control Left-Hand Navigation Bar Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="DisableRoleSelectionForSSOEnabledSources.html">Disable Role Selection for SSO-Enabled Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExtracttheCompleteViewDefinitionforGoogleBigQuery.html">Extract the Complete View Definition for Google BigQuery</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How-tos/index.html">How-tos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Additional Configuration</a>
    <span class="separator">&gt;</span>
    <span>Deferred Query Execution</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="deferred-query-execution">
<h1>Deferred Query Execution<a class="headerlink" href="#deferred-query-execution" title="Permalink to this headline">¶</a></h1>
<p class="cloud-label hover-text">Alation Cloud Service <span class="tooltip-text">Applies to Alation Cloud Service instances of Alation</span></p>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p><em>Available from release 2021.4</em></p>
<p>Deferred query execution is a feature of Alation that improves system stability when many queries are being run. With deferred query execution, Alation will run queries from all users at the same time until the number of running queries exceeds a certain threshold. Once the threshold is exceeded, Alation will start to queue queries. Queued queries will be executed in a first in, first out manner until the number of running queries drops below the threshold.</p>
<p>Starting in 2022.3, deferred query execution is enabled by default and configured automatically. Upgrading to 2022.3 will automatically enable the feature and set the threshold and related settings to optimal default values. This will overwrite any custom values you may have configured for deferred query execution.</p>
<p>In 2022.2 and older versions, deferred query execution must be enabled and configured by a Server Admin with access to the Alation shell. See <a class="reference internal" href="#version-2022-2-and-earlier"><span class="std std-ref">below</span></a> for instructions.</p>
<section id="actions-affected-by-deferred-query-execution">
<h2>Actions Affected by Deferred Query Execution<a class="headerlink" href="#actions-affected-by-deferred-query-execution" title="Permalink to this headline">¶</a></h2>
<p>Deferred query execution affects the following actions:</p>
<blockquote>
<div><ul>
<li><p>Running queries: all actions under the <strong>Run</strong> menu in Compose</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/composeDeferredExecution_01.png"><img alt="../../_images/composeDeferredExecution_01.png" src="../../_images/composeDeferredExecution_01.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
<li><p>Running and exporting queries: all actions under the <strong>Export</strong> menu in Compose</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/composeDeferredExecution_02.png"><img alt="../../_images/composeDeferredExecution_02.png" src="../../_images/composeDeferredExecution_02.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
<li><p>Scheduled query execution</p></li>
<li><p>Refreshing Excel Live Reports</p></li>
<li><p>Running Query Forms from the Catalog</p></li>
</ul>
</div></blockquote>
<p>When a concurrency threshold is reached by the system, Compose users will see a <em>Query queued</em> message:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/composeDeferredExecution_03.png"><img alt="../../_images/composeDeferredExecution_03.png" src="../../_images/composeDeferredExecution_03.png" style="width: 250px;" /></a>
</div></blockquote>
<p>On the Results pane, the deferred state will be indicated with the <strong>Queued</strong> status with the clock icon and a timestamp indicating that the time the execution batch was deferred:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/composeDeferredExecution_04.png"><img alt="../../_images/composeDeferredExecution_04.png" src="../../_images/composeDeferredExecution_04.png" style="width: 250px;" /></a>
</div></blockquote>
<p>After query execution is launched, the UI will update accordingly and the <em>Launching query…</em> message and then the <em>Running</em> status of the query will be displayed.</p>
<p>For query forms, the <strong>Run</strong> button will display the <em>Running</em> state and the Statement will show that the form has been queued. A queued form will be executed when resources are released:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/composeDeferredExecution_05.png"><img alt="../../_images/composeDeferredExecution_05.png" src="../../_images/composeDeferredExecution_05.png" style="width: 400px;" /></a>
</div></blockquote>
</section>
<section id="shared-connections-and-concurrency-settings-for-a-data-source">
<h2>Shared Connections and Concurrency Settings for a Data Source<a class="headerlink" href="#shared-connections-and-concurrency-settings-for-a-data-source" title="Permalink to this headline">¶</a></h2>
<p>Deferred query execution is a global setting and applies to all data sources. The concurrency and shared connection settings that may be configured for a specific data source do not prevent or affect query queuing.</p>
<p>For example, the data sources that are added using native (built-in) connectors or using Custom DB, have two Compose Connection Sharing options in their settings under <strong>General Settings &gt; Compose Connections</strong> &gt; Compose Connection Sharing:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>Shared connections across tabs</em> (default)</p></li>
<li><p><em>Separate connection per tab</em></p></li>
</ul>
</div></blockquote>
<p>These settings do not affect deferred query execution as queuing does not depend on the number of connections.</p>
<p>The Custom DB data source type has an additional concurrency setting on the <strong>Custom Settings</strong> tab of the Settings page:</p>
<blockquote>
<div><ul class="simple">
<li><p>Enable concurrent queries (disabled by default)</p></li>
</ul>
</div></blockquote>
<p>This setting does not affect deferred query execution either. A single user can still have their query queued because the threshold is met due to other users running queries or because they themselves are running too many queries.</p>
</section>
<section id="configuring-deferred-query-execution">
<h2>Configuring Deferred Query Execution<a class="headerlink" href="#configuring-deferred-query-execution" title="Permalink to this headline">¶</a></h2>
<section id="version-2022-3-and-later">
<h3>Version 2022.3 and Later<a class="headerlink" href="#version-2022-3-and-later" title="Permalink to this headline">¶</a></h3>
<p>In version 2022.3 and later, deferred query execution is enabled and configured automatically. Contact Alation Support for help adjusting your settings, if needed.</p>
</section>
<section id="version-2022-2-and-earlier">
<span id="id1"></span><h3>Version 2022.2 and Earlier<a class="headerlink" href="#version-2022-2-and-earlier" title="Permalink to this headline">¶</a></h3>
<p>In version 2022.2 and earlier, deferred query execution must be configured and enabled manually using the steps below. On these versions, consider enabling deferred query execution if:</p>
<ul>
<li><p>Your instance has a large number of active Compose users who run queries simultaneously.</p></li>
<li><p>Users report performance degradation in Compose during peak hours:</p>
<blockquote>
<div><ul class="simple">
<li><p>Performance may deteriorate when there is connection resource contention and Compose is unable to process all user query requests because connection resources are exhausted.</p></li>
<li><p>Frequent disk access also slows down Compose responsiveness to all users.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<section id="step-1-define-concurrency-thresholds">
<h4>Step 1: Define Concurrency Thresholds<a class="headerlink" href="#step-1-define-concurrency-thresholds" title="Permalink to this headline">¶</a></h4>
<p>The amount of resources that can be used for simultaneous query execution and other server processes is stored in the <strong>alation_conf</strong> parameters <code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code> and <code class="docutils literal notranslate"><span class="pre">uwsgi.threads</span></code>. The default values are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code> = 10</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uwsgi.threads</span></code> = 2</p></li>
</ul>
</div></blockquote>
<p>The total number of available uWSGI processes is the number of processes times the number of threads: <em>10 X 2 = 20</em>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not recommended to change these defaults unless instructed by Alation Support in a specific troubleshooting scenario.</p>
</div>
</div></blockquote>
<p>Based on these defaults, you can allocate some processes for concurrent query execution. If the value you set is exceeded, Alation will begin to queue query executions. They will be queued and run as soon as resources become available.</p>
<p>You’ll need to define the following settings:</p>
<ul>
<li><p><strong>Maximum query concurrency</strong>: This parameter determines the number of queries that are allowed to run simultaneously before they start to get queued. This affects all types of queries: Compose, query forms, scheduled queries, exports, and Excel Live reports.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Recommended value:</strong> Set to a number that equals 70% of the total number of available processes. With the default values of <code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code> and <code class="docutils literal notranslate"><span class="pre">uwsgi.threads</span></code>, you can set it to <code class="docutils literal notranslate"><span class="pre">14</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Maximum export concurrency</strong>: This parameter further limits the number of exports and Excel Live reports that are allowed to run simultaneously before they start to get queued. This parameter only takes effect if its value is lower than the maximum query concurrency. If not set, or if set to a value higher than the maximum query concurrency, exports and Excel Live reports will use the value set for maximum query concurrency instead.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Recommended value:</strong> Set to a number that equals to 30% of the total number of available processes. With the default values of <code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code> and <code class="docutils literal notranslate"><span class="pre">uwsgi.threads</span></code>, you can set it to <code class="docutils literal notranslate"><span class="pre">6</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Minimum polling interval</strong>: This parameter determines how long Alation waits to check with the server to see if a query is queued, running, or complete. The value is in milliseconds.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Recommended value:</strong> With the default values of <code class="docutils literal notranslate"><span class="pre">uwsgi.processes</span></code> and <code class="docutils literal notranslate"><span class="pre">uwsgi.threads</span></code>, set to <code class="docutils literal notranslate"><span class="pre">15000</span></code> (15 seconds). You can decrease this value so polling occurs more often if you have more processes. For example, with 4 threads and 40 processes, you could set this value to <code class="docutils literal notranslate"><span class="pre">3000</span></code> (3 seconds). If you have changed the default number of threads and processes, please check with Alation Support to determine an appropriate value for the minimum polling interval.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="step-2-enter-the-alation-shell">
<h4>Step 2: Enter the Alation Shell<a class="headerlink" href="#step-2-enter-the-alation-shell" title="Permalink to this headline">¶</a></h4>
<p>Concurrency thresholds are set in <strong>alation_conf</strong>. To use <strong>alation_conf</strong>, you must first access the Alation server and enter the Alation shell.</p>
<ol class="arabic">
<li><p>Use SSH to connect to the Alation server.</p></li>
<li><p>Enter the Alation shell using the following command:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</li>
</ol>
</section>
<section id="step-3-set-the-concurrency-thresholds">
<h4>Step 3: Set the Concurrency Thresholds<a class="headerlink" href="#step-3-set-the-concurrency-thresholds" title="Permalink to this headline">¶</a></h4>
<p>The way you set the concurrency thresholds depends on your Alation version. See the appropriate instructions below for your Alation version.</p>
<p><em>For versions 2021.4.8 and later:</em></p>
<p>Set the dedicated parameters for maximum query and export concurrency as determined in step 1.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.connector.managed_execution.max_query_concurrency<span class="w"> </span>-s<span class="w"> </span><span class="m">14</span>
alation_conf<span class="w"> </span>alation.connector.managed_execution.max_export_concurrency<span class="w"> </span>-s<span class="w"> </span><span class="m">6</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>These dedicated parameters will override any values set by the <code class="docutils literal notranslate"><span class="pre">connector.extra_flags</span></code> parameter.</p>
</div>
<p><em>For versions 2021.4.7 and earlier:</em></p>
<p>Add the <code class="docutils literal notranslate"><span class="pre">-Dconnector.max_query_concurrency</span></code> and the <code class="docutils literal notranslate"><span class="pre">-Dconnector.max_export_concurrency</span></code> values to the <strong>alation_conf</strong> parameter <code class="docutils literal notranslate"><span class="pre">connector.extra_flags</span></code>.</p>
<blockquote>
<div><div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="docutils literal notranslate"><span class="pre">connector.extra_flags</span></code> parameter may already have some existing values set. You need to append the new values. Do not overwrite the existing values.</p>
</div>
</div></blockquote>
<ol class="arabic">
<li><p>Check the current values of <code class="docutils literal notranslate"><span class="pre">connector.extra_flags</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>connector.extra_flags
</pre></div>
</div>
<p>This will print the current values to the console.</p>
</li>
<li><p>Set the new values. Note the space after the first single quote and before the first value. Make sure your value string includes this space.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>connector.extra_flags<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; -Dconnector.max_query_concurrency=14 -Dconnector.max_export_concurrency=6&#39;</span>
</pre></div>
</div>
<p>Example of adding new values to existing values:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.connector.managed_execution.max_query_concurrency<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; -Dconnector.max_query_concurrency=14 -Dconnector.max_export_concurrency=6 -Djavax.net.ssl.trustStorePassword=changeit&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>Stay in the Alation shell.</p>
</section>
<section id="step-4-set-the-minimum-polling-interval">
<h4>Step 4: Set the Minimum Polling Interval<a class="headerlink" href="#step-4-set-the-minimum-polling-interval" title="Permalink to this headline">¶</a></h4>
<p>Still in the Alation shell, set the value for the minimum polling interval as determined in step 1.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.query_exec.polling.min_interval<span class="w"> </span>-s<span class="w"> </span><span class="m">15000</span>
</pre></div>
</div>
<p>Stay in the Alation shell.</p>
</section>
<section id="step-5-deploy-alation-conf-and-restart-the-connector">
<h4>Step 5: Deploy alation_conf and Restart the Connector<a class="headerlink" href="#step-5-deploy-alation-conf-and-restart-the-connector" title="Permalink to this headline">¶</a></h4>
<p>Still in the Alation shell, deploy the changes to <strong>alation_conf</strong> and restart the Connector component.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_action<span class="w"> </span>deploy_conf_all
alation_supervisor<span class="w"> </span>restart<span class="w"> </span>java:connector
</pre></div>
</div>
<p>Stay in the Alation shell.</p>
</section>
<section id="step-6-enable-deferred-query-execution">
<h4>Step 6: Enable Deferred Query Execution<a class="headerlink" href="#step-6-enable-deferred-query-execution" title="Permalink to this headline">¶</a></h4>
<p>After setting the thresholds, enable deferred query execution:</p>
<ol class="arabic">
<li><p>Still in the Alation shell, use <strong>alation_conf</strong> again and set the parameter <code class="docutils literal notranslate"><span class="pre">alation.query_exec.deferral.enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.query_exec.deferral.enabled<span class="w"> </span>-s<span class="w"> </span>True
</pre></div>
</div>
<p>No restart is required after changing this value.</p>
</div></blockquote>
</li>
<li><p>Exit the Alation shell:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<section id="enabling-deferred-query-execution-in-the-ui">
<h5>Enabling Deferred Query Execution in the UI<a class="headerlink" href="#enabling-deferred-query-execution-in-the-ui" title="Permalink to this headline">¶</a></h5>
<p>Alternatively, you can turn deferred query execution on and off in the Alation UI in <strong>Admin Settings &gt; Compose Settings</strong>. Use the feature toggle <strong>Allow Query Execution Deferral</strong> in order to enable or disable it. However, the concurrency thresholds cannot be set in the Alation UI and require backend access to the Alation server.</p>
<blockquote>
<div><img alt="../../_images/composeDeferredExecution_06.png" src="../../_images/composeDeferredExecution_06.png" />
</div></blockquote>
<p>If the concurrency thresholds are configured but deferred query execution feature is disabled, the thresholds will still apply and query executions will be queued anyway. However, users will not see the <em>Query queued</em> message in the Compose UI. Queries will remain in the <em>Launching query</em> state until resources become available.</p>
<p>If the concurrency thresholds are not set but deferred query execution is enabled, then the feature will have no effect on the system and query executions will not be queued. If you enable deferred query execution, make sure the concurrency thresholds have been set.</p>
</section>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="EnableTablePrivacy.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Enable Table Privacy
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="MonitoringPostgresTableSize.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />Managing Space: Monitor Postgres Table Size
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on admins/AdditionalConfiguration/DeferredQueryExecution&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Deferred Query Execution</a><ul>
<li><a class="reference internal" href="#actions-affected-by-deferred-query-execution">Actions Affected by Deferred Query Execution</a></li>
<li><a class="reference internal" href="#shared-connections-and-concurrency-settings-for-a-data-source">Shared Connections and Concurrency Settings for a Data Source</a></li>
<li><a class="reference internal" href="#configuring-deferred-query-execution">Configuring Deferred Query Execution</a><ul>
<li><a class="reference internal" href="#version-2022-3-and-later">Version 2022.3 and Later</a></li>
<li><a class="reference internal" href="#version-2022-2-and-earlier">Version 2022.2 and Earlier</a><ul>
<li><a class="reference internal" href="#step-1-define-concurrency-thresholds">Step 1: Define Concurrency Thresholds</a></li>
<li><a class="reference internal" href="#step-2-enter-the-alation-shell">Step 2: Enter the Alation Shell</a></li>
<li><a class="reference internal" href="#step-3-set-the-concurrency-thresholds">Step 3: Set the Concurrency Thresholds</a></li>
<li><a class="reference internal" href="#step-4-set-the-minimum-polling-interval">Step 4: Set the Minimum Polling Interval</a></li>
<li><a class="reference internal" href="#step-5-deploy-alation-conf-and-restart-the-connector">Step 5: Deploy alation_conf and Restart the Connector</a></li>
<li><a class="reference internal" href="#step-6-enable-deferred-query-execution">Step 6: Enable Deferred Query Execution</a><ul>
<li><a class="reference internal" href="#enabling-deferred-query-execution-in-the-ui">Enabling Deferred Query Execution in the UI</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->