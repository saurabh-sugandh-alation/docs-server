
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>How to Mount Data Volumes on New Virtual Instances &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="How-tos" href="index.html"/>
        <link rel="next" title="How to Enable X-Frame-Options Settings" href="HowtoEnableXFrameOptionsSettings.html"/>
        <link rel="prev" title="How to Free Memory" href="HowtoFreeMemory.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How-tos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="HowToFindDataSourceID.html">How to Find Data Source ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToSetUpLDAPGroupSyncWithSAMLAuth.html">How to Set Up LDAP Group Sync with SAML Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="ConfigureAllowedFileTypesForAttachments.html">How to Configure a List of Allowed File Types for Article Attachments</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToScanPostgresForCorruptedIndexes.html">How to Scan Postgres For Corrupted Indexes</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoCleanUpPostgres9_3Data.html">How to Clean up Postgres 9.3 Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoFreeMemory.html">How to Free Memory</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to Mount Data Volumes on New Virtual Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoEnableXFrameOptionsSettings.html">How to Enable X-Frame-Options Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoConvertUsernames.html">How to Convert Usernames</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoConnecttotheServer.html">How to Connect to the Customer Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoSetStoredUserCredentialsforDataSourcestoExpire.html">How to Set Stored User Credentials for Data Sources to Expire</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoChangetheDatabasePassword.html">How to Change the Database Password</a></li>
<li class="toctree-l2"><a class="reference internal" href="AWSInstancePreparation.html">AWS Instance Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoReinitializeAlation.html">How to Reinitialize Alation Without Re-Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowtoUninstallAlation.html">How to Uninstall Alation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Troubleshooting/index.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">How-tos</a>
    <span class="separator">&gt;</span>
    <span>How to Mount Data Volumes on New Virtual Instances</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="how-to-mount-data-volumes-on-new-virtual-instances">
<h1>How to Mount Data Volumes on New Virtual Instances<a class="headerlink" href="#how-to-mount-data-volumes-on-new-virtual-instances" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p><em>Available from version V R5 (5.9.x)</em></p>
<section id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<p>Alation is installed in a virtual instance that uses virtual data
volumes, for example, in AWS EC2.</p>
</section>
<section id="goal">
<h2>Goal<a class="headerlink" href="#goal" title="Permalink to this headline">¶</a></h2>
<p>This article describes the process to be followed in the case you want
to move the data and backup drives from an Alation instance you want to
deprecate to a new Alation system. This, in effect, enables you to move
your data from one system to another without needing to restore from an
Alation backup.</p>
<p>The new Alation system should be running the same (or higher) version of
Alation as the original system. This guarantees compatibility between
the structure of the data and backup drives and the running software.</p>
<p>If moving the drives to an Alation system running a higher version of
the binaries, make sure the updated version is no more than two
releases higher. For example, R4 to R6 would be supported. R4 to R7
would not. Note that downgrade is not supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This procedure has only been tested for AWS EC2.</p>
<p>For AWS-specific instruction see <a class="reference internal" href="#step-by-step-volume-remounting-for-aws-ec2">Step-by-Step Volume Remounting For AWS EC2</a> , below.</p>
</div>
</section>
<section id="moving-data-volumes-to-a-new-instance">
<h2>Moving Data Volumes to a New Instance<a class="headerlink" href="#moving-data-volumes-to-a-new-instance" title="Permalink to this headline">¶</a></h2>
<section id="step-1-remount-the-data-volumes-from-the-old-to-the-new-alation-instance">
<h3>Step 1. Remount the data volumes from the old to the new Alation instance<a class="headerlink" href="#step-1-remount-the-data-volumes-from-the-old-to-the-new-alation-instance" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Stop the old instance that you are going to deprecate.</p></li>
<li><p>Unmount the existing data volumes <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/backup</span></code> from the old instance. Make sure the alation service is stopped before un-mounting.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>umount<span class="w"> </span>/data
umount<span class="w"> </span>/backup
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Names <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/backup</span></code> are used as sample names of the data disk mount points.
Mount points may have different names in your instance.</p>
</div>
<p>After unmounting, you will need to detach these volumes from
the current virtual machine and attach to the new one. Detaching and
attaching steps will depend on the cloud services provider you are
using.</p>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>After you detach and attach to a new machine, mount the existing volumes <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/backup</span></code> on the new instance where you will install Alation.</p>
<ul>
<li><p>get the device name (eg. <em>xvdf</em>, <em>xvdg</em>) after the volumes are
attached to the new machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lsblk
</pre></div>
</div>
</li>
<li><p>create directories /data (100 GB size) and /backup (50 GB size) if
not present and mount:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mount<span class="w"> </span>/dev/xvdf<span class="w"> </span>/data
mount<span class="w"> </span>/dev/xvdg<span class="w"> </span>/backup
cat<span class="w"> </span>/etc/fstab
mount<span class="w"> </span>-a
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Use SSH to connect to the machine of the new instance and verify that the volumes are attached. You can use the <code class="docutils literal notranslate"><span class="pre">lsblk</span></code> command to do that.</p></li>
</ol>
<p><em>Sample lsblk output</em>:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/LSBLK1.png"><img alt="../../_images/LSBLK1.png" class="align-center" src="../../_images/LSBLK1.png" style="width: 5.5in;" /></a>
</div></blockquote>
</section>
<section id="step-2-install-the-alation-binaries-on-the-new-instance">
<h3>Step 2. Install the Alation binaries on the new instance<a class="headerlink" href="#step-2-install-the-alation-binaries-on-the-new-instance" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p>Install the Alation binaries on the new instance.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>rpm<span class="w"> </span>-ivh<span class="w"> </span>alation####.rpm
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>alation####.deb
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do NOT run the <code class="docutils literal notranslate"><span class="pre">service</span> <span class="pre">alation</span> <span class="pre">init</span> <span class="pre">/data</span> <span class="pre">/backup</span></code> command on the new instance.</p>
</div>
</div></blockquote>
</li>
<li><p>Run the following script to create the <code class="docutils literal notranslate"><span class="pre">.disk1_cache</span></code> and <code class="docutils literal notranslate"><span class="pre">.disk2_cache</span></code> files:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt/alation/alation
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;/data&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>.disk1_cache
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;/backup&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>.disk2_cache
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Names <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/backup</span></code> are default names of the data disk mount points. Mount points may have different names in your instance.</p>
</div>
</div></blockquote>
</li>
<li><p>Start Alation:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>alation<span class="w"> </span>start
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run the following permissions script:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>service<span class="w"> </span>alation<span class="w"> </span>shell
alation_chmod_permissions
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Verify that the permissions on the data volumes are set correctly. You can use the <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code>  (<code class="docutils literal notranslate"><span class="pre">ll</span></code>) command to check permissions.</p>
<p>Expected permissions and ownership</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 41%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Directory</p></th>
<th class="head"><p>Expected Permissions</p></th>
<th class="head"><p>Group and User</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">./</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>root root</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">../</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dr-xr-xr-x</span></code></p></td>
<td><p>root root</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">elasticsearch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>alation alation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">lost+found</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwx------</span></code></p></td>
<td><p>root root</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mongo</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>mongod mongod</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pgsql</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwx------</span></code></p></td>
<td><p>postgres postgres</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">redis</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>alation alation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">replication</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>alation alation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">site_data</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxr-xr-x</span></code></p></td>
<td><p>alation alation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tmp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">drwxrwxrwt</span></code></p></td>
<td><p>root root</p></td>
</tr>
</tbody>
</table>
<p>Sample Permissions Check:</p>
<a class="reference internal image-reference" href="../../_images/PERM_CHECK.png"><img alt="../../_images/PERM_CHECK.png" class="align-center" src="../../_images/PERM_CHECK.png" style="width: 5.5in;" /></a>
</li>
<li><p>Validate that the base URL is working and pointing to the new instance by entering the new instance IP address in the browser. If it is redirected to the old Instance, change the base URL to point to the new instance.</p></li>
</ol>
<p>For details on the base URL, refer to <a class="reference internal" href="../../installconfig/ServerInstallation/ChangeBaseURL.html"><span class="doc">How to Change the Base URL</span></a>.</p>
<p>Now you have remounted the data volumes to your new Alation instance.</p>
</section>
</section>
<section id="step-by-step-volume-remounting-for-aws-ec2">
<h2>Step-by-Step Volume Remounting For AWS EC2<a class="headerlink" href="#step-by-step-volume-remounting-for-aws-ec2" title="Permalink to this headline">¶</a></h2>
<p>In AWS EC2, you can detach the existing EBS volumes from a EC2 instance
and re-mount them to a new instance using AWS EC2 Admin UI.</p>
<p>This section includes a step-by-step instruction for re-mounting EBS
volumes holding Alation’s data disks to a new AWS EC2 instance that will
host Alation.</p>
<ol class="arabic">
<li><p>Stop the existing AWS Instance that has the to-be-remounted data volumes attached to it.</p></li>
<li><p>Find the EBS volumes which need to be detached. Look under <strong>Block devices</strong>.</p>
<p>These volumes hold  Alation’s <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/</span> <span class="pre">backup</span></code> data disks.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Names <code class="docutils literal notranslate"><span class="pre">/data</span></code> and <code class="docutils literal notranslate"><span class="pre">/backup</span></code> are used as sample names of the  data disk mount points. Mount points may have different names in your instance.</p>
</div>
<p>Block devices example:</p>
<a class="reference internal image-reference" href="../../_images/AWS_Block_devices.png"><img alt="../../_images/AWS_Block_devices.png" class="align-center" src="../../_images/AWS_Block_devices.png" style="width: 5.5in;" /></a>
</li>
</ol>
<ol class="arabic" start="3">
<li><p>Click each block device volume to get the volume ID. Save the ID: it will be used for finding the corresponding volume.</p></li>
<li><p>In the menu, go to <strong>Volumes</strong> and search for each EBS Volume details using the ID. You will find the volume attachment information for this EC2 instance.</p>
<a class="reference internal image-reference" href="../../_images/AWS2_Search_volume.png"><img alt="../../_images/AWS2_Search_volume.png" class="align-center" src="../../_images/AWS2_Search_volume.png" style="width: 5.5in;" /></a>
</li>
<li><p>Before detaching, make sure the Instance is stopped. To detach,click <strong>Actions</strong> then <strong>Detach Volume</strong> for each volume.</p>
<a class="reference internal image-reference" href="../../_images/AWS_Detach_volume.png"><img alt="../../_images/AWS_Detach_volume.png" class="align-center" src="../../_images/AWS_Detach_volume.png" style="width: 5.5in;" /></a>
<p>After being detached, the EBS volumes will be in the <code class="docutils literal notranslate"><span class="pre">Available</span></code> state
and available for re-mounting.</p>
</li>
<li><p>To attach the volumes to the new instance, you need the new instance ID. Copy and save the new instance ID to be used for attaching the volumes.</p></li>
<li><p>Attach each volume to the new instance. For each volume, click <strong>Actions</strong> then <strong>Attach Volume</strong> then paste the new instance ID to the Attach Volume dialog.</p>
<a class="reference internal image-reference" href="../../_images/AWS_attach_volume.png"><img alt="../../_images/AWS_attach_volume.png" class="align-center" src="../../_images/AWS_attach_volume.png" style="width: 5.5in;" /></a>
<a class="reference internal image-reference" href="../../_images/AWS_attach_volume2.png"><img alt="../../_images/AWS_attach_volume2.png" class="align-center" src="../../_images/AWS_attach_volume2.png" style="width: 5.5in;" /></a>
</li>
<li><p>Follow the volume mounting instruction from <a class="reference external" href="#h_33e0c6b6-3447-4b37-a747-806840bb647f">Install the Alation binaries on the new instance</a> and complete the setup.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="HowtoFreeMemory.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />How to Free Memory
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="HowtoEnableXFrameOptionsSettings.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />How to Enable X-Frame-Options Settings
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on admins/How-tos/HowtoMountDataVolumesonNewVirtualInstances&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">How to Mount Data Volumes on New Virtual Instances</a><ul>
<li><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li><a class="reference internal" href="#goal">Goal</a></li>
<li><a class="reference internal" href="#moving-data-volumes-to-a-new-instance">Moving Data Volumes to a New Instance</a><ul>
<li><a class="reference internal" href="#step-1-remount-the-data-volumes-from-the-old-to-the-new-alation-instance">Step 1. Remount the data volumes from the old to the new Alation instance</a></li>
<li><a class="reference internal" href="#step-2-install-the-alation-binaries-on-the-new-instance">Step 2. Install the Alation binaries on the new instance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-by-step-volume-remounting-for-aws-ec2">Step-by-Step Volume Remounting For AWS EC2</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->