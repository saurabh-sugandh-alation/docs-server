
<!DOCTYPE html>
<html lang="" >
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-version"      content=""/>
  <meta name="book-release"      content=""/>
  <meta name="docsearch:name"    content="Alation User Guide" />
  <meta name="docsearch:version" content="" />
  <meta name="docsearch:package_type" content="" />
	<meta name="robots" content="noindex" />

  
  <title>Configure Server Health Alerts for Administrators &mdash; Alation User Guide</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx_collapse.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/rtd_sphinx_search.min.css" type="text/css" />
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Alation User Guide" href="#"/>
        <link rel="up" title="Troubleshooting" href="index.html"/>
        <link rel="next" title="How to Reindex Tables after Backup Restore" href="ReindexTablesafterBackupRestore.html"/>
        <link rel="prev" title="Default Server Health Alerts" href="DefaultServerHealthAlerts.html"/>

	

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67846571-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-67846571-1');
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<!-- Second Google Analytics tag to assist mapping with mattermost.com visits --> 
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120238482-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-120238482-1');
	</script>


</head>

<body class="wy-body-for-nav" role="document">

  <header>
    <div class="header__container wy-max-content-width">
        <a href="/" class="header__logo">
            <img width="176" src="../../_static/img/logo-alation.svg" alt="Alation" />
        </a>
        <ul class="header__links">
            <li><a href="https://help.alation.com/s/">Alation Help Center</a></li>
        </ul>
    </div>
</header>

  <div class="wy-grid-for-nav wy-max-content-width">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-side-nav-search">
            

            <ul class="sidebartop">
              <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" aria-label="Search this project" id="searchinput" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
</li>

            </ul>

            
          </div>

          <div class="wy-menu wy-sidebar wy-sidebar--hidden" data-spy="affix" role="navigation" aria-label="main navigation">
            
              
              
              
                  <p class="caption" role="heading"><span class="caption-text">Welcome to Alation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/About/index.html">About Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CloudAndOnPrem/index.html">Alation Cloud and On-Premise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/UserProfileandPreferences/index.html">User Profile and Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogBasics/index.html">Catalog Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/CatalogPages/index.html">Catalog Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Conversations/index.html">Conversations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Domains/index.html">Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/BestPractices/index.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../welcome/Glossary/index.html">Alation Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Cloud Service</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/StatusPage/index.html">Status Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudOverview/index.html">Cloud Service Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/CloudConfiguration/index.html">Configuration for Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cloud/AlationAgent/index.html">Alation Agent</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationAnywhere/index.html">Alation Anywhere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integration/AlationConnectedSheets/index.html">Alation Connected Sheets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/ServerInstallation/index.html">Install Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/HighAvailability/index.html">High Availability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/Update/index.html">Update Alation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/BackupandRestore/index.html">Back Up and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV2/index.html">Lineage V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/LineageV3/index.html">Lineage V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationAnalyticsV2/index.html">Alation Analytics V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installconfig/AlationContainerService/index.html">Alation Container Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sources/CatalogSources/index.html">Catalog Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/VirtualDataSources/index.html">Virtual Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/Lineage/index.html">Lineage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/APIResources/index.html">API Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/WorkwithCatalogData/index.html">Working with Catalog Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/OpenConnectorFramework/index.html">Open Connector Framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/DSConfiguration/index.html">Data Source Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AddDataSources/index.html">Adding Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAWSDataSources/index.html">Compose SSO for Amazon Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/ComposeSSOAzureDataSources/index.html">Compose SSO for Azure Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/AuthenticationForExtraction/index.html">Authentication for Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/CustomDB/index.html">Custom DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/GBQ/index.html">Google BigQuery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../datasources/Hive/index.html">Hive</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">BI Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddBISources/index.html">Add BI Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/AddTableauServer/index.html">Add Tableau Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bisources/WorkwithBISources/index.html">Working with BI Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">File System Sources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/FileSystems/index.html">Add File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/VirtualFileSystems/index.html">Virtual File Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Analysts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/UserAuthenticationForDataSources/index.html">User Authentication for Data Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/ShareAndAccessQueries/index.html">Share and Access Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WriteQueries/index.html">Write Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/DevelopQueries/index.html">Develop Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analyst/WorkwithQueryResults/index.html">Work with Query Results</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Data Stewards</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceApp/index.html">Governance App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/PolicyCenter/index.html">Policy Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Workflow/index.html">Workflow Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/GovernanceDashboard/index.html">Governance Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/StewardshipWorkbench/index.html">Stewardship Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AnalyticsStewardship/index.html">Analytics Stewardship</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/Glossary/index.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticlesAndTags/index.html">Articles and Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/ArticleGroups/index.html">Article Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataCatalogCustomization/index.html">Customize Your Data Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/DataDocumentation/index.html">Data Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/AutoTitlingandLexicon/index.html">Auto-titling and Lexicon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../steward/SnowflakeTags/index.html">Snowflake Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Alation for Server Administrators</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../CustomizableHomePage/index.html">Customizable Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdminSettings/index.html">Administrator Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdditionalConfiguration/index.html">Additional Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RunbookForAdministrators/index.html">Runbook for Administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlationAPIs/index.html">Alation APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../How-tos/index.html">How-tos</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Troubleshooting</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="LogsOverview.html">Logs Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="StopandStartAlation.html">Stopping and Starting Alation</a></li>
<li class="toctree-l2"><a class="reference internal" href="FixJobSchedules.html">Fix Job Schedules after 2022.3 Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="DuplicateUserFound.html">Duplicate User Found</a></li>
<li class="toctree-l2"><a class="reference internal" href="SnowflakeMDEFailsDueToViewChanges.html">MDE from Snowflake Data Source Fails with “Error Message: ‘name’”</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataPoliciesAreNotExtracted.html">Data Policies are Not Extracted into Policy Center</a></li>
<li class="toctree-l2"><a class="reference internal" href="TroubleshootAAV2UpdateTo20214.html">Troubleshooting Alation Analytics V2 Upgrade to 2021.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="ElasticsearchNotStarting20214.html">Elasticsearch Is Not Starting After Update to 2021.4.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="RPMInstallationErrorDuringUpdate.html">RPM Installation Error During Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="Error500AfterUpdate.html">Error 500 After Updating</a></li>
<li class="toctree-l2"><a class="reference internal" href="DefaultServerHealthAlerts.html">Default Server Health Alerts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configure Server Health Alerts for Administrators</a></li>
<li class="toctree-l2"><a class="reference internal" href="ReindexTablesafterBackupRestore.html">How to Reindex Tables after Backup Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="UninstallDesktopCompose.html">How to Uninstall Desktop Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="ScheduledQueriesandDaylightSavingTime.html">Scheduled Queries and Daylight Saving Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="MacExcel16CrasheswhenRefreshingDatafromExcelLiveReport.html">Mac Excel 16 Crashes when Refreshing Data from Excel Live Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="DiagnoseQueryLogIngestionFailure.html">Query Log Ingestion Failure Diagnosing</a></li>
<li class="toctree-l2"><a class="reference internal" href="TroubleshootNetworkIssues.html">Troubleshooting Network Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="NotAccessibleToUser.html">Alation is Not Accessible to Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataDiskFull.html">Data Disk is Full</a></li>
<li class="toctree-l2"><a class="reference internal" href="RootDiskFull.html">Root Disk is Full</a></li>
<li class="toctree-l2"><a class="reference internal" href="AlationRepairTool.html">Alation Repair Tool</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Release Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../releases/releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/supportmatrices/index.html">Support Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/endofsupport/index.html">End Of Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/snowflakeclladdon/index.html">Snowflake Parser Add-On</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/fieldnotices/index.html">Important Notices and Security Alerts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archived Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archive/About/index.html">About the Documentation Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/AdminConfig/index.html">Administration and Update Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/ReleaseNotes/index.html">Release Notes Archive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive/Usage/index.html">Usage and Customization Archive</a></li>
</ul>

              
            
          </div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="wy-nav-top-icon"></i>
        <a href="../../index.html">Alation User Guide</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs" class="breadcrumbs">
    <a href="../../index.html">Docs</a>
    <span class="separator">&gt;</span>
    <a href="index.html">Troubleshooting</a>
    <span class="separator">&gt;</span>
    <span>Configure Server Health Alerts for Administrators</span>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <section id="configure-server-health-alerts-for-administrators">
<h1>Configure Server Health Alerts for Administrators<a class="headerlink" href="#configure-server-health-alerts-for-administrators" title="Permalink to this headline">¶</a></h1>
<p class="on-prem-label hover-text">Customer Managed <span class="tooltip-text">Applies to customer-managed instances of Alation</span></p>
<p>Alation offers automated server health checks to help you monitor your on-premise Alation software. Server health checks will alert the admins by email if there are any problems with the server. This functionality complements the component status checks described in <a class="reference internal" href="../AdminSettings/MonitorComponentHealth.html"><span class="doc">Monitoring Component Health</span></a>. Alation Cloud Service (ACS) instances of Alation are actively monitored by Alation staff, so ACS customers don’t need to worry about these alerts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Basic system checks like CPU load and RAM usage are usually monitored by your system monitoring utilities.</p>
</div>
<p>Starting with 2021.4.5, Alation will automatically alert Server Admins if Alation disks are too full. (This is the <a class="reference internal" href="#root-or-data-volumes-overflow-check">Root or Data Volumes Overflow Check</a>.) The DataDog agent will be enabled by default. You can manually enable additional server health checks. See <a class="reference internal" href="DefaultServerHealthAlerts.html"><span class="doc">Default Server Health Alerts</span></a> for more information.</p>
<p>Before 2021.4.5, there are no default alerts. You must manually enable server health checks to get any alerts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alation will send an alert only if something is “unhealthy” and the check returns a warning. If the check doesn’t detect any issues, it won’t trigger an alert.</p>
</div>
<section id="enabling-admin-alerts">
<span id="id1"></span><h2>Enabling Admin Alerts<a class="headerlink" href="#enabling-admin-alerts" title="Permalink to this headline">¶</a></h2>
<p>Use these instructions to enable the full set of server health checks. You must first enter the Alation shell.</p>
<ol class="arabic">
<li><p>Use SSH to connect to the Alation server.</p></li>
<li><p>Enter the Alation shell using the following command:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</li>
</ol>
<p>To enable admin alerts:</p>
<ol class="arabic">
<li><p>In the Alation shell, run the following command to enable alerts:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.enable_admin_alert_checks<span class="w"> </span>-s<span class="w"> </span>True
</pre></div>
</div>
</li>
<li><p>Enable the DataDog agent with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_action<span class="w"> </span>enable_datadog
</pre></div>
</div>
</li>
<li><p>Exit the shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</li>
</ol>
<p>After you enable admin alert checks, users with the Server Admin role will start receiving email alerts for the full set of server health checks. There is currently no way for individual users to opt out of these notifications. All Server Admins in your instance will receive them.</p>
<p>The alert email will have the details on the check and a suggested course of action to fix the problem.</p>
<p>You can configure which server health checks Alation will perform. See <a class="reference internal" href="#configuring-which-alerts-to-get">Configuring Which Alerts to Get</a>.</p>
</section>
<section id="alation-server-health-checks">
<h2>Alation Server Health Checks<a class="headerlink" href="#alation-server-health-checks" title="Permalink to this headline">¶</a></h2>
<p>Alation will perform two sets of checks: <strong>hourly</strong> and <strong>daily</strong>.</p>
<section id="hourly-checks">
<h3>Hourly Checks<a class="headerlink" href="#hourly-checks" title="Permalink to this headline">¶</a></h3>
<p>By default, these checks run every hour. You can configure how often they run (see <a class="reference internal" href="#changing-the-interval-for-hourly-checks">Changing the Interval for Hourly Checks</a>). These checks should run often.</p>
<p>If any of these checks find problems, Alation will send email alerts to Server Admins. If the same check finds a problem again during the next hour, Alation will send out the same emails again.</p>
<p>Hourly checks include:</p>
<ul class="simple">
<li><p>Basic Service Check</p></li>
<li><p>Celery Queues Health Check</p></li>
<li><p>Backend Task Scheduling Health Check</p></li>
<li><p>Out of Memory Kills Check</p></li>
<li><p>Excessive Query Time Check</p></li>
<li><p>Auth Service Check</p></li>
<li><p>Alation Analytics V2 Check</p></li>
</ul>
<section id="basic-service-check">
<h4>Basic Service Check<a class="headerlink" href="#basic-service-check" title="Permalink to this headline">¶</a></h4>
<p>Checks if all Alation services are up and running.</p>
</section>
<section id="celery-queues-health-check">
<h4>Celery Queues Health Check<a class="headerlink" href="#celery-queues-health-check" title="Permalink to this headline">¶</a></h4>
<p>Alation uses Celery to manage many tasks simultaneously. If Celery queues have too many items, it means that tasks aren’t processing fast enough. This could result in some tasks getting stuck and prevent other tasks from processing. It could also mean that the system is underperforming.</p>
<p>By default, this check only monitors some Celery queues. You can configure which queues to check. The queues included by default are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code> takes backend jobs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ingestion</span></code> takes backend jobs. If default and ingestion queues get full, metadata will be out of date.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_scheduling</span></code> manages the running of scheduled Compose queries. If full, scheduled queries may stay unprocessed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stewardship</span></code> manages the Stewardship Dashboard. If full, the dashboard won’t update.</p></li>
</ul>
<p>To specify which queues to check, you will need to change the <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.celery_queues_to_monitor</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.celery_queues_to_monitor<span class="w"> </span>-s<span class="w"> </span><span class="o">[</span>list<span class="w"> </span>of<span class="w"> </span>queues<span class="w"> </span>to<span class="w"> </span>monitor<span class="o">]</span>
</pre></div>
</div>
<p>Don’t use spaces in the list when setting the parameter value. Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.celery_queues_to_monitor<span class="w"> </span>-s<span class="w"> </span><span class="o">[</span><span class="s1">&#39;fastqueue&#39;</span>,<span class="s1">&#39;thinqueue&#39;</span>,<span class="s1">&#39;default&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>To change the threshold of how many items in the queue to consider as excessive, use the <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.celery_queue_size_threshold</span></code> parameter:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.celery_queue_size_threshold<span class="w"> </span>-s<span class="w"> </span>&lt;number&gt;
</pre></div>
</div>
<p>Replace <em>&lt;number&gt;</em> with the number of tasks in the queue.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.celery_queue_size_threshold</span></code> equally applies to all queues.</p>
<p>If a queue has more items than the threshold, Alation issues this alert:</p>
<ul class="simple">
<li><p>The following Celery queues are quite crowded: <em>list of unhealthy queues</em>.</p></li>
</ul>
</section>
<section id="backend-task-scheduling-health-check">
<h4>Backend Task Scheduling Health Check<a class="headerlink" href="#backend-task-scheduling-health-check" title="Permalink to this headline">¶</a></h4>
<p>Alation users schedule various jobs to run at a specific time. When the server tasks associated with these jobs miss their scheduled runs, it means the scheduler or the workers fetching jobs from the scheduler may be overloaded. This check looks at server tasks like:</p>
<ul class="simple">
<li><p>BI server extraction</p></li>
<li><p>File system extraction</p></li>
<li><p>Metadata extraction</p></li>
<li><p>Profiling</p></li>
<li><p>Query log ingestion</p></li>
</ul>
<p>The check will fetch information if any of these tasks missed their schedule and issues this alert:</p>
<ul class="simple">
<li><p>The following tasks missed their latest scheduled run: &lt;list of tasks&gt;.</p></li>
</ul>
</section>
<section id="out-of-memory-kills-check">
<h4>Out of Memory Kills Check<a class="headerlink" href="#out-of-memory-kills-check" title="Permalink to this headline">¶</a></h4>
<p>Checks if there are any out-of-memory (OOM) process “kills.” If so, it issues this alert:</p>
<ul class="simple">
<li><p>The following processes were OOM-killed by the OS: <em>list of processes</em>.</p></li>
</ul>
</section>
<section id="excessive-query-time-check">
<h4>Excessive Query Time Check<a class="headerlink" href="#excessive-query-time-check" title="Permalink to this headline">¶</a></h4>
<p>Checks if there are queries running for too long on the main Alation database. If so, it issues this alert:</p>
<ul class="simple">
<li><p>&lt;number&gt; queries are running for longer than 3600 seconds on Alation backend: <em>list of queries that take too long</em>.</p></li>
</ul>
</section>
<section id="auth-service-check">
<h4>Auth Service Check<a class="headerlink" href="#auth-service-check" title="Permalink to this headline">¶</a></h4>
<p><em>Starting from 2021.4.5</em></p>
<p>Checks whether the authentication service is running. If the <code class="docutils literal notranslate"><span class="pre">​​alation.authentication.service.enabled</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> but no authentication service is running, this check issues the alert:</p>
<ul class="simple">
<li><p>Authserver is reporting error in following services: failed to connect to all addresses.</p></li>
</ul>
</section>
<section id="alation-analytics-v2-check">
<h4>Alation Analytics V2 Check<a class="headerlink" href="#alation-analytics-v2-check" title="Permalink to this headline">¶</a></h4>
<p><em>Starting from 2023.1</em></p>
<p>Checks whether a connection to the RabbitMQ and Postgres components of Alation Analytics V2 can be established. If not, it issues alerts such as:</p>
<ul class="simple">
<li><p>AAv2 Postgres: Error while running query: could not connect to server:Connection refused Is the server running on host “127.0.0.1” and accepting TCP/IP connections on port 25432</p></li>
<li><p>AAv2 RabbitMQ: Error while establishing connection: AMQPConnectionError: (AMQPConnectorSocketConnectError: ConnectionRefusedError(111, ‘Connection refused’))</p></li>
</ul>
<p>For help addressing these errors, see <a class="reference internal" href="../../installconfig/AlationAnalyticsV2/MaintainAlationAnalyticsV2.html"><span class="doc">Maintain Alation Analytics V2</span></a>.</p>
</section>
</section>
<section id="changing-the-interval-for-hourly-checks">
<h3>Changing the Interval for Hourly Checks<a class="headerlink" href="#changing-the-interval-for-hourly-checks" title="Permalink to this headline">¶</a></h3>
<p>By default, these hourly checks run every hour, but you can change this interval using the <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.admin_alert_check_interval</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code>:</p>
<ol class="arabic">
<li><p>Use SSH to connect to the Alation server.</p></li>
<li><p>Enter the Alation shell using the following command:</p>
<div class="highlight-Bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>/etc/init.d/alation<span class="w"> </span>shell
</pre></div>
</div>
</li>
</ol>
<p>To change the interval:</p>
<ol class="arabic">
<li><p>In the Alation shell, run the following command, replacing <code class="docutils literal notranslate"><span class="pre">&lt;interval</span> <span class="pre">in</span> <span class="pre">seconds&gt;</span></code> with the desired interval:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.admin_alert_check_interval<span class="w"> </span>-s<span class="w"> </span>&lt;interval<span class="w"> </span><span class="k">in</span><span class="w"> </span>seconds&gt;
</pre></div>
</div>
</li>
<li><p>Enable the DataDog agent with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_action<span class="w"> </span>enable_datadog
</pre></div>
</div>
</li>
<li><p>Exit the shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="daily-checks">
<h3>Daily Checks<a class="headerlink" href="#daily-checks" title="Permalink to this headline">¶</a></h3>
<p>If any of the daily checks detect a health issue, the admins will be immediately notified. The daily checks run once a day, inside one of the hourly checks. The emails sent from that combined check will only have warnings from checks that found problems. This may mean the email contains only daily checks, only hourly checks, or a mix.</p>
<p>Daily checks include:</p>
<ul class="simple">
<li><p>Root or Data Volumes Overflow Check</p></li>
<li><p>Backup Health Check</p></li>
<li><p>Backend Table Limit Check</p></li>
<li><p>Elasticsearch Migration Status Check</p></li>
</ul>
<section id="root-or-data-volumes-overflow-check">
<h4>Root or Data Volumes Overflow Check<a class="headerlink" href="#root-or-data-volumes-overflow-check" title="Permalink to this headline">¶</a></h4>
<p>Checks if any of the root or data volumes are filled up over a threshold. You can change the threshold using the <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.disk_usage_threshold</span></code> parameter in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation_conf<span class="w"> </span>alation.healthcheck.disk_usage_threshold<span class="w"> </span>-s<span class="w"> </span>&lt;number<span class="w"> </span><span class="k">in</span><span class="w"> </span>%&gt;
</pre></div>
</div>
<p>If the used disk space passes the threshold, the check issues this alert:</p>
<ul class="simple">
<li><p>The following volumes are quite full: <em>list of volumes</em>.”</p></li>
</ul>
</section>
<section id="backup-health-check">
<h4>Backup Health Check<a class="headerlink" href="#backup-health-check" title="Permalink to this headline">¶</a></h4>
<p>Checks if the daily backup job has run successfully. Starting with 2021.4.5, Alation can also check the health of Backup V2.</p>
<p>If this check returns a warning, there is something wrong with the backup job health. If this check doesn’t find any problems, you will still need to check on backups as specified in your admin routine. Currently, the backup job doesn’t provide any details on the job status. So passing this check doesn’t necessarily mean creating a backup is a complete success. To validate backups, check if the latest backups are present in your backup directory. This is usually <strong>/data2/backup/</strong>. It should have a backup file for each night of the week. You can validate a backup by restoring it on a fresh instance.</p>
<p>The check issues this alert:</p>
<ul class="simple">
<li><p>The latest backup job has failed.”</p></li>
</ul>
</section>
<section id="backend-table-limit-check">
<h4>Backend Table Limit Check<a class="headerlink" href="#backend-table-limit-check" title="Permalink to this headline">¶</a></h4>
<p>Some tables in the Alation database have limits on how many rows they can take. This check tests if such a limit is approaching for any of them. If a table is close to the limit, the check issues this alert:</p>
<ul class="simple">
<li><p>Integer IDs of the following Alation backend tables have reached &lt;number&gt;% of maximum value.”</p></li>
</ul>
</section>
</section>
</section>
<section id="configuring-which-alerts-to-get">
<span id="id2"></span><h2>Configuring Which Alerts to Get<a class="headerlink" href="#configuring-which-alerts-to-get" title="Permalink to this headline">¶</a></h2>
<p>You can configure which alerts to get. In <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code>, the parameter <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.alert_list</span></code> has the list of alerts:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation.healthcheck.alert_list<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;celery&#39;</span>,<span class="s1">&#39;oom&#39;</span>,<span class="s1">&#39;disk&#39;</span>,<span class="s1">&#39;job&#39;</span>,<span class="s1">&#39;postgres&#39;</span>,<span class="s1">&#39;backup&#39;</span>,<span class="s1">&#39;authserver&#39;</span>,<span class="s1">&#39;scan_postgres&#39;</span>,<span class="s1">&#39;alation_analytics_v2&#39;</span><span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">celery</span></code> enables the <a class="reference internal" href="#celery-queues-health-check">Celery Queues Health Check</a> and <a class="reference internal" href="#backend-task-scheduling-health-check">Backend Task Scheduling Health Check</a> alerts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oom</span></code> enables the <a class="reference internal" href="#out-of-memory-kills-check">Out of Memory Kills Check</a> alert.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">disk</span></code> enables the <a class="reference internal" href="#root-or-data-volumes-overflow-check">Root or Data Volumes Overflow Check</a> alert.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">job</span></code> enables the <a class="reference internal" href="#backup-health-check">Backup Health Check</a> alert for Backup V1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">postgres</span></code> enables the <a class="reference internal" href="#backend-table-limit-check">Backend Table Limit Check</a> and <a class="reference internal" href="#excessive-query-time-check">Excessive Query Time Check</a> alerts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">backup</span></code> enables the <a class="reference internal" href="#backup-health-check">Backup Health Check</a> alert for Backup V2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">authserver</span></code> enables the <a class="reference internal" href="#auth-service-check">Auth Service Check</a> alert.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_postgres</span></code> enables the Postgres corruption alert. This health check runs on a separate schedule from the others. See <a class="reference internal" href="../How-tos/HowToScanPostgresForCorruptedIndexes.html"><span class="doc">How to Scan Postgres For Corrupted Indexes</span></a> for more information. This alert is available starting in 2022.1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alation_analytics_v2</span></code> enables the Alation Analytics V2 alert, starting in 2023.1.</p></li>
</ul>
<p>If you want to stop getting an alert, remove the corresponding value from the list in the <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.alert_list</span></code> parameter. No components need to be restarted. Don’t use spaces in the list when setting the parameter value.</p>
<p>For example, if you aren’t using Backup V1 and want to remove that health check, you could remove <code class="docutils literal notranslate"><span class="pre">'job'</span></code> from the list:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alation.healthcheck.alert_list<span class="w"> </span>-s<span class="w"> </span><span class="o">[</span><span class="s1">&#39;celery&#39;</span>,<span class="s1">&#39;oom&#39;</span>,<span class="s1">&#39;disk&#39;</span>,<span class="s1">&#39;postgres&#39;</span>,<span class="s1">&#39;backup&#39;</span>,<span class="s1">&#39;authserver&#39;</span>,<span class="s1">&#39;scan_postgres&#39;</span>,<span class="s1">&#39;alation_analytics_v2&#39;</span><span class="o">]</span>
</pre></div>
</div>
</section>
<section id="health-check-parameters-in-alation-conf">
<h2>Health Check Parameters in alation_conf<a class="headerlink" href="#health-check-parameters-in-alation-conf" title="Permalink to this headline">¶</a></h2>
<p>The following table shows all the parameters in <code class="docutils literal notranslate"><span class="pre">alation_conf</span></code> that affect admin alerts.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.enable_admin_alert_checks</span></code></p></td>
<td><p>Value can be <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.
If <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.alert_list</span></code> is used.
If <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.default_list</span></code> is used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.alert_list</span></code></p></td>
<td><p>Specifies which alert checks should be performed
if <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.enable_admin_alert_checks</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.
By default, the list is <code class="docutils literal notranslate"><span class="pre">['celery',</span> <span class="pre">'oom',</span> <span class="pre">'disk',</span> <span class="pre">'job',</span> <span class="pre">'postgres',</span> <span class="pre">'backup',</span> <span class="pre">'authserver',</span> <span class="pre">'scan_postgres']</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.default_list</span></code></p></td>
<td><p>Specifies which alert checks should be performed
if <code class="docutils literal notranslate"><span class="pre">alation.healthcheck.enable_admin_alert_checks</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>.
By default, the list is just <code class="docutils literal notranslate"><span class="pre">['disk']</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.admin_alert_check_interval</span></code></p></td>
<td><p>Sets the interval, in <em>seconds</em>, for checks that run hourly
by default. See <a class="reference internal" href="#changing-the-interval-for-hourly-checks">Changing the Interval for Hourly Checks</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.celery_queues_to_monitor</span></code></p></td>
<td><p>List of Celery queues to be monitored by the <a class="reference internal" href="#celery-queues-health-check">Celery Queues Health Check</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.celery_queue_size_threshold</span></code></p></td>
<td><p>Sets the healthy Celery queue threshold, in number of queue items, for the <a class="reference internal" href="#celery-queues-health-check">Celery Queues Health Check</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">alation.healthcheck.disk_usage_threshold</span></code></p></td>
<td><p>Sets the disk usage threshold, in %, for the <a class="reference internal" href="#root-or-data-volumes-overflow-check">Root or Data Volumes Overflow Check</a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer>

  
<div class="navigation-bar">

    <div class="navigation navigation--prev">
        
        <a class="navigation__link" href="DefaultServerHealthAlerts.html">
            <button class="navigation__button">
                <i class="icon icon-left"></i>
            </button>
            <div class="navigation__title">
                <span class="heading">Previous</span> <br />Default Server Health Alerts
            </div>
        </a>
        
    </div>

    <div class="navigation navigation--next">
        
        <a class="navigation__link" title="Accesskey Alt(+Shift)+p" accesskey="p" href="ReindexTablesafterBackupRestore.html">
            <div class="navigation__title">
                <span class="heading">Next</span> <br />How to Reindex Tables after Backup Restore
            </div>
            <button class="navigation__button" title="Accesskey Alt(+Shift)+n" accesskey="n">
                <i class="icon icon-right"></i>
            </button>
        </a>
        
    </div>

</div>


</footer>

        </div>
      </div>

    </section>

    <div class="wy-nav-side wy-nav-secondary">
      <div class="wy-side-scroll">
        <div class="wy-side-scroll__content">
          <div class="wy-menu-secondary">
              <div class="comments">
    <a href="mailto:no-reply-docs-feedback@alation.com?subject=Documentation Feedback on admins/Troubleshooting/ConfigureServerHealthAlertsforAdmins&body=Alation%20welcomes%20your%20comments%20on%20typos,%20content%20accuracy%20and%20completeness,%20and%20whether%20you%20found%20this%20page%20helpful.%20You%20will%20not%20receive%20a%20reply%20to%20this%20email.">
        <i class="icon icon-envelope" aria-hidden="true"></i>Request docs changes
    </a>
    <a href="#open-modal-pdf">
        <i class="icon icon-pdf" aria-hidden="true"></i>Download PDF
    </a>
</div>
              
                <p class="wy-menu-secondary-header">On this page</p>
                <ul>
<li><a class="reference internal" href="#">Configure Server Health Alerts for Administrators</a><ul>
<li><a class="reference internal" href="#enabling-admin-alerts">Enabling Admin Alerts</a></li>
<li><a class="reference internal" href="#alation-server-health-checks">Alation Server Health Checks</a><ul>
<li><a class="reference internal" href="#hourly-checks">Hourly Checks</a><ul>
<li><a class="reference internal" href="#basic-service-check">Basic Service Check</a></li>
<li><a class="reference internal" href="#celery-queues-health-check">Celery Queues Health Check</a></li>
<li><a class="reference internal" href="#backend-task-scheduling-health-check">Backend Task Scheduling Health Check</a></li>
<li><a class="reference internal" href="#out-of-memory-kills-check">Out of Memory Kills Check</a></li>
<li><a class="reference internal" href="#excessive-query-time-check">Excessive Query Time Check</a></li>
<li><a class="reference internal" href="#auth-service-check">Auth Service Check</a></li>
<li><a class="reference internal" href="#alation-analytics-v2-check">Alation Analytics V2 Check</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changing-the-interval-for-hourly-checks">Changing the Interval for Hourly Checks</a></li>
<li><a class="reference internal" href="#daily-checks">Daily Checks</a><ul>
<li><a class="reference internal" href="#root-or-data-volumes-overflow-check">Root or Data Volumes Overflow Check</a></li>
<li><a class="reference internal" href="#backup-health-check">Backup Health Check</a></li>
<li><a class="reference internal" href="#backend-table-limit-check">Backend Table Limit Check</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#configuring-which-alerts-to-get">Configuring Which Alerts to Get</a></li>
<li><a class="reference internal" href="#health-check-parameters-in-alation-conf">Health Check Parameters in alation_conf</a></li>
</ul>
</li>
</ul>

              
            </div>
          </div>
      </div>
    </div>

  </div>

  
  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->

  
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="../../_static/js/rtd_sphinx_search.min.js"></script>
  
  <script type="text/javascript" src="../../_static/searchtools.js"></script> <script type="text/javascript" id="idPiwikScriptPlaceholder"></script><script type="text/javascript" src="../../_static/js/main.bundle.js"></script>
  <script type="text/javascript" src="../../_static/js/runtime.bundle.js"></script>

  
  

  
    <div id="open-modal-pdf" class="modal-window">
<div>
  <a href="#" title="Close" class="modal-close">Close</a>
  <h4>Alation Documentation PDF</h4>
  <p>This PDF contains all our documentation and is more than <b>120 MB</b> in size. We recommend using an ethernet or Wi-Fi connection for downloading.</p>
  <br>
  <div class="modal-buttons">
    <a href="https://pdf-docs.alation.com/AlationUserDocs.pdf" class="btn-cta btn-cta--primary" target="_blank">
      Download PDF
    </a>
    <a href="#" title="Close" class="btn-cta">Cancel</a>
  </div>
</div>
  

</body>
</html>
<!--3.6.17-->